import{u as P,s as R,a as y}from"./index-zOXOKCmm.js";import{G as T,a4 as U,J as o,M as t,aY as k,$ as n,P as d,U as w,al as j,f as g,r as b,B as r}from"./vendor-vue-rrJoI5pD.js";import"./vendor-BgxNQcjb.js";import"./vendor-element-Bmt4lDx1.js";import"./vendor-socket-DmpRiKjA.js";const V={class:"min-h-screen bg-slate-50 pb-24 lg:pb-6"},$={class:"mx-auto max-w-7xl px-3 sm:px-4 lg:px-8 py-4 sm:py-6 space-y-4 sm:space-y-6"},O={class:"overflow-hidden rounded-2xl bg-gradient-to-r from-emerald-600 to-emerald-500 p-4 sm:p-6 shadow-xl"},A={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},E={class:"flex items-center gap-3"},K={class:"text-xl sm:text-2xl font-bold text-white"},N=["disabled"],q={class:"hidden sm:inline"},F={key:0,class:"rounded-2xl bg-white p-12 text-center shadow-lg"},G={key:1,class:"rounded-2xl bg-white p-12 text-center shadow-lg"},J={key:2,class:"grid gap-4 lg:grid-cols-2"},Q={class:"border-b border-slate-100 bg-slate-50 px-4 py-3 sm:px-5"},Y={class:"flex items-center justify-between"},W={class:"text-lg font-semibold text-slate-900"},X={class:"text-right"},Z={class:"mt-2 text-xs text-slate-500"},ee={class:"divide-y divide-slate-100"},te={class:"text-sm font-semibold text-slate-900"},se={class:"mt-1 flex items-center gap-2 text-xs text-slate-500"},ae={class:"flex items-center gap-2"},le=["disabled","onClick"],ne=["disabled","onClick"],pe={__name:"KitchenView",setup(oe){const v=P(),c=b([]),i=b(!1),u=b({});let m=null;const M=g(()=>v.user?.role==="bar"?"Bar Display":"Kitchen Display"),f=g(()=>{const e=v.user?.role;return e==="kitchen"||e==="bar"?e:""}),x=g(()=>f.value?c.value.map(e=>{const s=(e.items||[]).filter(l=>l.destination===f.value);return{...e,items:s}}).filter(e=>e.items.length>0):c.value),p=async()=>{i.value=!0;try{const e=await y.get("/orders/pending");c.value=e.data.data?.orders||[]}catch{c.value=[]}finally{i.value=!1}},h=e=>!!u.value[e],_=async(e,s)=>{if(!h(e.id)){u.value={...u.value,[e.id]:!0};try{await y.put(`/orders/items/${e.id}/status`,{status:s}),await p()}catch{}finally{u.value={...u.value,[e.id]:!1}}}},S=async e=>{e?.type&&(e.type==="order_created"||e.type==="order_items_updated"||e.type==="orders_merged"||e.type==="payment_completed"||e.type==="item_status_updated")&&await p()},C=e=>({pending:"Pending",cooking:"Diproses",ready:"Siap",served:"Disajikan"})[e]||e,D=e=>({cooking:"Diproses",ready:"Siap",served:"Disajikan"})[e]||e,B=e=>({pending:"bg-amber-100 text-amber-700",cooking:"bg-blue-100 text-blue-700",ready:"bg-emerald-100 text-emerald-700",served:"bg-slate-100 text-slate-600"})[e]||"bg-slate-100 text-slate-600",z=e=>({cooking:"bg-blue-100 text-blue-700",ready:"bg-emerald-100 text-emerald-700",served:"bg-slate-100 text-slate-600"})[e]||"bg-slate-100 text-slate-600",H=e=>e==="kitchen"?"bg-orange-100 text-orange-700":"bg-purple-100 text-purple-700",I=e=>e?new Date(e).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return T(()=>{p(),m=R(S)}),U(()=>{m&&m()}),(e,s)=>(r(),o("div",V,[t("div",$,[t("div",O,[t("div",A,[t("div",E,[s[1]||(s[1]=k('<div class="flex h-12 w-12 sm:h-14 sm:w-14 items-center justify-center rounded-xl bg-white/20 backdrop-blur-sm"><svg class="h-7 w-7 sm:h-8 sm:w-8 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 7c0-2.21 1.79-4 4-4h4c2.21 0 4 1.79 4 4v2H6V7z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 9h14l-1 10a2 2 0 01-2 2H8a2 2 0 01-2-2L5 9z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6"></path></svg></div>',1)),t("div",null,[t("h1",K,n(M.value),1),s[0]||(s[0]=t("p",{class:"text-xs sm:text-sm text-emerald-100"},"Pantau pesanan secara realtime",-1))])]),t("button",{onClick:p,class:"flex items-center justify-center gap-2 rounded-xl bg-white px-4 py-2.5 font-semibold text-emerald-600 shadow-lg transition-all hover:scale-105 active:scale-95",disabled:i.value},[(r(),o("svg",{class:d(["h-5 w-5",i.value?"animate-spin":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...s[2]||(s[2]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),t("span",q,n(i.value?"Memuat...":"Refresh"),1)],8,N)])]),i.value&&x.value.length===0?(r(),o("div",F,[...s[3]||(s[3]=[t("div",{class:"mx-auto mb-4 h-10 w-10 animate-spin rounded-full border-4 border-emerald-200 border-t-emerald-500"},null,-1),t("div",{class:"text-sm font-semibold text-slate-600"},"Memuat pesanan...",-1)])])):x.value.length===0?(r(),o("div",G,[...s[4]||(s[4]=[k('<div class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-emerald-50 text-emerald-500"><svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 4h12l-1.5 9h-9L6 4z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 20a1 1 0 100-2 1 1 0 000 2zM16 20a1 1 0 100-2 1 1 0 000 2z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10"></path></svg></div><div class="mt-3 text-sm font-semibold text-slate-600">Belum ada pesanan aktif</div>',2)])])):(r(),o("div",J,[(r(!0),o(w,null,j(x.value,l=>(r(),o("div",{key:l.order.id,class:"overflow-hidden rounded-2xl border border-slate-100 bg-white shadow-lg"},[t("div",Q,[t("div",Y,[t("div",null,[s[5]||(s[5]=t("div",{class:"text-sm text-slate-500"},"Meja",-1)),t("div",W,"#"+n(l.order.table_number),1)]),t("div",X,[s[6]||(s[6]=t("div",{class:"text-xs text-slate-500"},"Status",-1)),t("div",{class:d([z(l.order.order_status),"inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold"])},n(D(l.order.order_status)),3)])]),t("div",Z,n(I(l.order.created_at))+" Â· "+n(l.items.length)+" item ",1)]),t("div",ee,[(r(!0),o(w,null,j(l.items,a=>(r(),o("div",{key:a.id,class:"flex items-center justify-between gap-3 px-4 py-3 sm:px-5"},[t("div",null,[t("div",te,n(a.product_name),1),t("div",se,[t("span",null,"Qty "+n(a.qty),1),t("span",{class:d(["inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[10px] font-semibold uppercase",H(a.destination)])},n(a.destination),3),t("span",{class:d(["inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-semibold",B(a.item_status)])},n(C(a.item_status)),3)])]),t("div",ae,[t("button",{class:d(["rounded-xl px-3 py-2 text-xs font-semibold transition-all",a.item_status==="pending"?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-slate-100 text-slate-400 cursor-not-allowed"]),disabled:a.item_status!=="pending"||h(a.id),onClick:L=>_(a,"cooking")}," Proses ",10,le),t("button",{class:d(["rounded-xl px-3 py-2 text-xs font-semibold transition-all",a.item_status==="cooking"?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-400 cursor-not-allowed"]),disabled:a.item_status!=="cooking"||h(a.id),onClick:L=>_(a,"ready")}," Selesai ",10,ne)])]))),128))])]))),128))]))])]))}};export{pe as default};
