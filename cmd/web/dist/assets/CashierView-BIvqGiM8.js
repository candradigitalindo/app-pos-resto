import{G as Ra,a4 as $a,w as Ss,r as u,f as p,J as d,M as e,aY as Ps,u as t,P as D,$ as o,U as Q,Z as b,_ as ua,X as E,au as W,a as g,al as te,K as S,L as h,as as la,B as r,a7 as oa,C as ca}from"./vendor-vue-rrJoI5pD.js";import{_ as ma,a as xa}from"./Pagination-DIW_Ff4w.js";import{u as Ka,s as Fa,a as _,b as qa}from"./index-zOXOKCmm.js";import{E as c,a as ht}from"./vendor-element-Bmt4lDx1.js";import"./vendor-BgxNQcjb.js";import"./vendor-socket-DmpRiKjA.js";function za(){const zt=u(!1),me=u(!1),lt=u(!1),_e=u(!1),xe=u(!1),se=u(!1),ot=u("orders"),qe=Ka(),{warning:f}=qa(),yt=u([]),nt=u([]),ae=u([]),v=u(null),ze=u(0),le=u(0),pe=u(""),w=u(""),K=u(""),A=u({current_page:1,total_pages:1,total_items:0,page_size:50}),O=u({current_page:1,total_pages:1,total_items:0,page_size:50}),ve=u({open_shift:null,last_closed_shift:null}),U=u(!1),Ge=u([]),Le=u(!1),oe=u(!1),Y=u(!1),Qe=u(!1),Ee=u(!1),F=u(!1),_t=u(!1),we=u(!1),be=u(null),ke=u([]),J=u({}),Me=u(!1),ne=u("percentage"),N=u(0),re=u(""),We=u(!1),wt=u(!1),kt=u(!1),Ce=u(!1),fe=u(!1),Te=u(!1),Se=u("cash"),Pe=u("cash"),Ie=u(""),X=u({}),ie=u(0),je=u(""),I=u(0),j=u(""),C=u(""),rt=u(""),Ve=u(!1),H=u(null),q=u(""),Be=u(""),Ye=u(!1),Je=u(!1),Xe=u(!1),z=u(null),R=u(null),De=u({outlet_name:"Outlet",outlet_address:"",outlet_phone:"",receipt_footer:"Terima kasih atas kunjungan Anda!",social_media:""}),ge=u(null),it=u(""),de=u(""),G=u(""),L=u(""),dt=u(!1),he=u("in"),Ze=u(""),et=u(""),Ae=u(0),tt=u(""),ut=u(!1),Mt=u(!1),ct=u("in"),Oe=u("current"),Is=[{value:"cash",label:"Tunai"},{value:"card",label:"Kartu"},{value:"qris",label:"QRIS"},{value:"transfer",label:"Transfer"}],Gt=[{key:"time",label:"Waktu"},{key:"id",label:"Nomor Pesanan"},{key:"payment_method",label:"Metode"},{key:"total_amount",label:"Total",align:"text-right"},{key:"status",label:"Status",align:"text-center"},{key:"actions",label:"Aksi",align:"text-center"}],js=[{key:"voided_at",label:"Waktu Void"},{key:"id",label:"Nomor Pesanan"},{key:"table_number",label:"Meja"},{key:"total_amount",label:"Total",align:"text-right"},{key:"voided_by",label:"Dibatalkan Oleh"},{key:"void_reason",label:"Alasan"}],Vs=p(()=>le.value===0?0:ze.value/le.value),Ct=p(()=>yt.value.filter(a=>a.active_order&&a.active_order.payment_status!=="paid"&&!a.active_order.is_merged)),Bs=p(()=>{if(!pe.value.trim())return Ct.value;const a=pe.value.trim().toLowerCase();return Ct.value.filter(n=>n.table_number?.toString().toLowerCase().includes(a))}),Lt=p(()=>v.value?.items||[]),Ds=p(()=>v.value?.adjustments||[]),Tt=p(()=>Lt.value.map(a=>({...a,splitQty:X.value[a.id]||0})).filter(a=>a.splitQty>0)),Z=p(()=>Tt.value.reduce((a,n)=>a+n.splitQty*n.price,0)),As=p(()=>{if(!v.value?.order)return!1;const a=ye(v.value.order);return Z.value>a}),B=p(()=>v.value?.order?ye(v.value.order):0),Ue=p(()=>Math.max(ie.value-B.value,0)),$=p(()=>Math.max(I.value-Z.value,0)),ue=p(()=>v.value?.payments||[]),St=p(()=>R.value?.items||[]),st=p(()=>R.value?.payments||[]),Qt=p(()=>{const a=R.value?.additional_charges;return Array.isArray(a)&&a.length?a.filter(i=>(i?.amount||0)!==0):(R.value?.adjustments||[]).map(i=>({name:i.name,amount:i.applied_amount})).filter(i=>(i?.amount||0)!==0)}),Pt=p(()=>St.value.reduce((a,n)=>a+Ht(n),0)),mt=p(()=>R.value?.order?.original_total_amount||R.value?.order?.total_amount||z.value?.total_amount||Pt.value),It=p(()=>st.value.length?st.value.reduce((a,n)=>a+(n.amount||0),0):z.value?.paid_amount!=null?z.value.paid_amount:mt.value),Et=p(()=>(st.value[0]?.payment_method||z.value?.payment_method)!=="cash"?0:Math.max(It.value-mt.value,0)),Os=p(()=>me.value||lt.value),jt=p(()=>Ke(new Date)),Us=p(()=>{if(!w.value)return jt.value;const a=Kt(new Date(w.value),3),n=new Date;return Ke(a>n?n:a)}),Ns=p(()=>nt.value.filter(a=>a.status!=="cancelled").reduce((a,n)=>a+(n.total_amount||0),0)),Hs=p(()=>ae.value.reduce((a,n)=>a+(n.total_amount||0),0)),m=p(()=>!!ve.value?.open_shift),T=p(()=>ve.value?.open_shift||null),Vt=p(()=>ve.value?.last_closed_shift||null),Wt=()=>{f("Shift kasir belum dibuka. Buka shift untuk melanjutkan.")},k=()=>m.value?!0:(Wt(),!1),at=p(()=>{const a=T.value?.sales_summary;return a||{cash:0,card:0,qris:0,transfer:0,total:0}}),Yt=p(()=>T.value?.void_summary||{count:0,total:0}),Jt=p(()=>T.value?.cancelled_summary||{count:0,total:0}),Bt=p(()=>{const a=at.value;return(a.cash||0)+(a.card||0)+(a.qris||0)+(a.transfer||0)}),xt=p(()=>Vt.value?.cash_movements||{cash_in:[],cash_out:[],total_in:0,total_out:0}),Ne=p(()=>T.value?.cash_movements||{cash_in:[],cash_out:[],total_in:0,total_out:0}),Dt=p(()=>Ne.value.total_in||0),At=p(()=>Ne.value.total_out||0),Xt=p(()=>(Bt.value||0)+Dt.value-At.value),Zt=p(()=>m.value?Ne.value:xt.value),He=p(()=>Oe.value==="last"?xt.value:Ne.value),es=p(()=>ct.value==="out"?He.value.cash_out||[]:He.value.cash_in||[]),ts=p(()=>ct.value==="out"?He.value.total_out||0:He.value.total_in||0),pt=p(()=>qe.user?.id||T.value?.opened_by||""),ss=p(()=>qe.user?.full_name||qe.user?.username||T.value?.opened_by_name||"Kasir"),Ot=p(()=>{const a=pt.value;return(Ge.value||[]).map(n=>{const i=n.id===a;return{...n,isCurrent:i,label:i?`${n.full_name} (Kasir saat ini)`:n.full_name}})}),ce=p(()=>Ot.value.filter(a=>!a.isCurrent)),Ut=p(()=>{const a=de.value;return Ot.value.find(i=>i.id===a)?.full_name||"Kasir"}),vt=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a||0),Rs=a=>new Intl.NumberFormat("id-ID",{minimumFractionDigits:0}).format(a||0),Nt=a=>Math.round(a?.price||0),Ht=a=>Nt(a)*(a?.qty||0),V=a=>{const n=String(a??"").replace(/[^\d]/g,"");return n?`Rp ${new Intl.NumberFormat("id-ID").format(Number(n))}`:""},Re=a=>{const n=String(a||"").replace(/[^\d]/g,"");return n?Number.parseInt(n,10):0},as=a=>{const n=String(a.target.value??"").replace(/[^\d]/g,"");if(!n){ge.value=null,it.value="";return}const i=Number.parseInt(n,10);ge.value=i,it.value=V(i)},Rt=()=>{he.value="in",Ze.value="",et.value="",Ae.value=0,tt.value=""},ls=a=>{he.value=a==="out"?"out":"in",Ze.value="",et.value="",Ae.value=0,tt.value="",dt.value=!0},$s=()=>{dt.value=!1,Rt()},Ks=(a,n)=>{ct.value=a==="out"?"out":"in",Oe.value=n==="last"?"last":"current",Mt.value=!0},Fs=()=>{Mt.value=!1},qs=a=>{const n=Re(a.target.value);Ae.value=n,tt.value=n?V(n):""},zs=async()=>{const a=Ze.value.trim(),n=et.value.trim(),i=Number(Ae.value||0);if(!a){c.warning("Nama harus diisi");return}if(he.value==="out"&&!n){c.warning("Keterangan harus diisi");return}if(i<=0){c.warning("Nominal harus diisi");return}try{ut.value=!0,await _.post("/cashier/shifts/movements",{type:he.value,name:a,note:n,amount:i}),c.success("Uang masuk/keluar tersimpan"),dt.value=!1,Rt(),await s()}catch(x){console.error("Failed to save cash movement:",x),c.error(x.response?.data?.message||"Gagal menyimpan uang masuk/keluar")}finally{ut.value=!1}},Gs=a=>{const n=Re(a.target.value);ie.value=n,je.value=n?V(n):""},os=()=>{const a=B.value;ie.value=a,je.value=a?V(a):""},ns=a=>{const n=Re(a.target.value);I.value=n,j.value=n?V(n):""},rs=()=>{const a=Z.value;I.value=a,j.value=a?V(a):""},ee=()=>{if(k()){if(!v.value?.order?.id){c.error("Order tidak ditemukan");return}ne.value="percentage",N.value=0,re.value="",Me.value=!0}},$t=()=>{Me.value=!1,ne.value="percentage",N.value=0,re.value=""},is=a=>{if(ne.value==="fixed"){const x=Re(a.target.value);N.value=x,re.value=x?V(x):"";return}const n=String(a.target.value??"").replace(/[^\d]/g,"");if(!n){N.value=0,re.value="";return}const i=Math.min(Number.parseInt(n,10),100);N.value=i,re.value=String(i)},ds=async()=>{if(k()){if(!v.value?.order?.id){c.error("Order tidak ditemukan");return}if(N.value<=0){c.warning("Nilai diskon harus lebih dari 0");return}if(ne.value==="percentage"&&N.value>100){c.warning("Diskon maksimum 100%");return}try{We.value=!0;const a=v.value.order.id;await _.post(`/orders/${a}/discount`,{charge_type:ne.value,value:N.value});const i=(await _.get(`/orders/${a}`)).data.data||{};v.value={...i,items:i.items||[]};const x=v.value?.order?ye(v.value.order):0;ie.value=x,je.value=x?V(x):"",c.success("Diskon berhasil diterapkan"),$t(),await Fe()}catch(a){console.error("Failed to apply discount:",a),c.error(a.response?.data?.message||"Gagal menerapkan diskon")}finally{We.value=!1}}},us=async()=>{if(k()){if(!v.value?.order?.id){c.error("Order tidak ditemukan");return}try{await ht.confirm(`Kompliment order meja ${v.value.order.table_number}?`,"Konfirmasi Kompliment",{confirmButtonText:"Ya, Kompliment",cancelButtonText:"Batal",type:"warning"}),wt.value=!0,await _.post(`/orders/${v.value.order.id}/compliment`),c.success("Order berhasil dikompliment"),oe.value=!1,v.value=null,await Fe()}catch(a){a!=="cancel"&&(console.error("Failed to apply compliment:",a),c.error(a.response?.data?.message||"Gagal melakukan kompliment"))}finally{wt.value=!1}}},$e=a=>String(a||"").replace(/[^\d]/g,"").slice(0,4),Ls=a=>a?new Date(a).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"-",Qs=a=>a?new Date(a).toLocaleString("id-ID",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):"-",Ke=a=>{const n=new Date(a),i=n.getFullYear(),x=String(n.getMonth()+1).padStart(2,"0"),y=String(n.getDate()).padStart(2,"0");return`${i}-${x}-${y}`},Kt=(a,n)=>{const i=new Date(a);return i.setMonth(i.getMonth()+n),i},cs=a=>X.value[a]||0,bt=(a,n)=>{const i=a.qty||0;let x=Number(n);Number.isFinite(x)||(x=0),x=Math.max(0,Math.min(i,Math.floor(x)));const y={...X.value};x>0?y[a.id]=x:delete y[a.id],X.value=y},ms=(a,n)=>{const i=cs(a.id);bt(a,i+n)},Es=(a,n)=>{bt(a,n.target.value)},xs=()=>{const a=Vt.value?.carry_over_cash||0;ge.value=a,it.value=a?V(a):"",kt.value=!0},Ws=()=>{Ce.value=!0},ps=async()=>{if(de.value="",G.value="",L.value="",Te.value=!1,await s(),!T.value){c.warning("Tidak ada shift kasir yang terbuka");return}await P(),fe.value=!0},vs=()=>{if(!de.value){c.warning("Pilih kasir tujuan");return}G.value="",L.value="",fe.value=!1,Te.value=!0},bs=()=>{Te.value=!1,fe.value=!0,G.value="",L.value=""},fs=a=>({cash:"bg-emerald-100 text-emerald-800",card:"bg-blue-100 text-blue-800",qris:"bg-purple-100 text-purple-800",transfer:"bg-amber-100 text-amber-800"})[a]||"bg-slate-100 text-slate-800",Ft=a=>({cash:"Tunai",card:"Kartu",qris:"QRIS",transfer:"Transfer"})[a]||a,gs=a=>a==="cancelled"?"BATAL":"PAID",hs=a=>a==="cancelled"?"bg-red-100 text-red-700":"bg-emerald-100 text-emerald-800",Ys=a=>({pending:"Menunggu",cooking:"Diproses",ready:"Siap",served:"Tersaji",cancelled:"Batal"})[a]||a||"-",ys=a=>({pending:"bg-amber-100 text-amber-700",cooking:"bg-blue-100 text-blue-700",ready:"bg-emerald-100 text-emerald-700",served:"bg-slate-100 text-slate-600",cancelled:"bg-red-100 text-red-700"})[a]||"bg-slate-100 text-slate-600",_s=a=>({unpaid:"Belum Lunas",partial:"Sebagian",paid:"Lunas",cancelled:"Batal"})[a]||a||"-",Js=a=>({unpaid:"bg-amber-100 text-amber-700",partial:"bg-blue-100 text-blue-700",paid:"bg-emerald-100 text-emerald-700",cancelled:"bg-red-100 text-red-700"})[a]||"bg-slate-100 text-slate-600",ws=(a,n)=>`px-4 py-3 rounded-xl border-2 text-sm font-semibold transition-all ${n?"border-emerald-500 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-600 hover:border-slate-300"}`,ks=a=>a?typeof a=="string"?a:typeof a=="object"&&typeof a.String=="string"?a.String:"":"",qt=a=>a?a.original_total_amount!=null?a.original_total_amount:a.total_amount!=null?a.total_amount:0:0,ye=a=>{if(!a)return 0;if(a.remaining_amount!=null)return Math.max(a.remaining_amount,0);const n=qt(a),i=a.paid_amount||0,x=n-i;return x>0?x:0},ft=(a,n)=>{const i=n.page_size>0?n.page_size:1,x=a.length,y=x===0?0:Math.ceil(x/i),Cs=Math.min(n.current_page,y||1),Ts=(Cs-1)*i;return{items:y>0?a.slice(Ts,Ts+i):[],pagination:{...n,current_page:Cs,total_items:x,total_pages:y}}},gt=async()=>{try{const a=await _.get("/tables",{params:{page_size:1e3}});yt.value=a.data.data||[]}catch(a){console.error("Failed to fetch occupied tables:",a)}},Xs=async()=>{try{const n=Ke(new Date),i=await _.get("/orders/analytics",{params:{start_date:n,end_date:n}});if(i.data.success){const x=i.data.data||{},y=x.analytics||x,Cs=y.total_revenue||0,Ts=y.void_total||0,da=y.cancelled_total||0;ze.value=Cs-Ts-da,le.value=y.total_orders||0}}catch(a){console.error("Failed to fetch today stats:",a)}},s=async()=>{U.value=!0;try{const a=await _.get("/cashier/shifts/state");a.data.success&&(ve.value=a.data.data||{open_shift:null,last_closed_shift:null})}catch(a){console.error("Failed to fetch shift state:",a),c.error("Gagal memuat data shift kasir")}finally{U.value=!1}},P=async()=>{Le.value=!0;try{const a=await _.get("/cashier/users");a.data.success&&(Ge.value=a.data.data||[])}catch(a){console.error("Failed to fetch cashier users:",a),c.error("Gagal memuat daftar kasir")}finally{Le.value=!1}},Zs=async()=>{try{U.value=!0,await _.post("/cashier/shifts/open",{opening_cash:ge.value==null?null:Number(ge.value)}),c.success("Shift kasir dibuka"),kt.value=!1,await s()}catch(a){console.error("Failed to open shift:",a),c.error(a.response?.data?.message||"Gagal membuka shift kasir")}finally{U.value=!1}},ea=async()=>{try{U.value=!0;const a=at.value;await _.post("/cashier/shifts/close",{closing_cash:parseFloat(a.cash||0),closing_card:parseFloat(a.card||0),closing_qris:parseFloat(a.qris||0),closing_transfer:parseFloat(a.transfer||0)}),c.success("Shift kasir ditutup"),Ce.value=!1,await s()}catch(a){console.error("Failed to close shift:",a),c.error(a.response?.data?.message||"Gagal menutup shift kasir")}finally{U.value=!1}},l=async()=>{if(!T.value){c.warning("Tidak ada shift kasir yang terbuka");return}if(!de.value){c.warning("Pilih kasir tujuan");return}if(de.value===pt.value){c.warning("Kasir tujuan harus berbeda");return}if(G.value.length!==4||L.value.length!==4){c.warning("PIN harus 4 digit");return}try{U.value=!0;const a=at.value,i=(await _.post("/cashier/shifts/handover",{next_cashier_id:de.value,current_cashier_pin:G.value,next_cashier_pin:L.value,closing_cash:parseFloat(a.cash||0),closing_card:parseFloat(a.card||0),closing_qris:parseFloat(a.qris||0),closing_transfer:parseFloat(a.transfer||0)})).data?.data?.auth;i?.token&&i?.user&&qe.setSession(i.token,i.user),c.success("Serah terima kasir berhasil"),fe.value=!1,Te.value=!1,G.value="",L.value="",await s()}catch(a){console.error("Failed to handover shift:",a);const n=a.response?.data?.message||"Gagal melakukan serah terima kasir";if(a.response?.status===401){n.toLowerCase().includes("kasir saat ini")&&(G.value=""),n.toLowerCase().includes("kasir tujuan")&&(L.value=""),c.warning(n);return}c.error(n)}finally{U.value=!1}},M=async()=>{me.value=!0;try{const a=await _.get("/transactions",{params:{page:A.value.current_page,page_size:A.value.page_size,start_date:w.value,end_date:K.value}}),n=a.data.data||[];if(a.data.pagination)nt.value=n,A.value={...A.value,...a.data.pagination};else{const i=ft(n,A.value);nt.value=i.items,A.value=i.pagination}}catch(a){console.error("Failed to fetch transactions:",a),c.error("Gagal memuat riwayat transaksi")}finally{me.value=!1}},ta=async()=>{lt.value=!0;try{const a=await _.get("/orders/voided",{params:{page:O.value.current_page,page_size:O.value.page_size,start_date:w.value,end_date:K.value}}),n=a.data.data||[];if(a.data.pagination)ae.value=n,O.value={...O.value,...a.data.pagination};else{const i=ft(n,O.value);ae.value=i.items,O.value=i.pagination}}catch(a){console.error("Failed to fetch voided orders:",a),c.error("Gagal memuat histori void")}finally{lt.value=!1}},Ms=async()=>{if(!w.value||!K.value){c.warning("Pilih tanggal mulai dan akhir");return}if(K.value<w.value){c.warning("Tanggal akhir harus sama atau setelah tanggal mulai");return}const a=Kt(new Date(w.value),3);if(new Date(K.value)>a){c.warning("Rentang tanggal maksimal 3 bulan");return}A.value.current_page=1,O.value.current_page=1,await Promise.all([M(),ta()])},pa=async()=>{const a=Ke(new Date);w.value=a,K.value=a,await Ms()},va=async a=>{A.value.current_page=a,await M()},ba=async a=>{O.value.current_page=a,await ta()},fa=async a=>{if(k()){_e.value=!0,oe.value=!0,Se.value="cash";try{const n=a.order_id||a.active_order?.order_id;if(!n)throw new Error("Order tidak ditemukan");const x=(await _.get(`/orders/${n}`)).data.data||{};v.value={...x,items:x.items||[]};const y=v.value?.order?ye(v.value.order):0;ie.value=y,je.value=y?V(y):""}catch(n){console.error("Failed to fetch order details:",n),c.error("Gagal memuat detail order"),oe.value=!1}finally{_e.value=!1}}},ga=a=>({pending:"Pending",cooking:"Diproses",ready:"Siap",served:"Disajikan"})[a]||a,ha=a=>({pending:"bg-amber-100 text-amber-700",cooking:"bg-blue-100 text-blue-700",ready:"bg-emerald-100 text-emerald-700",served:"bg-slate-100 text-slate-600"})[a]||"bg-slate-100 text-slate-600",na=a=>a.item_status==="pending",ya=a=>!!J.value[a],sa=async a=>{const i=(await _.get(`/orders/${a}`)).data.data||{};be.value=i.order||null,ke.value=i.items||[]},_a=async a=>{if(k()){we.value=!0,_t.value=!0,be.value=null,ke.value=[];try{const n=a.order_id||a.active_order?.order_id;if(!n)throw new Error("Order tidak ditemukan");await sa(n)}catch(n){console.error("Failed to fetch order items:",n),c.error("Gagal memuat item order"),_t.value=!1}finally{we.value=!1}}},wa=async(a,n)=>{if(!k()||!be.value?.id)return;if(!na(a)){c.warning("Item sudah diproses kitchen");return}const i=a.qty+n;if(!(i<0||i===a.qty)){if(i===0)try{await ht.confirm(`Hapus ${a.product_name} dari pesanan?`,"Konfirmasi Hapus Item",{confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal",type:"warning"})}catch{return}J.value={...J.value,[a.id]:!0};try{await _.put(`/orders/items/${a.id}/qty`,{qty:i}),await sa(be.value.id),await gt()}catch(x){console.error("Failed to update item qty:",x),c.error(x.response?.data?.message||"Gagal mengubah jumlah item")}finally{J.value={...J.value,[a.id]:!1}}}},ka=async(a,n)=>{if(k()){if(!Se.value){c.warning("Pilih metode pembayaran terlebih dahulu");return}try{if(!n||n<=0){c.warning("Tagihan sudah lunas");return}const i=ie.value>0?ie.value:n;if(i<n){c.warning("Jumlah bayar kurang dari total tagihan");return}await ht.confirm(`Proses pembayaran ${vt(n)} dengan ${Ft(Se.value)}?`,"Konfirmasi Pembayaran",{confirmButtonText:"Ya, Proses",cancelButtonText:"Batal",type:"warning"}),xe.value=!0,await _.post(`/orders/${a}/payment`,{payment_method:Se.value,paid_amount:i}),c.success("Pembayaran berhasil diproses"),oe.value=!1,v.value=null,await Fe()}catch(i){i!=="cancel"&&(console.error("Payment failed:",i),c.error(i.response?.data?.message||"Gagal memproses pembayaran"))}finally{xe.value=!1}}},Ma=async()=>{if(!k())return;if(!v.value?.order?.id){c.error("Order tidak ditemukan");return}const a=v.value?.order?.table_number||"-";try{await ht.confirm(`Cetak bill untuk meja ${a}?`,"Konfirmasi Cetak Bill",{confirmButtonText:"Ya, Cetak",cancelButtonText:"Batal",type:"warning"}),se.value=!0,await _.post(`/print/bill/${v.value.order.id}`),c.success("Bill berhasil dikirim ke printer")}catch(n){n!=="cancel"&&(console.error("Print bill failed:",n),c.error(n.response?.data?.message||"Gagal cetak bill"))}finally{se.value=!1}},Ca=async()=>{if(!k())return;if(!Pe.value){c.warning("Pilih metode pembayaran terlebih dahulu");return}if(!Z.value||Z.value<=0){c.warning("Pilih item yang akan dibayar");return}const a=ye(v.value.order);if(Z.value>a){c.warning("Jumlah pembayaran melebihi sisa tagihan");return}const n=Z.value,i=I.value>0?I.value:n;if(i<n){c.warning("Jumlah bayar kurang dari total split");return}try{xe.value=!0;const x=v.value?.order?.id;if(!x){c.error("Order tidak ditemukan"),xe.value=!1;return}await _.post(`/orders/${x}/split-payment`,{items:Tt.value.map(y=>({item_id:y.id,qty:y.splitQty})),amount:n,payment_method:Pe.value,note:Ie.value,paid_amount:i}),c.success("Pembayaran sebagian berhasil diproses"),Y.value=!1,oe.value=!1,Ie.value="",X.value={},v.value=null,await Fe()}catch(x){console.error("Split payment failed:",x),c.error(x.response?.data?.message||"Gagal memproses pembayaran")}finally{xe.value=!1}},Ta=()=>{if(k()){if(!v.value?.order?.id){c.error("Order tidak ditemukan");return}C.value="",rt.value="",Qe.value=!0}},Sa=()=>{k()&&(Y.value=!0)},ra=()=>{Qe.value=!1,C.value="",rt.value=""},Pa=a=>{const n=a?.target?.value??C.value;C.value=$e(n)},Ia=async()=>{if(k()){if(!v.value?.order?.id){c.error("Order tidak ditemukan");return}if(C.value.length!==4){c.warning("PIN harus 4 digit");return}try{await ht.confirm(`Void order ${v.value.order.table_number}?`,"Konfirmasi Void Order",{confirmButtonText:"Ya, Void",cancelButtonText:"Batal",type:"warning"})}catch{return}try{Ve.value=!0,await _.post(`/orders/${v.value.order.id}/void`,{manager_pin:C.value,reason:rt.value}),c.success("Order berhasil di-void"),ra(),oe.value=!1,v.value=null,await Fe()}catch(a){console.error("Void order failed:",a),c.error(a.response?.data?.message||"Gagal void order")}finally{Ve.value=!1}}},ja=a=>{if(k()){if(!a?.id){c.error("Transaksi tidak ditemukan");return}H.value=a,q.value="",Be.value="",Ee.value=!0}},ia=()=>{Ee.value=!1,H.value=null,q.value="",Be.value=""},Va=a=>{const n=a?.target?.value??q.value;q.value=$e(n)},Ba=async a=>{if(!a?.id){c.error("Transaksi tidak ditemukan");return}z.value=a,R.value=null,Je.value=!0,F.value=!0;const n=a.order_id||a.id;try{const[i,x]=await Promise.all([_.get(`/orders/${n}`),_.get("/config/outlet").catch(()=>null)]),y=i.data.data||{};R.value={...y,items:y.items||[],payments:y.payments||[]},x?.data?.data&&(De.value={outlet_name:x.data.data.outlet_name||De.value.outlet_name,outlet_address:x.data.data.outlet_address||"",outlet_phone:x.data.data.outlet_phone||"",receipt_footer:x.data.data.receipt_footer??De.value.receipt_footer,social_media:x.data.data.social_media||""})}catch(i){console.error("Failed to fetch receipt detail:",i),c.error("Gagal memuat detail struk"),F.value=!1}finally{Je.value=!1}},Da=()=>{F.value=!1,z.value=null,R.value=null},Aa=async()=>{if(!z.value)return;const a=z.value.order_id||z.value.id;try{Xe.value=!0,await _.post(`/print/reprint/${a}`),c.success("Struk dimasukkan ke antrean cetak")}catch(n){console.error("Failed to reprint receipt:",n),c.error(n.response?.data?.message||"Gagal mencetak ulang struk")}finally{Xe.value=!1}},Oa=a=>{const n=a?.target?.value??G.value;G.value=$e(n)},Ua=a=>{const n=a?.target?.value??L.value;L.value=$e(n)},Na=async()=>{if(k()){if(!H.value?.id){c.error("Transaksi tidak ditemukan");return}if(q.value.length!==4){c.warning("PIN harus 4 digit");return}try{const a=H.value.order_id||H.value.id,n=H.value.total_amount||0;await ht.confirm(`Batalkan transaksi nomor ${a} dengan nominal ${vt(n)}?`,"Konfirmasi Pembatalan",{confirmButtonText:"Ya, Batalkan",cancelButtonText:"Batal",type:"warning"})}catch{return}try{Ye.value=!0,await _.post(`/transactions/${H.value.id}/cancel`,{manager_pin:q.value,reason:Be.value}),c.success("Transaksi berhasil dibatalkan"),ia(),await M()}catch(a){console.error("Cancel transaction failed:",a),c.error(a.response?.data?.message||"Gagal membatalkan transaksi")}finally{Ye.value=!1}}},Fe=async()=>{zt.value=!0;try{await Promise.all([gt(),Xs(),s(),ot.value==="history"?Ms():Promise.resolve()])}finally{zt.value=!1}};let aa=null;const Ha=async a=>{if(a?.type&&(a.type==="order_created"||a.type==="order_items_updated"||a.type==="item_status_updated"||a.type==="payment_completed"||a.type==="order_voided"||a.type==="table_status_updated")&&(await Fe(),oe.value&&v.value?.order?.id)){const i=(await _.get(`/orders/${v.value.order.id}`)).data.data||{};v.value={...i,items:i.items||[]}}};return Ra(async()=>{const a=Ke(new Date);w.value=a,K.value=a,await Fe(),aa=Fa(Ha)}),$a(()=>{aa&&aa()}),Ss(ot,a=>{a==="history"&&Ms()}),Ss(Y,a=>{a&&(X.value={},Ie.value="",I.value=0,j.value="")}),Ss(v,()=>{Y.value&&(X.value={})}),Ss(Z,a=>{Y.value&&I.value<a&&(I.value=a,j.value=a?V(a):"")}),{loading:zt,loadingHistory:me,loadingVoidedHistory:lt,loadingOrderDetail:_e,processingPayment:xe,printingBill:se,activeTab:ot,allTables:yt,transactions:nt,voidedOrders:ae,currentOrder:v,todayRevenue:ze,todayTransactions:le,tableSearchQuery:pe,historyStartDate:w,historyEndDate:K,transactionPagination:A,voidPagination:O,shiftState:ve,shiftLoading:U,cashierUsers:Ge,cashierUsersLoading:Le,showOrderModal:oe,showSplitPaymentModal:Y,showVoidModal:Qe,showCancelTransactionModal:Ee,showReceiptModal:F,showItemsModal:_t,loadingItemsModal:we,itemsModalOrder:be,itemsModalItems:ke,itemUpdateLoading:J,showDiscountModal:Me,discountType:ne,discountValue:N,discountValueDisplay:re,discountSubmitting:We,complimentSubmitting:wt,showOpenShiftModal:kt,showCloseShiftModal:Ce,showHandoverShiftModal:fe,showHandoverPinModal:Te,selectedPaymentMethod:Se,selectedSplitPaymentMethod:Pe,splitNote:Ie,splitItemSelections:X,fullPaidAmount:ie,fullPaidAmountDisplay:je,splitPaidAmount:I,splitPaidAmountDisplay:j,voidPin:C,voidReason:rt,voidProcessing:Ve,selectedTransaction:H,cancelPin:q,cancelReason:Be,cancelProcessing:Ye,receiptLoading:Je,receiptPrinting:Xe,receiptTransaction:z,receiptOrder:R,outletConfig:De,openingCash:ge,openingCashDisplay:it,selectedHandoverCashier:de,handoverCurrentPin:G,handoverNextPin:L,showCashMovementModal:dt,cashMovementType:he,cashMovementName:Ze,cashMovementNote:et,cashMovementAmount:Ae,cashMovementAmountDisplay:tt,cashMovementSubmitting:ut,showCashMovementHistoryModal:Mt,cashMovementHistoryType:ct,cashMovementHistorySource:Oe,paymentMethods:Is,transactionColumns:Gt,voidColumns:js,avgTransaction:Vs,pendingTables:Ct,filteredPendingTables:Bs,orderItems:Lt,manualAdjustments:Ds,splitSelectedItems:Tt,splitItemsTotal:Z,splitTotalExceedsRemaining:As,remainingAmount:B,fullChangeAmount:Ue,splitChangeAmount:$,splitPayments:ue,receiptItems:St,receiptPayments:st,receiptAdditionalCharges:Qt,receiptSubtotal:Pt,receiptTotal:mt,receiptPaidAmount:It,receiptChangeAmount:Et,historyLoading:Os,historyStartMax:jt,historyEndMax:Us,totalPaidAmount:Ns,totalVoidAmount:Hs,isShiftOpen:m,currentShift:T,lastClosedShift:Vt,shiftSalesSummary:at,shiftVoidSummary:Yt,shiftCancelledSummary:Jt,shiftNetSalesTotal:Bt,lastClosedCashMovements:xt,currentCashMovements:Ne,closeShiftCashInTotal:Dt,closeShiftCashOutTotal:At,closeShiftGrandTotal:Xt,displayCashMovements:Zt,cashMovementHistoryData:He,cashMovementHistoryItems:es,cashMovementHistoryTotal:ts,currentUserId:pt,currentUserName:ss,cashierOptions:Ot,handoverCandidates:ce,selectedHandoverCashierName:Ut,showShiftClosedAlert:Wt,requireShiftOpen:k,formatCurrency:vt,formatReceiptNumber:Rs,formatRupiahInput:V,parseRupiahInput:Re,getReceiptItemPrice:Nt,getReceiptItemTotal:Ht,handleOpeningCashInput:as,resetCashMovementForm:Rt,openCashMovementModal:ls,closeCashMovementModal:$s,openCashMovementHistoryModal:Ks,closeCashMovementHistoryModal:Fs,handleCashMovementAmountInput:qs,submitCashMovement:zs,handleFullPaidAmountInput:Gs,setFullExactAmount:os,handleSplitPaidAmountInput:ns,setSplitExactAmount:rs,openDiscountModal:ee,closeDiscountModal:$t,handleDiscountValueInput:is,submitDiscount:ds,submitCompliment:us,formatPinInput:$e,formatTime:Ls,formatDateTime:Qs,formatDateInput:Ke,addMonths:Kt,getSplitItemQty:cs,setSplitItemQty:bt,adjustSplitItemQty:ms,handleSplitItemQtyInput:Es,openOpenShiftModal:xs,openCloseShiftModal:Ws,openHandoverShiftModal:ps,openHandoverPinModal:vs,closeHandoverPinModal:bs,getPaymentMethodClass:fs,getPaymentMethodText:Ft,getTransactionStatusText:gs,getTransactionStatusClass:hs,getOrderStatusText:Ys,getOrderStatusClass:ys,getPaymentStatusText:_s,getPaymentStatusClass:Js,getPaymentMethodButtonClass:ws,getPaymentNote:ks,getOrderTotal:qt,getRemainingAmount:ye,buildPaginationFallback:ft,fetchOccupiedTables:gt,fetchTodayStats:Xs,fetchShiftState:s,fetchCashierUsers:P,submitOpenShift:Zs,submitCloseShift:ea,submitHandoverShift:l,fetchTransactions:M,fetchVoidedOrders:ta,applyHistoryFilter:Ms,resetHistoryFilter:pa,goToTransactionPage:va,goToVoidPage:ba,viewOrder:fa,getItemStatusText:ga,itemStatusClass:ha,canEditItem:na,isItemUpdating:ya,fetchItemsModalData:sa,openItemsModal:_a,adjustItemQty:wa,processPayment:ka,printBill:Ma,processSplitPayment:Ca,openVoidModal:Ta,openSplitPaymentModal:Sa,closeVoidModal:ra,handleVoidPinInput:Pa,submitVoidOrder:Ia,openCancelTransactionModal:ja,closeCancelTransactionModal:ia,handleCancelPinInput:Va,openReceiptDetail:Ba,closeReceiptModal:Da,handleReprintReceipt:Aa,handleHandoverCurrentPinInput:Oa,handleHandoverNextPinInput:Ua,submitCancelTransaction:Na,refreshData:Fe}}const Ga={class:"min-h-screen bg-slate-50 pb-24 lg:pb-6"},La={class:"mx-auto max-w-7xl px-3 sm:px-4 lg:px-8 py-4 sm:py-6 space-y-4 sm:space-y-6"},Qa={class:"overflow-hidden rounded-2xl bg-gradient-to-r from-emerald-600 to-emerald-500 p-4 sm:p-6 shadow-xl"},Ea={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Wa=["disabled"],Ya={class:"hidden sm:inline"},Ja={class:"overflow-hidden rounded-2xl bg-white p-4 shadow-lg"},Xa={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Za={key:0,class:"text-xs font-semibold text-slate-500"},el={key:1,class:"flex flex-col sm:flex-row gap-2"},tl={key:0,class:"mt-4 grid gap-4 lg:grid-cols-2"},sl={class:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm"},al={class:"flex items-center justify-between"},ll={class:"text-sm font-semibold text-slate-800"},ol={key:0,class:"mt-3 grid gap-3 sm:grid-cols-2"},nl={class:"rounded-xl border border-emerald-100 bg-emerald-50 px-3 py-2"},rl={class:"text-sm font-semibold text-emerald-900"},il={class:"rounded-xl border border-emerald-100 bg-emerald-50 px-3 py-2"},dl={class:"text-sm font-semibold text-emerald-900"},ul={class:"rounded-xl border border-slate-200 bg-white px-3 py-2 sm:col-span-2"},cl={class:"text-base font-bold text-slate-900"},ml={key:1,class:"mt-3 grid gap-3"},xl={key:0,class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},pl={class:"text-sm font-semibold text-slate-700"},vl={key:1,class:"rounded-xl border border-slate-200 bg-white px-3 py-2"},bl={class:"text-base font-bold text-slate-900"},fl={key:2,class:"grid grid-cols-2 gap-2 text-xs text-slate-600"},gl={class:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm"},hl={class:"flex items-center justify-between"},yl={class:"text-sm font-semibold text-slate-800"},_l={key:0,class:"flex gap-2"},wl={class:"mt-3 grid gap-2 sm:grid-cols-2"},kl={class:"rounded-xl border border-emerald-100 bg-emerald-50 px-3 py-2"},Ml={class:"flex items-center justify-between"},Cl={class:"text-sm font-semibold text-emerald-800"},Tl={class:"rounded-xl border border-amber-100 bg-amber-50 px-3 py-2"},Sl={class:"flex items-center justify-between"},Pl={class:"text-sm font-semibold text-amber-800"},Il={key:0,class:"mt-3 text-xs text-slate-500"},jl={class:"grid gap-3 sm:gap-4 grid-cols-2 lg:grid-cols-4"},Vl={class:"overflow-hidden rounded-2xl bg-white p-3 sm:p-4 shadow-lg"},Bl={class:"flex flex-col sm:flex-row items-center gap-2 sm:gap-3"},Dl={class:"text-center sm:text-left"},Al={class:"text-lg sm:text-xl font-bold text-slate-900"},Ol={class:"overflow-hidden rounded-2xl bg-white p-3 sm:p-4 shadow-lg"},Ul={class:"flex flex-col sm:flex-row items-center gap-2 sm:gap-3"},Nl={class:"text-center sm:text-left"},Hl={class:"text-lg sm:text-xl font-bold text-slate-900"},Rl={class:"overflow-hidden rounded-2xl bg-white p-3 sm:p-4 shadow-lg"},$l={class:"flex flex-col sm:flex-row items-center gap-2 sm:gap-3"},Kl={class:"text-center sm:text-left"},Fl={class:"text-lg sm:text-xl font-bold text-slate-900"},ql={class:"overflow-hidden rounded-2xl bg-white p-3 sm:p-4 shadow-lg"},zl={class:"flex flex-col sm:flex-row items-center gap-2 sm:gap-3"},Gl={class:"text-center sm:text-left"},Ll={class:"text-lg sm:text-xl font-bold text-slate-900"},Ql={class:"overflow-hidden rounded-2xl bg-white p-3 sm:p-4 shadow-lg"},El={class:"flex gap-2"},Wl={key:0},Yl={key:0,class:"flex justify-center items-center py-12"},Jl={key:1},Xl={key:0,class:"overflow-hidden rounded-2xl bg-white p-3 sm:p-4 shadow-lg mb-4"},Zl={class:"relative"},eo={key:1,class:"overflow-hidden rounded-2xl bg-white p-12 shadow-lg"},to={key:2,class:"overflow-hidden rounded-2xl bg-white p-12 shadow-lg"},so={key:3,class:"overflow-hidden rounded-2xl bg-white shadow-lg"},ao={class:"overflow-x-auto"},lo={class:"w-full"},oo={class:"divide-y divide-slate-100"},no=["onClick"],ro={class:"px-4 py-3 text-sm font-semibold text-slate-900"},io={class:"flex items-center gap-2"},uo={key:0,class:"inline-flex items-center rounded-full bg-amber-100 px-2 py-0.5 text-[10px] font-semibold text-amber-700"},co={class:"px-4 py-3 text-sm text-slate-700"},mo={class:"px-4 py-3 text-sm text-slate-700"},xo={class:"px-4 py-3 text-sm text-slate-700"},po={class:"px-4 py-3 text-sm font-mono text-slate-600"},vo={class:"px-4 py-3 text-right text-sm font-bold text-emerald-600"},bo={class:"px-4 py-3 text-sm text-slate-600"},fo={class:"px-4 py-3 text-center"},go=["onClick"],ho={class:"px-4 py-3 text-center"},yo={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-700"},_o={key:1},wo={key:0,class:"flex justify-center items-center py-12"},ko={key:1,class:"overflow-hidden rounded-2xl bg-white p-12 shadow-lg"},Mo={key:2,class:"flex flex-col gap-6"},Co={class:"overflow-hidden rounded-2xl bg-white p-4 shadow-lg"},To={class:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between"},So={class:"flex flex-col gap-3 sm:flex-row sm:items-end"},Po=["max"],Io=["min","max"],jo={class:"flex gap-2"},Vo={class:"overflow-hidden rounded-2xl bg-white shadow-lg"},Bo={class:"flex items-center justify-between border-b border-slate-100 px-4 py-3"},Do={class:"flex items-center gap-3 text-xs text-slate-500"},Ao={class:"text-sm text-slate-900"},Oo={class:"text-sm font-mono text-slate-600"},Uo={class:"text-sm font-bold text-slate-900"},No={class:"flex items-center justify-center gap-2"},Ho=["onClick"],Ro=["disabled","onClick"],$o={key:0,class:"mt-4"},Ko={class:"overflow-hidden rounded-2xl bg-white shadow-lg"},Fo={class:"flex items-center justify-between border-b border-slate-100 px-4 py-3"},qo={class:"flex items-center gap-3 text-xs text-slate-500"},zo={class:"text-sm text-slate-900"},Go={class:"text-sm font-mono text-slate-600"},Lo={class:"text-sm text-slate-700"},Qo={class:"text-sm font-bold text-slate-900"},Eo={class:"text-sm text-slate-700"},Wo={class:"text-sm text-slate-600"},Yo={key:1,class:"mt-4"},Jo={key:0,class:"flex justify-center items-center py-12"},Xo={key:1,class:"flex flex-col gap-4"},Zo={class:"bg-slate-50 rounded-xl p-4"},en={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm"},tn={class:"font-bold text-slate-900"},sn={class:"font-bold text-slate-900"},an={class:"font-mono text-xs text-slate-600"},ln={class:"text-slate-900"},on={class:"font-bold text-slate-900"},nn={class:"font-bold text-slate-900"},rn={class:"font-bold text-slate-900"},dn={class:"font-bold text-slate-900"},un={class:"font-semibold text-rose-600"},cn={class:"text-slate-900"},mn={key:0},xn={class:"font-semibold text-amber-700"},pn={key:0,class:"rounded-xl border border-slate-200 bg-white overflow-hidden"},vn={class:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between px-3 py-2 bg-slate-50 border-b border-slate-200"},bn={class:"text-sm font-semibold text-slate-700"},fn={class:"divide-y divide-slate-100"},gn={class:"text-sm font-semibold text-slate-900"},hn={class:"text-xs text-slate-500"},yn={class:"text-left sm:text-right"},_n={class:"text-sm font-bold text-slate-900"},wn={key:0,class:"text-xs text-slate-500"},kn={class:"bg-white pt-2"},Mn={key:0,class:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 mb-4"},Cn={class:"text-sm font-bold text-red-600"},Tn={key:1,class:"rounded-xl border border-slate-200 bg-white overflow-hidden mb-4"},Sn={class:"divide-y divide-slate-100"},Pn={class:"text-sm text-slate-700"},In={class:"border-t border-slate-200 pt-4"},jn={class:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between mb-4"},Vn={class:"text-2xl font-bold text-emerald-600"},Bn={class:"mb-4"},Dn={class:"grid grid-cols-2 sm:grid-cols-4 gap-2"},An=["onClick"],On={class:"mb-4"},Un={class:"flex flex-col sm:flex-row gap-2"},Nn=["value"],Hn={class:"flex items-center justify-between text-sm text-slate-600 mt-2"},Rn={class:"font-semibold text-emerald-600"},$n={class:"grid grid-cols-3 gap-2"},Kn=["disabled"],Fn=["disabled"],qn=["disabled"],zn=["disabled"],Gn={class:"flex flex-col gap-4"},Ln={class:"grid grid-cols-2 gap-2"},Qn={class:"relative"},En=["value","placeholder"],Wn={key:0,class:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 text-sm font-semibold"},Yn={key:0,class:"text-xs text-slate-500 mt-2"},Jn={class:"flex flex-col sm:flex-row gap-2"},Xn=["disabled"],Zn={key:0,class:"flex justify-center items-center py-12"},er={key:1,class:"max-h-[70vh] overflow-y-auto"},tr={class:"bg-slate-50 rounded-xl p-4 mb-4"},sr={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm"},ar={class:"font-bold text-slate-900"},lr={class:"font-bold text-slate-900"},or={class:"font-bold text-slate-900"},nr={class:"font-bold text-emerald-600"},rr={class:"rounded-xl border border-slate-200 bg-white overflow-hidden"},ir={class:"flex items-center justify-between px-3 py-2 bg-slate-50 border-b border-slate-200"},dr={class:"text-sm font-semibold text-slate-700"},ur={class:"divide-y divide-slate-100"},cr={class:"flex-1 min-w-0"},mr={class:"flex items-center gap-2"},xr={class:"font-medium text-slate-900 truncate"},pr={class:"text-xs text-slate-500"},vr={class:"flex items-center gap-3"},br={class:"text-right font-bold text-slate-900 w-24"},fr={class:"flex items-center gap-1"},gr=["disabled","onClick"],hr={class:"min-w-[28px] text-center text-sm font-semibold text-slate-700"},yr=["disabled","onClick"],_r={class:"flex flex-col gap-4"},wr={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},kr={class:"flex items-center justify-between"},Mr={class:"text-sm font-semibold text-slate-700"},Cr=["value"],Tr={class:"flex flex-col sm:flex-row gap-2"},Sr=["disabled"],Pr={class:"flex flex-col gap-4"},Ir={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},jr={class:"flex items-center justify-between"},Vr={class:"text-sm font-semibold text-slate-700"},Br={class:"grid gap-3 sm:grid-cols-2"},Dr={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},Ar={class:"text-sm font-semibold text-slate-700"},Or={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},Ur={class:"text-sm font-semibold text-slate-700"},Nr={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},Hr={class:"text-sm font-semibold text-slate-700"},Rr={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},$r={class:"text-sm font-semibold text-slate-700"},Kr={class:"rounded-xl border border-rose-100 bg-rose-50 px-3 py-2"},Fr={class:"text-sm font-semibold text-rose-700"},qr={class:"rounded-xl border border-rose-100 bg-rose-50 px-3 py-2"},zr={class:"text-sm font-semibold text-rose-700"},Gr={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},Lr={class:"text-sm font-semibold text-slate-700"},Qr={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},Er={class:"text-sm font-semibold text-slate-700"},Wr={class:"rounded-xl border border-emerald-200 bg-emerald-50 px-3 py-2"},Yr={class:"text-base font-bold text-emerald-900"},Jr={class:"flex flex-col sm:flex-row gap-2"},Xr=["disabled"],Zr={class:"flex flex-col gap-4"},ei={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},ti={class:"flex items-center justify-between"},si={class:"text-sm font-semibold text-slate-700"},ai={class:"flex items-center justify-between mt-2"},li={class:"text-sm font-semibold text-slate-700"},oi={key:0,class:"text-xs text-slate-500"},ni={key:2,class:"text-xs text-slate-500 mt-2"},ri={class:"grid gap-3 sm:grid-cols-2"},ii={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},di={class:"text-sm font-semibold text-slate-700"},ui={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},ci={class:"text-sm font-semibold text-slate-700"},mi={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},xi={class:"text-sm font-semibold text-slate-700"},pi={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},vi={class:"text-sm font-semibold text-slate-700"},bi={class:"rounded-xl border border-rose-100 bg-rose-50 px-3 py-2"},fi={class:"text-sm font-semibold text-rose-700"},gi={class:"rounded-xl border border-rose-100 bg-rose-50 px-3 py-2"},hi={class:"text-sm font-semibold text-rose-700"},yi={class:"grid gap-3 sm:grid-cols-2"},_i={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},wi={class:"text-sm font-semibold text-slate-700"},ki={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},Mi={class:"text-sm font-semibold text-slate-700"},Ci={class:"rounded-xl border border-emerald-200 bg-emerald-50 px-3 py-2 mt-3"},Ti={class:"text-base font-bold text-emerald-900"},Si={class:"flex flex-col sm:flex-row gap-2"},Pi=["disabled"],Ii={class:"flex flex-col gap-4"},ji={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},Vi={class:"flex items-center justify-between"},Bi={class:"text-sm font-semibold text-slate-700"},Di={class:"flex items-center justify-between mt-2"},Ai={class:"text-sm font-semibold text-slate-700"},Oi={class:"flex flex-col sm:flex-row gap-2"},Ui=["disabled"],Ni={class:"flex flex-col gap-4"},Hi={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},Ri={class:"flex items-center justify-between"},$i={class:"text-sm font-semibold text-slate-700"},Ki={class:"block text-sm font-semibold text-slate-600 mb-2"},Fi={key:0},qi=["value"],zi={class:"flex flex-col sm:flex-row gap-2"},Gi=["disabled"],Li={class:"flex flex-col gap-4"},Qi={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},Ei={class:"flex items-center justify-between"},Wi={class:"text-sm text-slate-500"},Yi={class:"text-sm font-semibold text-slate-700"},Ji={class:"mt-2 text-base font-semibold text-slate-900"},Xi={class:"rounded-xl border border-slate-200 bg-white max-h-60 overflow-y-auto"},Zi={key:0,class:"p-4 text-sm text-slate-500 text-center"},ed={key:1,class:"divide-y divide-slate-100"},td={class:"truncate max-w-[180px]"},sd={class:"font-semibold text-slate-900"},ad={key:0},ld={class:"bg-slate-50 rounded-xl p-4 mb-4"},od={class:"flex items-center justify-between mb-2"},nd={class:"text-lg font-bold text-slate-900"},rd={class:"flex items-center justify-between mb-2"},id={class:"text-lg font-bold text-emerald-600"},dd={class:"flex items-center justify-between"},ud={class:"text-lg font-bold text-red-600"},cd={class:"mb-4"},md={class:"rounded-xl border border-slate-200 bg-white divide-y divide-slate-100 max-h-64 overflow-y-auto"},xd={class:"flex-1 min-w-0"},pd={class:"font-medium text-slate-900 truncate"},vd={class:"text-xs text-slate-500"},bd={class:"flex items-center gap-1"},fd=["disabled","onClick"],gd=["value","onInput","max","disabled"],hd=["disabled","onClick"],yd={key:0,class:"text-xs text-red-600 mt-2"},_d={class:"mb-4"},wd={class:"grid grid-cols-2 gap-2"},kd=["onClick"],Md={class:"mb-4"},Cd={class:"flex flex-col sm:flex-row gap-2"},Td=["value"],Sd={class:"flex items-center justify-between text-sm text-slate-600 mt-2"},Pd={class:"font-semibold text-emerald-600"},Id={class:"mb-4"},jd=["disabled"],Vd={key:0,class:"flex flex-col gap-4"},Bd={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},Dd={class:"flex items-center justify-between"},Ad={class:"text-lg font-bold text-slate-900"},Od={class:"flex flex-col sm:flex-row gap-2"},Ud=["disabled"],Nd={key:0,class:"flex flex-col gap-4"},Hd={class:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2"},Rd={class:"flex items-center justify-between"},$d={class:"text-lg font-bold text-slate-900"},Kd={class:"flex flex-col sm:flex-row gap-2"},Fd=["disabled"],qd={key:0,class:"flex justify-center items-center py-12"},zd={key:1,class:"space-y-4"},Gd={class:"flex justify-center"},Ld={class:"relative bg-white shadow-lg overflow-hidden border border-slate-200",style:{width:"302px"}},Qd={class:"relative p-3 font-mono text-slate-900 text-[11px] leading-relaxed"},Ed={class:"text-center font-bold text-xs"},Wd={key:0,class:"text-center text-slate-600 text-[10px]"},Yd={key:1,class:"text-center text-slate-600 text-[10px]"},Jd={class:"space-y-1"},Xd={key:0},Zd={key:1},eu={key:2},tu={class:"space-y-1"},su={class:"truncate"},au={class:"text-center"},lu={class:"text-right"},ou={class:"text-right"},nu={class:"space-y-1"},ru={class:"flex justify-between"},iu={key:0,class:"space-y-1"},du={class:"flex justify-between font-bold text-xs"},uu={class:"space-y-1"},cu={class:"flex justify-between"},mu={class:"flex justify-between"},xu={key:2,class:"text-center text-slate-600"},pu={key:3,class:"text-center text-slate-600"},vu={key:0,class:"rounded-xl border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-700"},bu={class:"flex flex-col sm:flex-row gap-2"},fu=["disabled"],Mu={__name:"CashierView",setup(zt){const{loading:me,loadingOrderDetail:lt,processingPayment:_e,printingBill:xe,activeTab:se,transactions:ot,voidedOrders:qe,currentOrder:f,todayRevenue:yt,todayTransactions:nt,tableSearchQuery:ae,historyStartDate:v,historyEndDate:ze,transactionPagination:le,voidPagination:pe,shiftLoading:w,cashierUsersLoading:K,showOrderModal:A,showSplitPaymentModal:O,showVoidModal:ve,showCancelTransactionModal:U,showReceiptModal:Ge,showItemsModal:Le,loadingItemsModal:oe,itemsModalOrder:Y,itemsModalItems:Qe,showDiscountModal:Ee,discountType:F,discountValueDisplay:_t,discountSubmitting:we,complimentSubmitting:be,showOpenShiftModal:ke,showCloseShiftModal:J,showHandoverShiftModal:Me,showHandoverPinModal:ne,selectedPaymentMethod:N,selectedSplitPaymentMethod:re,splitNote:We,fullPaidAmountDisplay:wt,splitPaidAmountDisplay:kt,voidPin:Ce,voidReason:fe,voidProcessing:Te,selectedTransaction:Se,cancelPin:Pe,cancelReason:Ie,cancelProcessing:X,receiptLoading:ie,receiptPrinting:je,receiptTransaction:I,receiptOrder:j,outletConfig:C,openingCashDisplay:rt,selectedHandoverCashier:Ve,handoverCurrentPin:H,handoverNextPin:q,showCashMovementModal:Be,cashMovementType:Ye,cashMovementName:Je,cashMovementNote:Xe,cashMovementAmountDisplay:z,cashMovementSubmitting:R,showCashMovementHistoryModal:De,cashMovementHistoryType:ge,cashMovementHistorySource:it,paymentMethods:de,transactionColumns:G,voidColumns:L,avgTransaction:dt,pendingTables:he,filteredPendingTables:Ze,orderItems:et,manualAdjustments:Ae,splitItemsTotal:tt,splitTotalExceedsRemaining:ut,fullChangeAmount:Mt,splitChangeAmount:ct,splitPayments:Oe,receiptItems:Is,receiptAdditionalCharges:Gt,receiptSubtotal:js,receiptTotal:Vs,receiptPaidAmount:Ct,receiptChangeAmount:Bs,historyLoading:Lt,historyStartMax:Ds,historyEndMax:Tt,totalPaidAmount:Z,totalVoidAmount:As,isShiftOpen:B,currentShift:Ue,lastClosedShift:$,shiftSalesSummary:ue,shiftVoidSummary:St,shiftCancelledSummary:st,closeShiftCashInTotal:Qt,closeShiftCashOutTotal:Pt,closeShiftGrandTotal:mt,displayCashMovements:It,cashMovementHistoryItems:Et,cashMovementHistoryTotal:Os,currentUserName:jt,cashierOptions:Us,handoverCandidates:Ns,selectedHandoverCashierName:Hs,formatCurrency:m,formatReceiptNumber:T,getReceiptItemPrice:Vt,getReceiptItemTotal:Wt,handleOpeningCashInput:k,openCashMovementModal:at,closeCashMovementModal:Yt,openCashMovementHistoryModal:Jt,closeCashMovementHistoryModal:Bt,handleCashMovementAmountInput:xt,submitCashMovement:Ne,handleFullPaidAmountInput:Dt,setFullExactAmount:At,handleSplitPaidAmountInput:Xt,setSplitExactAmount:Zt,openDiscountModal:He,closeDiscountModal:es,handleDiscountValueInput:ts,submitDiscount:pt,submitCompliment:ss,formatTime:Ot,formatDateTime:ce,getSplitItemQty:Ut,adjustSplitItemQty:vt,handleSplitItemQtyInput:Rs,openOpenShiftModal:Nt,openCloseShiftModal:Ht,openHandoverShiftModal:V,openHandoverPinModal:Re,closeHandoverPinModal:as,getPaymentMethodClass:Rt,getPaymentMethodText:ls,getTransactionStatusText:$s,getTransactionStatusClass:Ks,getOrderStatusText:Fs,getOrderStatusClass:qs,getPaymentStatusText:zs,getPaymentStatusClass:Gs,getPaymentMethodButtonClass:os,getPaymentNote:ns,getOrderTotal:rs,getRemainingAmount:ee,submitOpenShift:$t,submitCloseShift:is,submitHandoverShift:ds,applyHistoryFilter:us,resetHistoryFilter:$e,goToTransactionPage:Ls,goToVoidPage:Qs,viewOrder:Ke,getItemStatusText:Kt,itemStatusClass:cs,canEditItem:bt,isItemUpdating:ms,openItemsModal:Es,adjustItemQty:xs,processPayment:Ws,printBill:ps,processSplitPayment:vs,openVoidModal:bs,openSplitPaymentModal:fs,closeVoidModal:Ft,handleVoidPinInput:gs,submitVoidOrder:hs,openCancelTransactionModal:Ys,closeCancelTransactionModal:ys,handleCancelPinInput:_s,openReceiptDetail:Js,closeReceiptModal:ws,handleReprintReceipt:ks,handleHandoverCurrentPinInput:qt,handleHandoverNextPinInput:ye,submitCancelTransaction:ft,refreshData:gt}=za();return(Xs,s)=>{const P=la("el-dialog"),Zs=la("el-option"),ea=la("el-select");return r(),d("div",Ga,[e("div",La,[e("div",Qa,[e("div",Ea,[s[79]||(s[79]=Ps('<div class="flex items-center gap-3"><div class="flex h-12 w-12 sm:h-14 sm:w-14 items-center justify-center rounded-xl bg-white/20 backdrop-blur-sm"><svg class="h-6 w-6 sm:h-7 sm:w-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><div><h1 class="text-xl sm:text-2xl font-bold text-white">Kasir</h1><p class="text-xs sm:text-sm text-emerald-100">Proses Pembayaran</p></div></div>',1)),e("button",{onClick:s[0]||(s[0]=(...l)=>t(gt)&&t(gt)(...l)),class:"flex items-center justify-center gap-2 rounded-xl bg-white px-4 py-2.5 font-semibold text-emerald-600 shadow-lg transition-all hover:scale-105 active:scale-95",disabled:t(me)},[(r(),d("svg",{class:D(["h-5 w-5",t(me)?"animate-spin":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...s[78]||(s[78]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),e("span",Ya,o(t(me)?"Memuat...":"Refresh"),1)],8,Wa)])]),e("div",Ja,[e("div",Xa,[s[80]||(s[80]=e("div",null,[e("div",{class:"text-sm font-semibold text-slate-700"},"Shift Kasir"),e("div",{class:"text-xs text-slate-500"},"Status dan uang modal kasir")],-1)),t(w)?(r(),d("div",Za,"Memuat...")):(r(),d("div",el,[t(B)?(r(),d(Q,{key:1},[e("button",{onClick:s[2]||(s[2]=(...l)=>t(V)&&t(V)(...l)),class:"px-4 py-2.5 rounded-xl bg-amber-500 text-white text-sm font-semibold hover:bg-amber-600 transition-all"}," Serah Terima "),e("button",{onClick:s[3]||(s[3]=(...l)=>t(Ht)&&t(Ht)(...l)),class:"px-4 py-2.5 rounded-xl bg-rose-600 text-white text-sm font-semibold hover:bg-rose-700 transition-all"}," Tutup Shift ")],64)):(r(),d("button",{key:0,onClick:s[1]||(s[1]=(...l)=>t(Nt)&&t(Nt)(...l)),class:"px-4 py-2.5 rounded-xl bg-emerald-600 text-white text-sm font-semibold hover:bg-emerald-700 transition-all"}," Buka Shift "))]))]),t(w)?b("",!0):(r(),d("div",tl,[e("div",sl,[e("div",al,[e("div",null,[s[81]||(s[81]=e("div",{class:"text-xs text-slate-500"},"Ringkasan Shift",-1)),e("div",ll,o(t(B)?"Shift Aktif":"Belum ada shift aktif"),1)]),e("span",{class:D([t(B)?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500","px-3 py-1 rounded-full text-[11px] font-semibold"])},o(t(B)?"Sedang berlangsung":"Menunggu buka shift"),3)]),t(B)?(r(),d("div",ol,[e("div",nl,[s[82]||(s[82]=e("div",{class:"text-[11px] text-emerald-700"},"Kasir",-1)),e("div",rl,o(t(Ue)?.opened_by_name||"Kasir"),1)]),e("div",il,[s[83]||(s[83]=e("div",{class:"text-[11px] text-emerald-700"},"Mulai",-1)),e("div",dl,o(t(ce)(t(Ue)?.opened_at)),1)]),e("div",ul,[s[84]||(s[84]=e("div",{class:"text-[11px] text-slate-500"},"Modal Awal",-1)),e("div",cl,o(t(m)(t(Ue)?.opening_cash||0)),1)])])):(r(),d("div",ml,[t($)?(r(),d("div",xl,[s[85]||(s[85]=e("div",{class:"text-[11px] text-slate-500"},"Shift terakhir ditutup",-1)),e("div",pl,o(t(ce)(t($)?.closed_at)),1)])):b("",!0),t($)?.carry_over_cash!=null?(r(),d("div",vl,[s[86]||(s[86]=e("div",{class:"text-[11px] text-slate-500"},"Modal Terakhir",-1)),e("div",bl,o(t(m)(t($)?.carry_over_cash||0)),1)])):b("",!0),t($)?(r(),d("div",fl,[e("div",null,"Cash "+o(t(m)(t($)?.closing_cash||0)),1),e("div",null,"QRIS "+o(t(m)(t($)?.closing_qris||0)),1),e("div",null,"Kartu "+o(t(m)(t($)?.closing_card||0)),1),e("div",null,"Transfer "+o(t(m)(t($)?.closing_transfer||0)),1)])):b("",!0)]))]),e("div",gl,[e("div",hl,[e("div",null,[s[87]||(s[87]=e("div",{class:"text-xs text-slate-500"},"Uang Masuk/Keluar",-1)),e("div",yl,o(t(B)?"Shift Aktif":"Shift Terakhir"),1)]),t(B)?(r(),d("div",_l,[e("button",{type:"button",onClick:s[4]||(s[4]=l=>t(at)("in")),class:"px-3 py-1 rounded-full bg-emerald-100 text-[11px] font-semibold text-emerald-700 hover:bg-emerald-200"}," Uang Masuk "),e("button",{type:"button",onClick:s[5]||(s[5]=l=>t(at)("out")),class:"px-3 py-1 rounded-full bg-amber-100 text-[11px] font-semibold text-amber-700 hover:bg-amber-200"}," Uang Keluar ")])):b("",!0)]),e("div",wl,[e("div",kl,[e("div",Ml,[s[88]||(s[88]=e("div",{class:"text-[11px] text-emerald-700"},"Total Uang Masuk",-1)),e("button",{type:"button",onClick:s[6]||(s[6]=l=>t(Jt)("in",t(B)?"current":"last")),class:"text-[11px] font-semibold text-emerald-600 hover:text-emerald-700"}," Riwayat ")]),e("div",Cl,o(t(m)(t(It).total_in||0)),1)]),e("div",Tl,[e("div",Sl,[s[89]||(s[89]=e("div",{class:"text-[11px] text-amber-700"},"Total Uang Keluar",-1)),e("button",{type:"button",onClick:s[7]||(s[7]=l=>t(Jt)("out",t(B)?"current":"last")),class:"text-[11px] font-semibold text-amber-600 hover:text-amber-700"}," Riwayat ")]),e("div",Pl,o(t(m)(t(It).total_out||0)),1)])]),!t(B)&&!t($)?.cash_movements?(r(),d("div",Il," Belum ada data uang masuk/keluar. ")):b("",!0)])]))]),e("div",jl,[e("div",Vl,[e("div",Bl,[s[91]||(s[91]=e("div",{class:"flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-xl bg-emerald-100"},[e("svg",{class:"h-5 w-5 sm:h-6 sm:w-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Dl,[s[90]||(s[90]=e("div",{class:"text-xs text-slate-500"},"Pendapatan Hari Ini",-1)),e("div",Al,o(t(m)(t(yt))),1)])])]),e("div",Ol,[e("div",Ul,[s[93]||(s[93]=e("div",{class:"flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-xl bg-blue-100"},[e("svg",{class:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e("div",Nl,[s[92]||(s[92]=e("div",{class:"text-xs text-slate-500"},"Transaksi Hari Ini",-1)),e("div",Hl,o(t(nt)),1)])])]),e("div",Rl,[e("div",$l,[s[95]||(s[95]=e("div",{class:"flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-xl bg-red-100"},[e("svg",{class:"h-5 w-5 sm:h-6 sm:w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Kl,[s[94]||(s[94]=e("div",{class:"text-xs text-slate-500"},"Pending Payment",-1)),e("div",Fl,o(t(he).length),1)])])]),e("div",ql,[e("div",zl,[s[97]||(s[97]=e("div",{class:"flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-xl bg-amber-100"},[e("svg",{class:"h-5 w-5 sm:h-6 sm:w-6 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1)),e("div",Gl,[s[96]||(s[96]=e("div",{class:"text-xs text-slate-500"},"Rata-rata",-1)),e("div",Ll,o(t(m)(t(dt))),1)])])])]),e("div",Ql,[e("div",El,[e("button",{onClick:s[8]||(s[8]=l=>se.value="orders"),class:D(["flex-1 rounded-xl px-4 py-3 text-sm sm:text-base font-bold transition-all",t(se)==="orders"?"bg-gradient-to-r from-emerald-600 to-emerald-500 text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"])},[...s[98]||(s[98]=[e("svg",{class:"inline-block h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})],-1),ua(" Pending Orders ",-1)])],2),e("button",{onClick:s[9]||(s[9]=l=>se.value="history"),class:D(["flex-1 rounded-xl px-4 py-3 text-sm sm:text-base font-bold transition-all",t(se)==="history"?"bg-gradient-to-r from-emerald-600 to-emerald-500 text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"])},[...s[99]||(s[99]=[e("svg",{class:"inline-block h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),ua(" Riwayat ",-1)])],2)])]),t(se)==="orders"?(r(),d("div",Wl,[t(me)?(r(),d("div",Yl,[...s[100]||(s[100]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"},null,-1)])])):(r(),d("div",Jl,[t(he).length>0?(r(),d("div",Xl,[e("div",Zl,[E(e("input",{"onUpdate:modelValue":s[10]||(s[10]=l=>g(ae)?ae.value=l:null),type:"text",placeholder:"Cari nomor meja...",class:"w-full h-11 pl-11 pr-10 rounded-xl border-2 border-slate-200 bg-slate-50 text-sm sm:text-base font-medium placeholder-slate-400 focus:outline-none focus:border-emerald-500 focus:bg-white focus:ring-4 focus:ring-emerald-100 transition-all"},null,512),[[W,t(ae)]]),s[102]||(s[102]=e("svg",{class:"absolute left-3.5 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 9 9 0 0114 0z"})],-1)),t(ae)?(r(),d("button",{key:0,onClick:s[11]||(s[11]=l=>ae.value=""),class:"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-full hover:bg-slate-100 transition-colors"},[...s[101]||(s[101]=[e("svg",{class:"h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):b("",!0)])])):b("",!0),t(he).length===0?(r(),d("div",eo,[...s[103]||(s[103]=[Ps('<div class="flex flex-col items-center gap-6 text-center"><div class="flex h-24 w-24 items-center justify-center rounded-full bg-gradient-to-br from-emerald-100 to-emerald-200"><svg class="h-12 w-12 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div><h3 class="text-2xl font-bold text-slate-900">Tidak Ada Order Pending</h3><p class="mt-2 text-slate-500">Semua pembayaran sudah diproses</p></div></div>',1)])])):t(Ze).length===0?(r(),d("div",to,[...s[104]||(s[104]=[Ps('<div class="flex flex-col items-center gap-6 text-center"><div class="flex h-24 w-24 items-center justify-center rounded-full bg-gradient-to-br from-slate-100 to-slate-200"><svg class="h-12 w-12 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><div><h3 class="text-2xl font-bold text-slate-900">Meja Tidak Ditemukan</h3><p class="mt-2 text-slate-500">Coba kata kunci lain</p></div></div>',1)])])):(r(),d("div",so,[e("div",ao,[e("table",lo,[s[105]||(s[105]=e("thead",{class:"bg-slate-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Meja"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Waiter"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Tamu"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Basket"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Nomor Pesanan"),e("th",{class:"px-4 py-3 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Total"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Waktu"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Item"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Status")])],-1)),e("tbody",oo,[(r(!0),d(Q,null,te(t(Ze),l=>(r(),d("tr",{key:l.id,class:"hover:bg-slate-50 transition-colors cursor-pointer",onClick:M=>t(Ke)(l)},[e("td",ro,[e("div",io,[e("span",null,"Meja "+o(l.table_number),1),l.active_order?.is_merged?(r(),d("span",uo," Gabung ke "+o(l.active_order?.merged_from_table_number||"-"),1)):b("",!0)])]),e("td",co,o(l.active_order?.waiter_name||"-"),1),e("td",mo,o(l.active_order?.pax||0)+" orang",1),e("td",xo,o(l.active_order?.basket_size||0),1),e("td",po,o(l.active_order?.order_id||"-"),1),e("td",vo,o(t(m)(t(ee)(l.active_order))),1),e("td",bo,o(t(Ot)(l.active_order?.created_at)),1),e("td",fo,[e("button",{type:"button",class:"inline-flex items-center justify-center rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-1.5 text-xs font-semibold text-emerald-700 hover:bg-emerald-100",onClick:oa(M=>t(Es)(l),["stop"])}," Lihat Item ",8,go)]),e("td",ho,[e("span",yo,o((l.active_order?.payment_status||"unpaid").toUpperCase()),1)])],8,no))),128))])])])]))]))])):b("",!0),t(se)==="history"?(r(),d("div",_o,[t(Lt)?(r(),d("div",wo,[...s[106]||(s[106]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"},null,-1)])])):t(ot).length===0&&t(qe).length===0?(r(),d("div",ko,[...s[107]||(s[107]=[Ps('<div class="flex flex-col items-center gap-6 text-center"><div class="flex h-24 w-24 items-center justify-center rounded-full bg-gradient-to-br from-slate-100 to-slate-200"><svg class="h-12 w-12 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div><h3 class="text-2xl font-bold text-slate-900">Belum Ada Riwayat</h3><p class="mt-2 text-slate-500">Transaksi yang sudah diproses akan muncul di sini</p></div></div>',1)])])):(r(),d("div",Mo,[e("div",Co,[e("div",To,[e("div",So,[e("div",null,[s[108]||(s[108]=e("div",{class:"text-xs font-semibold text-slate-500 mb-1"},"Tanggal Mulai",-1)),E(e("input",{"onUpdate:modelValue":s[12]||(s[12]=l=>g(v)?v.value=l:null),type:"date",class:"h-11 w-full sm:w-44 px-3 rounded-xl border-2 border-slate-200 bg-slate-50 text-sm font-medium focus:outline-none focus:border-emerald-500 focus:bg-white focus:ring-4 focus:ring-emerald-100 transition-all",max:t(Ds)},null,8,Po),[[W,t(v)]])]),e("div",null,[s[109]||(s[109]=e("div",{class:"text-xs font-semibold text-slate-500 mb-1"},"Tanggal Akhir",-1)),E(e("input",{"onUpdate:modelValue":s[13]||(s[13]=l=>g(ze)?ze.value=l:null),type:"date",class:"h-11 w-full sm:w-44 px-3 rounded-xl border-2 border-slate-200 bg-slate-50 text-sm font-medium focus:outline-none focus:border-emerald-500 focus:bg-white focus:ring-4 focus:ring-emerald-100 transition-all",min:t(v),max:t(Tt)},null,8,Io),[[W,t(ze)]])])]),e("div",jo,[e("button",{type:"button",onClick:s[14]||(s[14]=(...l)=>t(us)&&t(us)(...l)),class:"h-11 px-4 rounded-xl bg-emerald-600 text-white text-sm font-semibold hover:bg-emerald-700 transition-all"}," Terapkan "),e("button",{type:"button",onClick:s[15]||(s[15]=(...l)=>t($e)&&t($e)(...l)),class:"h-11 px-4 rounded-xl border-2 border-slate-200 text-slate-600 text-sm font-semibold hover:bg-slate-50 transition-all"}," Hari Ini ")])]),s[110]||(s[110]=e("div",{class:"mt-2 text-xs text-slate-500"},"Maksimal rentang 3 bulan",-1))]),e("div",Vo,[e("div",Bo,[s[111]||(s[111]=e("div",{class:"text-sm font-semibold text-slate-700"},"Histori Bayar",-1)),e("div",Do,[e("span",null,o(t(le).total_items)+" data",1),e("span",null,"Total Nominal "+o(t(m)(t(Z))),1)])]),S(ma,{columns:t(G),data:t(ot)},{"cell-time":h(({item:l})=>[e("span",Ao,o(t(ce)(l.created_at)),1)]),"cell-id":h(({item:l})=>[e("span",Oo,o(l.order_id||l.id||"-"),1)]),"cell-payment_method":h(({item:l})=>[e("span",{class:D([t(Rt)(l.payment_method),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},o(t(ls)(l.payment_method)),3)]),"cell-total_amount":h(({item:l})=>[e("span",Uo,o(t(m)(l.total_amount)),1)]),"cell-status":h(({item:l})=>[e("span",{class:D([t(Ks)(l.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},o(t($s)(l.status)),3)]),"cell-actions":h(({item:l})=>[e("div",No,[e("button",{type:"button",class:"inline-flex items-center justify-center rounded-lg border border-emerald-200 px-3 py-1.5 text-xs font-semibold text-emerald-600 hover:bg-emerald-50",onClick:oa(M=>t(Js)(l),["stop"])}," Detail ",8,Ho),e("button",{type:"button",class:"inline-flex items-center justify-center rounded-lg border border-red-200 px-3 py-1.5 text-xs font-semibold text-red-600 hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.status==="cancelled",onClick:oa(M=>t(Ys)(l),["stop"])}," Batalkan ",8,Ro)])]),_:1},8,["columns","data"])]),t(le).total_items>0?(r(),d("div",$o,[S(xa,{"current-page":t(le).current_page,"total-pages":t(le).total_pages,"total-items":t(le).total_items,"item-name":"transaksi",onPageChange:t(Ls)},null,8,["current-page","total-pages","total-items","onPageChange"])])):b("",!0),e("div",Ko,[e("div",Fo,[s[112]||(s[112]=e("div",{class:"text-sm font-semibold text-slate-700"},"Histori Void Order",-1)),e("div",qo,[e("span",null,o(t(pe).total_items)+" data",1),e("span",null,"Total Void "+o(t(m)(t(As))),1)])]),S(ma,{columns:t(L),data:t(qe)},{"cell-voided_at":h(({item:l})=>[e("span",zo,o(t(ce)(l.voided_at||l.created_at)),1)]),"cell-id":h(({item:l})=>[e("span",Go,o(l.order_id||l.id||"-"),1)]),"cell-table_number":h(({item:l})=>[e("span",Lo,o(l.table_number||"-"),1)]),"cell-total_amount":h(({item:l})=>[e("span",Qo,o(t(m)(l.total_amount)),1)]),"cell-voided_by":h(({item:l})=>[e("span",Eo,o(l.voided_by_name||l.voided_by||"-"),1)]),"cell-void_reason":h(({item:l})=>[e("span",Wo,o(l.void_reason||"-"),1)]),_:1},8,["columns","data"])]),t(pe).total_items>0?(r(),d("div",Yo,[S(xa,{"current-page":t(pe).current_page,"total-pages":t(pe).total_pages,"total-items":t(pe).total_items,"item-name":"void",onPageChange:t(Qs)},null,8,["current-page","total-pages","total-items","onPageChange"])])):b("",!0)]))])):b("",!0)]),S(P,{modelValue:t(A),"onUpdate:modelValue":s[24]||(s[24]=l=>g(A)?A.value=l:null),title:"Detail Order",width:"92%",style:{"max-width":"720px"},"close-on-click-modal":!1},{default:h(()=>[t(lt)?(r(),d("div",Jo,[...s[113]||(s[113]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"},null,-1)])])):t(f)?(r(),d("div",Xo,[e("div",Zo,[e("div",en,[e("div",null,[s[114]||(s[114]=e("div",{class:"text-slate-500"},"Meja",-1)),e("div",tn,o(t(f).order.table_number),1)]),e("div",null,[s[115]||(s[115]=e("div",{class:"text-slate-500"},"Tamu",-1)),e("div",sn,o(t(f).order.pax)+" orang",1)]),e("div",null,[s[116]||(s[116]=e("div",{class:"text-slate-500"},"Nomor Pesanan",-1)),e("div",an,o(t(f).order.id),1)]),e("div",null,[s[117]||(s[117]=e("div",{class:"text-slate-500"},"Waktu",-1)),e("div",ln,o(t(ce)(t(f).order.created_at)),1)]),e("div",null,[s[118]||(s[118]=e("div",{class:"text-slate-500"},"Waiter",-1)),e("div",on,o(t(f).order.waiter_name||"-"),1)]),e("div",null,[s[119]||(s[119]=e("div",{class:"text-slate-500"},"Basket",-1)),e("div",nn,o(t(f).order.basket_size||t(et).length),1)]),e("div",null,[s[120]||(s[120]=e("div",{class:"text-slate-500"},"Status Pesanan",-1)),e("div",{class:D([t(qs)(t(f).order.order_status),"inline-flex px-2 py-1 rounded-full text-xs font-semibold"])},o(t(Fs)(t(f).order.order_status)),3)]),e("div",null,[s[121]||(s[121]=e("div",{class:"text-slate-500"},"Status Pembayaran",-1)),e("div",{class:D([t(Gs)(t(f).order.payment_status),"inline-flex px-2 py-1 rounded-full text-xs font-semibold"])},o(t(zs)(t(f).order.payment_status)),3)]),e("div",null,[s[122]||(s[122]=e("div",{class:"text-slate-500"},"Total",-1)),e("div",rn,o(t(m)(t(rs)(t(f).order))),1)]),e("div",null,[s[123]||(s[123]=e("div",{class:"text-slate-500"},"Dibayar",-1)),e("div",dn,o(t(m)(t(f).order.paid_amount||0)),1)]),e("div",null,[s[124]||(s[124]=e("div",{class:"text-slate-500"},"Sisa",-1)),e("div",un,o(t(m)(t(ee)(t(f).order))),1)]),e("div",null,[s[125]||(s[125]=e("div",{class:"text-slate-500"},"Update Terakhir",-1)),e("div",cn,o(t(ce)(t(f).order.updated_at||t(f).order.created_at)),1)]),t(f).order.is_merged?(r(),d("div",mn,[s[126]||(s[126]=e("div",{class:"text-slate-500"},"Gabungan",-1)),e("div",xn,"Digabung ke Meja "+o(t(f).order.merged_from_table_number||"-"),1)])):b("",!0)])]),t(Oe).length?(r(),d("div",pn,[e("div",vn,[e("div",bn,"Histori Split Bill ("+o(t(Oe).length)+")",1),s[127]||(s[127]=e("div",{class:"text-xs text-slate-500"},"Pembayaran parsial",-1))]),e("div",fn,[(r(!0),d(Q,null,te(t(Oe),l=>(r(),d("div",{key:l.id,class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between px-3 py-2"},[e("div",null,[e("div",gn,o(t(ls)(l.payment_method)),1),e("div",hn,o(t(ce)(l.created_at)),1)]),e("div",yn,[e("div",_n,o(t(m)(l.amount)),1),t(ns)(l.payment_note)?(r(),d("div",wn,o(t(ns)(l.payment_note)),1)):b("",!0)])]))),128))])])):b("",!0),e("div",kn,[t(Oe).length?(r(),d("div",Mn,[s[128]||(s[128]=e("div",{class:"text-sm font-semibold text-slate-600"},"Sisa Tagihan",-1)),e("div",Cn,o(t(m)(t(ee)(t(f).order))),1)])):b("",!0),t(Ae).length?(r(),d("div",Tn,[s[129]||(s[129]=e("div",{class:"flex items-center justify-between px-3 py-2 bg-slate-50 border-b border-slate-200"},[e("div",{class:"text-sm font-semibold text-slate-700"},"Penyesuaian"),e("div",{class:"text-xs text-slate-500"},"Diskon & Kompliment")],-1)),e("div",Sn,[(r(!0),d(Q,null,te(t(Ae),(l,M)=>(r(),d("div",{key:`${l.name}-${M}`,class:"flex items-center justify-between px-3 py-2"},[e("div",Pn,o(l.name),1),e("div",{class:D(["text-sm font-semibold",l.applied_amount<0?"text-rose-600":"text-emerald-600"])},o(t(m)(l.applied_amount)),3)]))),128))])])):b("",!0),e("div",In,[e("div",jn,[s[130]||(s[130]=e("div",{class:"text-lg font-semibold text-slate-900"},"Total Tagihan",-1)),e("div",Vn,o(t(m)(t(ee)(t(f).order))),1)]),e("div",Bn,[s[131]||(s[131]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"Metode Pembayaran",-1)),e("div",Dn,[(r(!0),d(Q,null,te(t(de),l=>(r(),d("button",{key:l.value,onClick:M=>N.value=l.value,class:D(t(os)(l.value,t(N)===l.value))},o(l.label),11,An))),128))])]),e("div",On,[s[133]||(s[133]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"Jumlah Bayar",-1)),e("div",Un,[e("input",{value:t(wt),onInput:s[16]||(s[16]=(...l)=>t(Dt)&&t(Dt)(...l)),type:"text",inputmode:"numeric",placeholder:"Rp 0",class:"flex-1 px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-emerald-500 focus:outline-none"},null,40,Nn),e("button",{type:"button",onClick:s[17]||(s[17]=(...l)=>t(At)&&t(At)(...l)),class:"px-4 py-3 rounded-xl border border-slate-200 text-slate-600 font-semibold hover:bg-slate-50 transition-all"}," Uang Pas ")]),e("div",Hn,[s[132]||(s[132]=e("span",null,"Kembalian",-1)),e("span",Rn,o(t(m)(t(Mt))),1)])]),e("div",$n,[e("button",{onClick:s[18]||(s[18]=(...l)=>t(ps)&&t(ps)(...l)),disabled:t(xe),class:"flex items-center justify-center gap-2 px-3 py-3 rounded-xl bg-slate-700 text-white text-sm font-semibold hover:bg-slate-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[s[134]||(s[134]=e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.8","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M7 8V4h10v4"}),e("rect",{x:"6",y:"12",width:"12",height:"8",rx:"2"}),e("path",{d:"M6 10h12"})],-1)),e("span",null,o(t(xe)?"Mencetak...":"Cetak Bill"),1)],8,Kn),e("button",{onClick:s[19]||(s[19]=(...l)=>t(He)&&t(He)(...l)),disabled:t(we)||t(be)||t(ee)(t(f).order)<=0,class:"flex items-center justify-center gap-2 px-3 py-3 rounded-xl border border-emerald-200 text-emerald-700 text-sm font-semibold hover:bg-emerald-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[...s[135]||(s[135]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.8","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"8.5",cy:"8.5",r:"2.5"}),e("circle",{cx:"15.5",cy:"15.5",r:"2.5"}),e("path",{d:"M5 19L19 5"})],-1),e("span",null,"Diskon",-1)])],8,Fn),e("button",{onClick:s[20]||(s[20]=(...l)=>t(ss)&&t(ss)(...l)),disabled:t(we)||t(be)||t(ee)(t(f).order)<=0,class:"flex items-center justify-center gap-2 px-3 py-3 rounded-xl border border-amber-200 text-amber-600 text-sm font-semibold hover:bg-amber-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[s[136]||(s[136]=e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.8","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M7 12h7l3.5-3.5a2.1 2.1 0 0 1 3 3L16 16H7a3 3 0 0 1 0-6z"}),e("path",{d:"M3 12h4v6H3z"})],-1)),e("span",null,o(t(be)?"Memproses...":"Kompliment"),1)],8,qn),e("button",{onClick:s[21]||(s[21]=(...l)=>t(fs)&&t(fs)(...l)),class:"flex items-center justify-center gap-2 px-3 py-3 rounded-xl bg-amber-500 text-white text-sm font-semibold hover:bg-amber-600 transition-all"},[...s[137]||(s[137]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.8","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M6 7h6a4 4 0 1 1 0 8h-2"}),e("path",{d:"M10 15l-3 3-3-3"}),e("path",{d:"M18 9l3-3-3-3"})],-1),e("span",null,"Split Bill",-1)])]),e("button",{onClick:s[22]||(s[22]=(...l)=>t(bs)&&t(bs)(...l)),class:"flex items-center justify-center gap-2 px-3 py-3 rounded-xl border border-red-200 text-red-600 text-sm font-semibold hover:bg-red-50 transition-all"},[...s[138]||(s[138]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.8","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"9"}),e("path",{d:"M8.5 8.5l7 7M15.5 8.5l-7 7"})],-1),e("span",null,"Void Order",-1)])]),e("button",{onClick:s[23]||(s[23]=l=>t(Ws)(t(f).order.id,t(ee)(t(f).order))),disabled:t(_e)||!t(N),class:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-gradient-to-r from-emerald-600 to-emerald-500 text-white text-sm font-semibold hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[s[139]||(s[139]=e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.8","stroke-linecap":"round","stroke-linejoin":"round"},[e("rect",{x:"3",y:"6",width:"18",height:"12",rx:"2"}),e("path",{d:"M3 10h18"}),e("path",{d:"M9 14l2 2 4-4"})],-1)),e("span",null,o(t(_e)?"Memproses...":"Bayar Penuh"),1)],8,zn)])])])])):b("",!0)]),_:1},8,["modelValue"]),S(P,{modelValue:t(Ee),"onUpdate:modelValue":s[30]||(s[30]=l=>g(Ee)?Ee.value=l:null),title:"Diskon Order",width:"90%",style:{"max-width":"420px"},"close-on-click-modal":!1},{default:h(()=>[e("div",Gn,[e("div",null,[s[140]||(s[140]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"Tipe Diskon",-1)),e("div",Ln,[e("button",{type:"button",onClick:s[25]||(s[25]=l=>F.value="percentage"),class:D([t(F)==="percentage"?"border-emerald-500 bg-emerald-50 text-emerald-700":"border-slate-200 text-slate-600","px-4 py-2.5 rounded-xl border text-sm font-semibold transition-all"])}," Persentase ",2),e("button",{type:"button",onClick:s[26]||(s[26]=l=>F.value="fixed"),class:D([t(F)==="fixed"?"border-emerald-500 bg-emerald-50 text-emerald-700":"border-slate-200 text-slate-600","px-4 py-2.5 rounded-xl border text-sm font-semibold transition-all"])}," Nominal ",2)])]),e("div",null,[s[141]||(s[141]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"Nilai Diskon",-1)),e("div",Qn,[e("input",{value:t(_t),onInput:s[27]||(s[27]=(...l)=>t(ts)&&t(ts)(...l)),type:"text",inputmode:"numeric",placeholder:t(F)==="percentage"?"0-100":"Rp 0",class:"w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-emerald-500 focus:outline-none"},null,40,En),t(F)==="percentage"?(r(),d("span",Wn,"%")):b("",!0)]),t(F)==="percentage"?(r(),d("div",Yn,"Maksimal 100%")):b("",!0)]),e("div",Jn,[e("button",{type:"button",onClick:s[28]||(s[28]=(...l)=>t(es)&&t(es)(...l)),class:"flex-1 px-4 py-3 rounded-xl border border-slate-200 text-slate-600 font-semibold hover:bg-slate-50 transition-all"}," Batal "),e("button",{type:"button",onClick:s[29]||(s[29]=(...l)=>t(pt)&&t(pt)(...l)),disabled:t(we),class:"flex-1 px-4 py-3 rounded-xl bg-emerald-600 text-white font-semibold hover:bg-emerald-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},o(t(we)?"Menyimpan...":"Simpan Diskon"),9,Xn)])])]),_:1},8,["modelValue"]),S(P,{modelValue:t(Le),"onUpdate:modelValue":s[31]||(s[31]=l=>g(Le)?Le.value=l:null),title:"Item Pesanan",width:"90%",style:{"max-width":"560px"},"close-on-click-modal":!1},{default:h(()=>[t(oe)?(r(),d("div",Zn,[...s[142]||(s[142]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"},null,-1)])])):(r(),d("div",er,[e("div",tr,[e("div",sr,[e("div",null,[s[143]||(s[143]=e("div",{class:"text-slate-500"},"Meja",-1)),e("div",ar,o(t(Y)?.table_number||"-"),1)]),e("div",null,[s[144]||(s[144]=e("div",{class:"text-slate-500"},"Waiter",-1)),e("div",lr,o(t(Y)?.waiter_name||"-"),1)]),e("div",null,[s[145]||(s[145]=e("div",{class:"text-slate-500"},"Basket",-1)),e("div",or,o(t(Y)?.basket_size||t(Qe).length),1)]),e("div",null,[s[146]||(s[146]=e("div",{class:"text-slate-500"},"Total",-1)),e("div",nr,o(t(m)(t(Y)?.total_amount||0)),1)])])]),e("div",null,[e("div",rr,[e("div",ir,[e("div",dr,"Daftar Item ("+o(t(Qe).length)+")",1),s[147]||(s[147]=e("div",{class:"text-xs text-slate-500"},"Scroll untuk lihat semua",-1))]),e("div",ur,[(r(!0),d(Q,null,te(t(Qe),l=>(r(),d("div",{key:l.id,class:"flex items-center justify-between px-3 py-2 gap-3"},[e("div",cr,[e("div",mr,[e("div",xr,o(l.product_name),1),e("span",{class:D([t(cs)(l.item_status),"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold uppercase"])},o(t(Kt)(l.item_status)),3)]),e("div",pr,o(l.qty)+" x "+o(t(m)(l.price)),1)]),e("div",vr,[e("div",br,o(t(m)(l.qty*l.price)),1),e("div",fr,[e("button",{type:"button",class:"h-8 w-8 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50 disabled:opacity-40 disabled:cursor-not-allowed",disabled:!t(bt)(l)||t(ms)(l.id),onClick:M=>t(xs)(l,-1)}," - ",8,gr),e("div",hr,o(l.qty),1),e("button",{type:"button",class:"h-8 w-8 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50 disabled:opacity-40 disabled:cursor-not-allowed",disabled:!t(bt)(l)||t(ms)(l.id),onClick:M=>t(xs)(l,1)}," + ",8,yr)])])]))),128))])])])]))]),_:1},8,["modelValue"]),S(P,{modelValue:t(ke),"onUpdate:modelValue":s[35]||(s[35]=l=>g(ke)?ke.value=l:null),title:"Buka Shift Kasir",width:"90%",style:{"max-width":"420px"},"close-on-click-modal":!1},{default:h(()=>[e("div",_r,[e("div",wr,[e("div",kr,[s[148]||(s[148]=e("div",{class:"text-sm text-slate-500"},"Modal Tersedia",-1)),e("div",Mr,o(t(m)(t($)?.carry_over_cash||0)),1)])]),e("div",null,[s[149]||(s[149]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"Uang Modal",-1)),e("input",{value:t(rt),onInput:s[32]||(s[32]=(...l)=>t(k)&&t(k)(...l)),type:"text",inputmode:"numeric",class:"w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-emerald-500 focus:outline-none",placeholder:"Masukkan uang modal"},null,40,Cr),s[150]||(s[150]=e("div",{class:"text-xs text-slate-500 mt-2"},"Kosongkan untuk memakai modal terakhir",-1))]),e("div",Tr,[e("button",{onClick:s[33]||(s[33]=l=>ke.value=!1),class:"flex-1 px-4 py-3 rounded-xl border border-slate-200 text-slate-600 font-semibold hover:bg-slate-50 transition-all"}," Batal "),e("button",{onClick:s[34]||(s[34]=(...l)=>t($t)&&t($t)(...l)),disabled:t(w),class:"flex-1 px-4 py-3 rounded-xl bg-emerald-600 text-white font-semibold hover:bg-emerald-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},o(t(w)?"Memproses...":"Buka Shift"),9,Sr)])])]),_:1},8,["modelValue"]),S(P,{modelValue:t(J),"onUpdate:modelValue":s[38]||(s[38]=l=>g(J)?J.value=l:null),title:"Tutup Shift Kasir",width:"90%",style:{"max-width":"420px"},"close-on-click-modal":!1},{default:h(()=>[e("div",Pr,[e("div",Ir,[e("div",jr,[s[151]||(s[151]=e("div",{class:"text-sm text-slate-500"},"Modal Awal",-1)),e("div",Vr,o(t(m)(t(Ue)?.opening_cash||0)),1)])]),e("div",Br,[e("div",Dr,[s[152]||(s[152]=e("div",{class:"text-xs text-slate-500"},"Cash",-1)),e("div",Ar,o(t(m)(t(ue).cash||0)),1)]),e("div",Or,[s[153]||(s[153]=e("div",{class:"text-xs text-slate-500"},"Kartu",-1)),e("div",Ur,o(t(m)(t(ue).card||0)),1)]),e("div",Nr,[s[154]||(s[154]=e("div",{class:"text-xs text-slate-500"},"QRIS",-1)),e("div",Hr,o(t(m)(t(ue).qris||0)),1)]),e("div",Rr,[s[155]||(s[155]=e("div",{class:"text-xs text-slate-500"},"Transfer",-1)),e("div",$r,o(t(m)(t(ue).transfer||0)),1)]),e("div",Kr,[s[156]||(s[156]=e("div",{class:"text-xs text-rose-600"},"Void",-1)),e("div",Fr,"-"+o(t(m)(t(St).total||0)),1)]),e("div",qr,[s[157]||(s[157]=e("div",{class:"text-xs text-rose-600"},"Batal",-1)),e("div",zr,"-"+o(t(m)(t(st).total||0)),1)]),e("div",Gr,[s[158]||(s[158]=e("div",{class:"text-xs text-slate-500"},"Uang Masuk",-1)),e("div",Lr,o(t(m)(t(Qt))),1)]),e("div",Qr,[s[159]||(s[159]=e("div",{class:"text-xs text-slate-500"},"Uang Keluar",-1)),e("div",Er,o(t(m)(t(Pt))),1)])]),e("div",Wr,[s[160]||(s[160]=e("div",{class:"text-xs text-emerald-700"},"Total",-1)),e("div",Yr,o(t(m)(t(mt))),1)]),e("div",Jr,[e("button",{onClick:s[36]||(s[36]=l=>J.value=!1),class:"flex-1 px-4 py-3 rounded-xl border border-slate-200 text-slate-600 font-semibold hover:bg-slate-50 transition-all"}," Batal "),e("button",{onClick:s[37]||(s[37]=(...l)=>t(is)&&t(is)(...l)),disabled:t(w),class:"flex-1 px-4 py-3 rounded-xl bg-rose-600 text-white font-semibold hover:bg-rose-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},o(t(w)?"Memproses...":"Tutup Shift"),9,Xr)])])]),_:1},8,["modelValue"]),S(P,{modelValue:t(Me),"onUpdate:modelValue":s[42]||(s[42]=l=>g(Me)?Me.value=l:null),title:"Serah Terima Shift Kasir",width:"90%",style:{"max-width":"460px"},"close-on-click-modal":!1},{default:h(()=>[e("div",Zr,[e("div",ei,[e("div",ti,[s[161]||(s[161]=e("div",{class:"text-sm text-slate-500"},"Kasir Saat Ini",-1)),e("div",si,o(t(jt)),1)]),e("div",ai,[s[162]||(s[162]=e("div",{class:"text-sm text-slate-500"},"Modal Awal",-1)),e("div",li,o(t(m)(t(Ue)?.opening_cash||0)),1)])]),e("div",null,[s[163]||(s[163]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"Kasir Tujuan",-1)),t(K)?(r(),d("div",oi,"Memuat daftar kasir...")):(r(),ca(ea,{key:1,modelValue:t(Ve),"onUpdate:modelValue":s[39]||(s[39]=l=>g(Ve)?Ve.value=l:null),filterable:"",clearable:"",placeholder:"Pilih kasir",class:"w-full"},{default:h(()=>[(r(!0),d(Q,null,te(t(Us),l=>(r(),ca(Zs,{key:l.id,label:l.label,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])),!t(K)&&t(Ns).length===0?(r(),d("div",ni," Tidak ada kasir lain yang aktif ")):b("",!0)]),e("div",null,[s[170]||(s[170]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"Ringkasan Penjualan Terbayar",-1)),e("div",ri,[e("div",ii,[s[164]||(s[164]=e("div",{class:"text-xs text-slate-500"},"Cash",-1)),e("div",di,o(t(m)(t(ue).cash||0)),1)]),e("div",ui,[s[165]||(s[165]=e("div",{class:"text-xs text-slate-500"},"Kartu",-1)),e("div",ci,o(t(m)(t(ue).card||0)),1)]),e("div",mi,[s[166]||(s[166]=e("div",{class:"text-xs text-slate-500"},"QRIS",-1)),e("div",xi,o(t(m)(t(ue).qris||0)),1)]),e("div",pi,[s[167]||(s[167]=e("div",{class:"text-xs text-slate-500"},"Transfer",-1)),e("div",vi,o(t(m)(t(ue).transfer||0)),1)]),e("div",bi,[s[168]||(s[168]=e("div",{class:"text-xs text-rose-600"},"Void",-1)),e("div",fi,"-"+o(t(m)(t(St).total||0)),1)]),e("div",gi,[s[169]||(s[169]=e("div",{class:"text-xs text-rose-600"},"Batal",-1)),e("div",hi,"-"+o(t(m)(t(st).total||0)),1)])])]),e("div",null,[s[174]||(s[174]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"Ringkasan Uang Masuk/Keluar",-1)),e("div",yi,[e("div",_i,[s[171]||(s[171]=e("div",{class:"text-xs text-slate-500"},"Uang Masuk",-1)),e("div",wi,o(t(m)(t(Qt))),1)]),e("div",ki,[s[172]||(s[172]=e("div",{class:"text-xs text-slate-500"},"Uang Keluar",-1)),e("div",Mi,o(t(m)(t(Pt))),1)])]),e("div",Ci,[s[173]||(s[173]=e("div",{class:"text-xs text-emerald-700"},"Total",-1)),e("div",Ti,o(t(m)(t(mt))),1)])]),e("div",Si,[e("button",{onClick:s[40]||(s[40]=l=>Me.value=!1),class:"flex-1 px-4 py-3 rounded-xl border border-slate-200 text-slate-600 font-semibold hover:bg-slate-50 transition-all"}," Batal "),e("button",{onClick:s[41]||(s[41]=(...l)=>t(Re)&&t(Re)(...l)),disabled:t(w)||t(K)||!t(Ve),class:"flex-1 px-4 py-3 rounded-xl bg-amber-500 text-white font-semibold hover:bg-amber-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},o(t(w)?"Memproses...":"Serah Terima"),9,Pi)])])]),_:1},8,["modelValue"]),S(P,{modelValue:t(ne),"onUpdate:modelValue":s[49]||(s[49]=l=>g(ne)?ne.value=l:null),title:"Konfirmasi PIN Serah Terima",width:"90%",style:{"max-width":"420px"},"close-on-click-modal":!1},{default:h(()=>[e("div",Ii,[e("div",ji,[e("div",Vi,[s[175]||(s[175]=e("div",{class:"text-sm text-slate-500"},"Kasir Saat Ini",-1)),e("div",Bi,o(t(jt)),1)]),e("div",Di,[s[176]||(s[176]=e("div",{class:"text-sm text-slate-500"},"Kasir Tujuan",-1)),e("div",Ai,o(t(Hs)),1)])]),e("div",null,[s[177]||(s[177]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"PIN Kasir Saat Ini",-1)),E(e("input",{"onUpdate:modelValue":s[43]||(s[43]=l=>g(H)?H.value=l:null),type:"password",inputmode:"numeric",pattern:"[0-9]{4}",maxlength:"4",minlength:"4",onInput:s[44]||(s[44]=(...l)=>t(qt)&&t(qt)(...l)),class:"w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-amber-500 focus:outline-none",placeholder:"Masukkan PIN 4 digit"},null,544),[[W,t(H)]])]),e("div",null,[s[178]||(s[178]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"PIN Kasir Tujuan",-1)),E(e("input",{"onUpdate:modelValue":s[45]||(s[45]=l=>g(q)?q.value=l:null),type:"password",inputmode:"numeric",pattern:"[0-9]{4}",maxlength:"4",minlength:"4",onInput:s[46]||(s[46]=(...l)=>t(ye)&&t(ye)(...l)),class:"w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-amber-500 focus:outline-none",placeholder:"Masukkan PIN 4 digit"},null,544),[[W,t(q)]])]),e("div",Oi,[e("button",{onClick:s[47]||(s[47]=(...l)=>t(as)&&t(as)(...l)),class:"flex-1 px-4 py-3 rounded-xl border border-slate-200 text-slate-600 font-semibold hover:bg-slate-50 transition-all"}," Batal "),e("button",{onClick:s[48]||(s[48]=(...l)=>t(ds)&&t(ds)(...l)),disabled:t(w)||t(H).length!==4||t(q).length!==4,class:"flex-1 px-4 py-3 rounded-xl bg-amber-500 text-white font-semibold hover:bg-amber-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},o(t(w)?"Memproses...":"Konfirmasi"),9,Ui)])])]),_:1},8,["modelValue"]),S(P,{modelValue:t(Be),"onUpdate:modelValue":s[55]||(s[55]=l=>g(Be)?Be.value=l:null),title:t(Ye)==="in"?"Tambah Uang Masuk":"Tambah Uang Keluar",width:"90%",style:{"max-width":"420px"},"close-on-click-modal":!1},{default:h(()=>[e("div",Ni,[e("div",Hi,[e("div",Ri,[s[179]||(s[179]=e("div",{class:"text-sm text-slate-500"},"Shift Aktif",-1)),e("div",$i,o(t(Ue)?.opened_by_name||"Kasir"),1)])]),e("div",null,[e("label",Ki,o(t(Ye)==="in"?"Sumber Uang":"Penerima Uang"),1),E(e("input",{"onUpdate:modelValue":s[50]||(s[50]=l=>g(Je)?Je.value=l:null),type:"text",class:"w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-emerald-500 focus:outline-none",placeholder:"Masukkan nama"},null,512),[[W,t(Je)]])]),t(Ye)==="out"?(r(),d("div",Fi,[s[180]||(s[180]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"Keterangan",-1)),E(e("input",{"onUpdate:modelValue":s[51]||(s[51]=l=>g(Xe)?Xe.value=l:null),type:"text",class:"w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-emerald-500 focus:outline-none",placeholder:"Masukkan keterangan"},null,512),[[W,t(Xe)]])])):b("",!0),e("div",null,[s[181]||(s[181]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"Nominal",-1)),e("input",{value:t(z),onInput:s[52]||(s[52]=(...l)=>t(xt)&&t(xt)(...l)),type:"text",inputmode:"numeric",class:"w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-emerald-500 focus:outline-none",placeholder:"Rp 0"},null,40,qi)]),e("div",zi,[e("button",{onClick:s[53]||(s[53]=(...l)=>t(Yt)&&t(Yt)(...l)),class:"flex-1 px-4 py-3 rounded-xl border border-slate-200 text-slate-600 font-semibold hover:bg-slate-50 transition-all"}," Batal "),e("button",{onClick:s[54]||(s[54]=(...l)=>t(Ne)&&t(Ne)(...l)),disabled:t(R),class:"flex-1 px-4 py-3 rounded-xl bg-emerald-600 text-white font-semibold hover:bg-emerald-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},o(t(R)?"Menyimpan...":"Simpan"),9,Gi)])])]),_:1},8,["modelValue","title"]),S(P,{modelValue:t(De),"onUpdate:modelValue":s[57]||(s[57]=l=>g(De)?De.value=l:null),title:t(ge)==="in"?"Riwayat Uang Masuk":"Riwayat Uang Keluar",width:"90%",style:{"max-width":"420px"},"close-on-click-modal":!1},{default:h(()=>[e("div",Li,[e("div",Qi,[e("div",Ei,[e("div",Wi,o(t(it)==="last"?"Shift Terakhir":"Shift Aktif"),1),e("div",Yi,o(t(ge)==="in"?"Uang Masuk":"Uang Keluar"),1)]),e("div",Ji,o(t(m)(t(Os))),1)]),e("div",Xi,[t(Et).length===0?(r(),d("div",Zi," Belum ada riwayat ")):(r(),d("div",ed,[(r(!0),d(Q,null,te(t(Et),l=>(r(),d("div",{key:l.id,class:"flex items-center justify-between px-4 py-3 text-sm text-slate-700"},[e("span",td,o(l.name),1),e("span",sd,o(t(m)(l.amount)),1)]))),128))]))]),e("button",{onClick:s[56]||(s[56]=(...l)=>t(Bt)&&t(Bt)(...l)),class:"px-4 py-3 rounded-xl border border-slate-200 text-slate-600 font-semibold hover:bg-slate-50 transition-all"}," Tutup ")])]),_:1},8,["modelValue","title"]),S(P,{modelValue:t(O),"onUpdate:modelValue":s[62]||(s[62]=l=>g(O)?O.value=l:null),title:"Split Bill",width:"90%",style:{"max-width":"500px"},"close-on-click-modal":!1},{default:h(()=>[t(f)?(r(),d("div",ad,[e("div",ld,[e("div",od,[s[182]||(s[182]=e("div",{class:"text-sm text-slate-500"},"Total Tagihan",-1)),e("div",nd,o(t(m)(t(ee)(t(f).order))),1)]),e("div",rd,[s[183]||(s[183]=e("div",{class:"text-sm text-slate-500"},"Total Split",-1)),e("div",id,o(t(m)(t(tt))),1)]),e("div",dd,[s[184]||(s[184]=e("div",{class:"text-sm text-slate-500"},"Sisa Belum Dibayar",-1)),e("div",ud,o(t(m)(t(ee)(t(f).order))),1)])]),e("div",cd,[s[185]||(s[185]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"Pilih Item dan Jumlah",-1)),e("div",md,[(r(!0),d(Q,null,te(t(et),l=>(r(),d("div",{key:l.id,class:"flex items-center justify-between px-3 py-2 gap-3"},[e("div",xd,[e("div",pd,o(l.product_name),1),e("div",vd,o(l.qty)+" x "+o(t(m)(l.price)),1)]),e("div",bd,[e("button",{type:"button",class:"h-8 w-8 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50 disabled:opacity-40 disabled:cursor-not-allowed",disabled:l.qty<=0||t(Ut)(l.id)===0,onClick:M=>t(vt)(l,-1)}," - ",8,fd),e("input",{value:t(Ut)(l.id),onInput:M=>t(Rs)(l,M),type:"number",min:"0",max:l.qty,disabled:l.qty<=0,class:"w-16 px-2 py-2 rounded-lg border border-slate-200 text-center text-sm font-semibold text-slate-700 focus:border-emerald-500 focus:outline-none disabled:opacity-40 disabled:cursor-not-allowed"},null,40,gd),e("button",{type:"button",class:"h-8 w-8 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50 disabled:opacity-40 disabled:cursor-not-allowed",disabled:l.qty<=0||t(Ut)(l.id)>=l.qty,onClick:M=>t(vt)(l,1)}," + ",8,hd)])]))),128))]),t(ut)?(r(),d("div",yd," Total split melebihi sisa tagihan ")):b("",!0)]),e("div",_d,[s[186]||(s[186]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"Metode Pembayaran",-1)),e("div",wd,[(r(!0),d(Q,null,te(t(de),l=>(r(),d("button",{key:l.value,onClick:M=>re.value=l.value,class:D(t(os)(l.value,t(re)===l.value))},o(l.label),11,kd))),128))])]),e("div",Md,[s[188]||(s[188]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"Jumlah Bayar",-1)),e("div",Cd,[e("input",{value:t(kt),onInput:s[58]||(s[58]=(...l)=>t(Xt)&&t(Xt)(...l)),type:"text",inputmode:"numeric",placeholder:"Rp 0",class:"flex-1 px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-emerald-500 focus:outline-none"},null,40,Td),e("button",{type:"button",onClick:s[59]||(s[59]=(...l)=>t(Zt)&&t(Zt)(...l)),class:"px-4 py-3 rounded-xl border border-slate-200 text-slate-600 font-semibold hover:bg-slate-50 transition-all"}," Uang Pas ")]),e("div",Sd,[s[187]||(s[187]=e("span",null,"Kembalian",-1)),e("span",Pd,o(t(m)(t(ct))),1)])]),e("div",Id,[s[189]||(s[189]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"Catatan (Opsional)",-1)),E(e("textarea",{"onUpdate:modelValue":s[60]||(s[60]=l=>g(We)?We.value=l:null),class:"w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-emerald-500 focus:outline-none",rows:"2",placeholder:"Catatan pembayaran..."},null,512),[[W,t(We)]])]),e("button",{onClick:s[61]||(s[61]=(...l)=>t(vs)&&t(vs)(...l)),disabled:t(_e)||!t(re)||t(tt)<=0||t(ut),class:"w-full px-4 py-3 rounded-xl bg-gradient-to-r from-emerald-600 to-emerald-500 text-white font-semibold hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"},o(t(_e)?"Memproses...":"Proses Pembayaran"),9,jd)])):b("",!0)]),_:1},8,["modelValue"]),S(P,{modelValue:t(ve),"onUpdate:modelValue":s[68]||(s[68]=l=>g(ve)?ve.value=l:null),title:"Void Order",width:"90%",style:{"max-width":"420px"},"close-on-click-modal":!1},{default:h(()=>[t(f)?(r(),d("div",Vd,[e("div",Bd,[e("div",Dd,[s[190]||(s[190]=e("div",{class:"text-sm text-slate-500"},"Total Tagihan",-1)),e("div",Ad,o(t(m)(t(rs)(t(f).order))),1)])]),e("div",null,[s[191]||(s[191]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"PIN Manager",-1)),E(e("input",{"onUpdate:modelValue":s[63]||(s[63]=l=>g(Ce)?Ce.value=l:null),type:"text",inputmode:"numeric",pattern:"[0-9]{4}",maxlength:"4",minlength:"4",onInput:s[64]||(s[64]=(...l)=>t(gs)&&t(gs)(...l)),class:"w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-emerald-500 focus:outline-none",placeholder:"Masukkan PIN 4 digit"},null,544),[[W,t(Ce)]])]),e("div",null,[s[192]||(s[192]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"Alasan (Opsional)",-1)),E(e("textarea",{"onUpdate:modelValue":s[65]||(s[65]=l=>g(fe)?fe.value=l:null),class:"w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-emerald-500 focus:outline-none",rows:"2",placeholder:"Alasan void..."},null,512),[[W,t(fe)]])]),e("div",Od,[e("button",{onClick:s[66]||(s[66]=(...l)=>t(Ft)&&t(Ft)(...l)),class:"flex-1 px-4 py-3 rounded-xl border border-slate-200 text-slate-600 font-semibold hover:bg-slate-50 transition-all"}," Batal "),e("button",{onClick:s[67]||(s[67]=(...l)=>t(hs)&&t(hs)(...l)),disabled:t(Te)||t(Ce).length!==4,class:"flex-1 px-4 py-3 rounded-xl bg-red-600 text-white font-semibold hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},o(t(Te)?"Memproses...":"Void Order"),9,Ud)])])):b("",!0)]),_:1},8,["modelValue"]),S(P,{modelValue:t(U),"onUpdate:modelValue":s[74]||(s[74]=l=>g(U)?U.value=l:null),title:"Batalkan Transaksi",width:"90%",style:{"max-width":"420px"},"close-on-click-modal":!1},{default:h(()=>[t(Se)?(r(),d("div",Nd,[e("div",Hd,[e("div",Rd,[s[193]||(s[193]=e("div",{class:"text-sm text-slate-500"},"Total Transaksi",-1)),e("div",$d,o(t(m)(t(Se).total_amount)),1)])]),e("div",null,[s[194]||(s[194]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"PIN Manager",-1)),E(e("input",{"onUpdate:modelValue":s[69]||(s[69]=l=>g(Pe)?Pe.value=l:null),type:"text",inputmode:"numeric",pattern:"[0-9]{4}",maxlength:"4",minlength:"4",onInput:s[70]||(s[70]=(...l)=>t(_s)&&t(_s)(...l)),class:"w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-emerald-500 focus:outline-none",placeholder:"Masukkan PIN 4 digit"},null,544),[[W,t(Pe)]])]),e("div",null,[s[195]||(s[195]=e("label",{class:"block text-sm font-semibold text-slate-600 mb-2"},"Alasan (Opsional)",-1)),E(e("textarea",{"onUpdate:modelValue":s[71]||(s[71]=l=>g(Ie)?Ie.value=l:null),class:"w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-emerald-500 focus:outline-none",rows:"2",placeholder:"Alasan pembatalan..."},null,512),[[W,t(Ie)]])]),e("div",Kd,[e("button",{onClick:s[72]||(s[72]=(...l)=>t(ys)&&t(ys)(...l)),class:"flex-1 px-4 py-3 rounded-xl border border-slate-200 text-slate-600 font-semibold hover:bg-slate-50 transition-all"}," Batal "),e("button",{onClick:s[73]||(s[73]=(...l)=>t(ft)&&t(ft)(...l)),disabled:t(X)||t(Pe).length!==4,class:"flex-1 px-4 py-3 rounded-xl bg-red-600 text-white font-semibold hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},o(t(X)?"Memproses...":"Batalkan"),9,Fd)])])):b("",!0)]),_:1},8,["modelValue"]),S(P,{modelValue:t(Ge),"onUpdate:modelValue":s[77]||(s[77]=l=>g(Ge)?Ge.value=l:null),title:"Detail Struk",width:"90%",style:{"max-width":"520px"},"close-on-click-modal":!1},{default:h(()=>[t(ie)?(r(),d("div",qd,[...s[196]||(s[196]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"},null,-1)])])):t(j)?(r(),d("div",zd,[e("div",Gd,[e("div",Ld,[s[208]||(s[208]=e("div",{class:"absolute inset-0 opacity-5 pointer-events-none",style:{"background-image":"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.03) 2px, rgba(0,0,0,0.03) 4px)"}},null,-1)),e("div",Qd,[e("div",Ed,o((t(C).outlet_name||"Outlet").toUpperCase()),1),t(C).outlet_address?(r(),d("div",Wd,o(t(C).outlet_address),1)):b("",!0),t(C).outlet_phone?(r(),d("div",Yd,o(t(C).outlet_phone),1)):b("",!0),s[201]||(s[201]=e("div",{class:"my-2 border-t border-dashed border-slate-400"},null,-1)),e("div",Jd,[e("div",null,"No. Struk : TRX-"+o(t(j).order?.id||t(I)?.order_id||t(I)?.id),1),e("div",null,"Tanggal : "+o(t(ce)(t(I)?.created_at||t(j).order?.created_at)),1),t(j).order?.table_number?(r(),d("div",Xd,"Meja : #"+o(t(j).order.table_number),1)):b("",!0),t(j).order?.customer_name?(r(),d("div",Zd,"Customer : "+o(t(j).order.customer_name),1)):b("",!0),t(j).order?.waiter_name?(r(),d("div",eu,"Waiter : "+o(t(j).order.waiter_name),1)):b("",!0)]),s[202]||(s[202]=e("div",{class:"my-2 border-t border-dashed border-slate-400"},null,-1)),s[203]||(s[203]=e("div",{class:"grid gap-1 font-semibold uppercase text-slate-600 text-[9px] grid-cols-[1fr,28px,60px,70px]"},[e("span",null,"ITEM"),e("span",{class:"text-center"},"QTY"),e("span",{class:"text-right"},"HARGA"),e("span",{class:"text-right"},"TOTAL")],-1)),s[204]||(s[204]=e("div",{class:"my-1 border-t border-dashed border-slate-400"},null,-1)),e("div",tu,[(r(!0),d(Q,null,te(t(Is),l=>(r(),d("div",{key:l.id||l.product_id||l.product_name,class:"grid gap-1 grid-cols-[1fr,28px,60px,70px]"},[e("span",su,o(l.product_name),1),e("span",au,o(l.qty),1),e("span",lu,o(t(T)(t(Vt)(l))),1),e("span",ou,o(t(T)(t(Wt)(l))),1)]))),128))]),s[205]||(s[205]=e("div",{class:"my-2 border-t border-dashed border-slate-400"},null,-1)),e("div",nu,[e("div",ru,[s[197]||(s[197]=e("span",null,"Subtotal",-1)),e("span",null,o(t(T)(t(js))),1)]),t(Gt).length?(r(),d("div",iu,[(r(!0),d(Q,null,te(t(Gt),l=>(r(),d("div",{key:l.name,class:"flex justify-between"},[e("span",null,o(l.name),1),e("span",null,o(t(T)(l.amount)),1)]))),128))])):b("",!0),e("div",du,[s[198]||(s[198]=e("span",null,"TOTAL",-1)),e("span",null,o(t(T)(t(Vs))),1)])]),s[206]||(s[206]=e("div",{class:"my-2 border-t border-dashed border-slate-400"},null,-1)),e("div",uu,[e("div",cu,[s[199]||(s[199]=e("span",null,"Bayar",-1)),e("span",null,o(t(T)(t(Ct))),1)]),e("div",mu,[s[200]||(s[200]=e("span",null,"Kembalian",-1)),e("span",null,o(t(T)(t(Bs))),1)])]),s[207]||(s[207]=e("div",{class:"my-2 border-t border-dashed border-slate-400"},null,-1)),t(C).receipt_footer?(r(),d("div",xu,o(t(C).receipt_footer),1)):b("",!0),t(C).social_media?(r(),d("div",pu,o(t(C).social_media),1)):b("",!0)])])]),t(I)?.status==="cancelled"?(r(),d("div",vu," Transaksi dibatalkan. Cetak ulang struk dinonaktifkan. ")):b("",!0),e("div",bu,[e("button",{onClick:s[75]||(s[75]=(...l)=>t(ws)&&t(ws)(...l)),class:"flex-1 px-4 py-3 rounded-xl border border-slate-200 text-slate-600 font-semibold hover:bg-slate-50 transition-all"}," Tutup "),e("button",{onClick:s[76]||(s[76]=(...l)=>t(ks)&&t(ks)(...l)),disabled:t(je)||t(I)?.status==="cancelled",class:"flex-1 px-4 py-3 rounded-xl bg-emerald-600 text-white font-semibold hover:bg-emerald-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},o(t(je)?"Mencetak...":"Cetak Ulang"),9,fu)])])):b("",!0)]),_:1},8,["modelValue"])])}}};export{Mu as default};
