import{Q as b,R as P,U as w,V as D,W as F,X as T,Z as z,_ as L,$ as V,a0 as K,a1 as Y,a2 as Q}from"./vendor-BgxNQcjb.js";var v={exports:{}},k,E;function U(){if(E)return k;E=1;var d=P(),l=b()("socket.io-client:url");k=h;function h(r,a){var s=r;a=a||typeof location<"u"&&location,r==null&&(r=a.protocol+"//"+a.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=a.protocol+r:r=a.host+r),/^(https?|wss?):\/\//.test(r)||(l("protocol-less url %s",r),typeof a<"u"?r=a.protocol+"//"+r:r="https://"+r),l("parse %s",r),s=d(r)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";var c=s.host.indexOf(":")!==-1,f=c?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+f+":"+s.port,s.href=s.protocol+"://"+f+(a&&a.port===s.port?"":":"+s.port),s}return k}var q={exports:{}},_,R;function I(){if(R)return _;R=1,_=d;function d(l,h,r){return l.on(h,r),{destroy:function(){l.removeListener(h,r)}}}return _}var S;function M(){return S||(S=1,(function(d,l){var h=w(),r=D(),a=z(),s=I(),c=T(),f=b()("socket.io-client:socket"),g=L(),u=F();d.exports=n;var i={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},t=r.prototype.emit;function n(e,o,p){this.io=e,this.nsp=o,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},p&&p.query&&(this.query=p.query),this.io.autoConnect&&this.open()}r(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",c(this,"onopen")),s(e,"packet",c(this,"onpacket")),s(e,"close",c(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.reconnecting||this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},n.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},n.prototype.emit=function(e){if(i.hasOwnProperty(e))return t.apply(this,arguments),this;var o=a(arguments),p={type:(this.flags.binary!==void 0?this.flags.binary:u(o))?h.BINARY_EVENT:h.EVENT,data:o};return p.options={},p.options.compress=!this.flags||this.flags.compress!==!1,typeof o[o.length-1]=="function"&&(f("emitting packet with ack id %d",this.ids),this.acks[this.ids]=o.pop(),p.id=this.ids++),this.connected?this.packet(p):this.sendBuffer.push(p),this.flags={},this},n.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},n.prototype.onopen=function(){if(f("transport is open - connecting"),this.nsp!=="/")if(this.query){var e=typeof this.query=="object"?g.encode(this.query):this.query;f("sending connect packet with query %s",e),this.packet({type:h.CONNECT,query:e})}else this.packet({type:h.CONNECT})},n.prototype.onclose=function(e){f("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},n.prototype.onpacket=function(e){var o=e.nsp===this.nsp,p=e.type===h.ERROR&&e.nsp==="/";if(!(!o&&!p))switch(e.type){case h.CONNECT:this.onconnect();break;case h.EVENT:this.onevent(e);break;case h.BINARY_EVENT:this.onevent(e);break;case h.ACK:this.onack(e);break;case h.BINARY_ACK:this.onack(e);break;case h.DISCONNECT:this.ondisconnect();break;case h.ERROR:this.emit("error",e.data);break}},n.prototype.onevent=function(e){var o=e.data||[];f("emitting event %j",o),e.id!=null&&(f("attaching ack callback to event"),o.push(this.ack(e.id))),this.connected?t.apply(this,o):this.receiveBuffer.push(o)},n.prototype.ack=function(e){var o=this,p=!1;return function(){if(!p){p=!0;var y=a(arguments);f("sending ack %j",y),o.packet({type:u(y)?h.BINARY_ACK:h.ACK,id:e,data:y})}}},n.prototype.onack=function(e){var o=this.acks[e.id];typeof o=="function"?(f("calling ack %s with %j",e.id,e.data),o.apply(this,e.data),delete this.acks[e.id]):f("bad ack %s",e.id)},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emit("connect")},n.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)t.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){f("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&(f("performing disconnect (%s)",this.nsp),this.packet({type:h.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},n.prototype.compress=function(e){return this.flags.compress=e,this},n.prototype.binary=function(e){return this.flags.binary=e,this}})(q)),q.exports}var A,x;function N(){if(x)return A;x=1;var d=V(),l=M(),h=D(),r=w(),a=I(),s=T(),c=b()("socket.io-client:manager"),f=Y(),g=K(),u=Object.prototype.hasOwnProperty;A=i;function i(t,n){if(!(this instanceof i))return new i(t,n);t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.nsps={},this.subs=[],this.opts=n,this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(n.randomizationFactor||.5),this.backoff=new g({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var e=n.parser||r;this.encoder=new e.Encoder,this.decoder=new e.Decoder,this.autoConnect=n.autoConnect!==!1,this.autoConnect&&this.open()}return i.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)u.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},i.prototype.updateSocketIds=function(){for(var t in this.nsps)u.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},i.prototype.generateId=function(t){return(t==="/"?"":t+"#")+this.engine.id},h(i.prototype),i.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},i.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},i.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},i.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},i.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},i.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},i.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()},i.prototype.open=i.prototype.connect=function(t,n){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=d(this.uri,this.opts);var e=this.engine,o=this;this.readyState="opening",this.skipReconnect=!1;var p=a(e,"open",function(){o.onopen(),t&&t()}),y=a(e,"error",function(B){if(c("connect_error"),o.cleanup(),o.readyState="closed",o.emitAll("connect_error",B),t){var C=new Error("Connection error");C.data=B,t(C)}else o.maybeReconnectOnOpen()});if(this._timeout!==!1){var m=this._timeout;c("connect attempt will timeout after %d",m),m===0&&p.destroy();var j=setTimeout(function(){c("connect attempt timed out after %d",m),p.destroy(),e.close(),e.emit("error","timeout"),o.emitAll("connect_timeout",m)},m);this.subs.push({destroy:function(){clearTimeout(j)}})}return this.subs.push(p),this.subs.push(y),this},i.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(a(t,"data",s(this,"ondata"))),this.subs.push(a(t,"ping",s(this,"onping"))),this.subs.push(a(t,"pong",s(this,"onpong"))),this.subs.push(a(t,"error",s(this,"onerror"))),this.subs.push(a(t,"close",s(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",s(this,"ondecoded")))},i.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},i.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},i.prototype.ondata=function(t){this.decoder.add(t)},i.prototype.ondecoded=function(t){this.emit("packet",t)},i.prototype.onerror=function(t){c("error",t),this.emitAll("error",t)},i.prototype.socket=function(t,n){var e=this.nsps[t];if(!e){e=new l(this,t,n),this.nsps[t]=e;var o=this;e.on("connecting",p),e.on("connect",function(){e.id=o.generateId(t)}),this.autoConnect&&p()}function p(){~f(o.connecting,e)||o.connecting.push(e)}return e},i.prototype.destroy=function(t){var n=f(this.connecting,t);~n&&this.connecting.splice(n,1),!this.connecting.length&&this.close()},i.prototype.packet=function(t){c("writing packet %j",t);var n=this;t.query&&t.type===0&&(t.nsp+="?"+t.query),n.encoding?n.packetBuffer.push(t):(n.encoding=!0,this.encoder.encode(t,function(e){for(var o=0;o<e.length;o++)n.engine.write(e[o],t.options);n.encoding=!1,n.processPacketQueue()}))},i.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},i.prototype.cleanup=function(){c("cleanup");for(var t=this.subs.length,n=0;n<t;n++){var e=this.subs.shift();e.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},i.prototype.close=i.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},i.prototype.onclose=function(t){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},i.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var n=this.backoff.duration();c("will wait %dms before reconnect attempt",n),this.reconnecting=!0;var e=setTimeout(function(){t.skipReconnect||(c("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),!t.skipReconnect&&t.open(function(o){o?(c("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",o.data)):(c("reconnect success"),t.onreconnect())}))},n);this.subs.push({destroy:function(){clearTimeout(e)}})}},i.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)},A}var O;function H(){return O||(O=1,(function(d,l){var h=U(),r=w(),a=N(),s=b()("socket.io-client");d.exports=l=f;var c=l.managers={};function f(g,u){typeof g=="object"&&(u=g,g=void 0),u=u||{};var i=h(g),t=i.source,n=i.id,e=i.path,o=c[n]&&e in c[n].nsps,p=u.forceNew||u["force new connection"]||u.multiplex===!1||o,y;return p?(s("ignoring socket cache for %s",t),y=a(t,u)):(c[n]||(s("new io instance for %s",t),c[n]=a(t,u)),y=c[n]),i.query&&!u.query&&(u.query=i.query),y.socket(i.path,u)}l.protocol=r.protocol,l.connect=f,l.Manager=N(),l.Socket=M()})(v,v.exports)),v.exports}var J=H();const X=Q(J);export{X as i};
