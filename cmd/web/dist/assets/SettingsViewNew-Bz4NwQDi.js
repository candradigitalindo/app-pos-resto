import{w as we,G as ye,B as n,J as o,M as t,aY as K,_ as m,U as J,al as fe,P as f,$ as r,Z as b,C as Ce,a7 as be,X as h,au as j,a$ as _e,aA as he,O as je,r as c,f as F,b0 as Me,K as ge,L as Y,aW as $e}from"./vendor-vue-rrJoI5pD.js";import{a as _,u as Pe}from"./index-B3PJhqYe.js";import{a as ze,_ as Be}from"./Pagination-DIW_Ff4w.js";import"./vendor-BgxNQcjb.js";import"./vendor-element-Bmt4lDx1.js";import"./vendor-socket-DmpRiKjA.js";const Se={class:"space-y-6"},Te={key:0,class:"card"},He={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Ae={key:0,class:"mt-6 flex items-center justify-center gap-3 py-8 text-slate-500"},Ve={key:1,class:"mt-6 rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50 p-8 text-center"},Le={key:2,class:"mt-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-3"},Ne={class:"flex items-center justify-between"},Ue={class:"mt-3 text-base font-semibold text-slate-900"},Ie={class:"mt-3 space-y-2"},Ke={class:"flex items-center gap-2 text-sm"},Ge={class:"font-mono font-semibold text-slate-900"},Ee={class:"flex items-center gap-2 text-sm"},De={class:"font-mono font-semibold text-slate-900"},Fe={class:"flex items-center gap-2 text-sm"},Oe={class:"font-semibold text-slate-900"},Re={key:0,class:"mt-3 rounded-xl border border-amber-200 bg-amber-50 p-3 text-xs text-amber-800"},Qe={class:"mt-1 text-amber-700"},qe={class:"mt-1 text-amber-700"},We={key:1,class:"mt-3 rounded-xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700"},Ye={class:"flex items-center justify-between"},Je={class:"text-[11px] text-slate-500"},Xe={class:"mt-2 space-y-2"},Ze={class:"text-slate-700"},et={class:"text-[11px] text-slate-500"},tt={class:"text-[11px] text-slate-500"},st={class:"text-[11px] text-slate-500"},at=["onClick","disabled"],lt={class:"mt-4 flex items-center gap-2"},nt=["onClick"],ot=["onClick","title"],it={class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},rt={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"},dt={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"},ut={key:2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},pt=["onClick","disabled"],ct=["onClick"],vt={key:1,class:"card"},mt={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},xt={class:"flex items-center gap-2"},ft={class:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600"},bt=["disabled"],gt={key:0,class:"mt-4 flex items-center justify-center gap-3 py-6 text-slate-500"},_t={key:1,class:"mt-4 rounded-2xl border border-red-200 bg-red-50 p-4 text-sm text-red-600"},ht={key:2,class:"mt-4 rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50 p-6 text-center text-sm text-slate-500"},kt={key:3,class:"mt-4 space-y-3"},yt={class:"space-y-1"},wt={class:"text-sm font-semibold text-slate-800"},Ct={class:"text-sm text-slate-700"},jt={class:"text-xs text-slate-500"},Mt={class:"text-xs text-slate-500"},$t={class:"text-xs text-slate-500"},Pt=["onClick","disabled"],zt={class:"flex items-center justify-between border-b border-slate-100 px-4 sm:px-6 py-3 sm:py-4 sticky top-0 bg-white z-10"},Bt={class:"flex items-center gap-2 sm:gap-3"},St={class:"text-base sm:text-lg font-semibold text-slate-900"},Tt={class:"grid gap-4 sm:gap-6 p-4 sm:p-6 lg:grid-cols-[380px,1fr] overflow-y-auto flex-1"},Ht={class:"grid gap-4 sm:grid-cols-2"},At={class:"mt-2 flex items-center gap-2 text-sm text-slate-600"},Vt={key:0,class:"rounded-2xl border border-red-200 bg-red-50 p-3 text-sm text-red-600"},Lt={class:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2"},Nt=["disabled"],Ut={class:"hidden lg:block relative space-y-4 pl-6 before:absolute before:left-0 before:top-0 before:bottom-0 before:w-px before:bg-gradient-to-b before:from-transparent before:via-slate-200 before:to-transparent"},It={class:"flex justify-center"},Kt={key:0,class:"text-center text-slate-600"},Gt={key:1,class:"text-center text-slate-600"},Et={class:"flex items-center gap-2"},Dt={class:"mt-2"},Ft={class:"mt-1.5 font-semibold"},Ot={class:"mt-2 text-sm text-slate-500"},Rt={class:"mt-4 flex items-center gap-2"},Qt=["disabled"],ke={__name:"PrinterManagement",props:{showPrinters:{type:Boolean,default:!0},showFailedLogs:{type:Boolean,default:!0}},emits:["success","error"],setup(G,{emit:oe}){const O=c([]),N=c(!1),g=c(!1),H=c(!1),$=c(!1),P=c(!1),z=c(null),A=c(""),k=c(null),y=c(null),B=c([]),S=c(!1),w=c(""),C=c(1),v=c(10),d=c({outlet_name:"Outlet",outlet_address:"Alamat Outlet",outlet_phone:"Telp: -",social_media:"",receipt_footer:"Terima kasih atas kunjungan Anda!"}),i=c({id:null,name:"",ip_address:"",port:9100,printer_type:"",paper_size:"80mm",is_active_bool:!0,connection_timeout:3,write_timeout:5,retry_attempts:2,print_density:50,print_speed:"normal",cut_mode:"partial",enable_beep:1,auto_cut:1,charset:"latin"}),X=G,u=oe,M=async()=>{try{N.value=!0;const s=await _.get("/printers");O.value=s.data.data||[]}catch(s){console.error("Failed to fetch printers:",s),u("error","Gagal memuat data printer")}finally{N.value=!1}},U=async()=>{try{const s=await _.get("/config/outlet");s.data.data&&(d.value=s.data.data)}catch(s){console.error("Failed to fetch outlet config:",s)}},l=async()=>{try{S.value=!0,w.value="";const s=await _.get("/print/queue",{params:{status:"failed"}});if(s.data?.success===!1){B.value=[],w.value=s.data?.message||"Gagal memuat log cetak",u("error",w.value);return}const e=s.data?.data;B.value=Array.isArray(e)?e:[]}catch(s){console.error("Failed to fetch print queue:",s),B.value=[];const e=s.response?.data?.message||s.response?.data?.error||"Gagal memuat log cetak";w.value=e,u("error",e)}finally{S.value=!1}},T=F(()=>B.value.length),x=F(()=>T.value===0?1:Math.ceil(T.value/v.value)),I=F(()=>{const s=x.value,a=(Math.min(C.value,s)-1)*v.value;return B.value.slice(a,a+v.value)}),R=s=>{C.value=s};we([T,v],()=>{const s=x.value;C.value>s&&(C.value=s)});const E=F(()=>{const s=new Map;for(const e of B.value){if(!e?.printer_id)continue;const a=s.get(e.printer_id);if(!a){s.set(e.printer_id,e);continue}const p=new Date(a.created_at).getTime(),V=new Date(e.created_at).getTime();!Number.isNaN(V)&&(Number.isNaN(p)||V>p)&&s.set(e.printer_id,e)}return s}),L=s=>E.value.get(s)||null,ie=F(()=>{const s=new Map;for(const e of B.value){if(!e?.printer_id)continue;const a=s.get(e.printer_id)||[];a.push(e),s.set(e.printer_id,a)}for(const e of s.values())e.sort((a,p)=>new Date(p.created_at).getTime()-new Date(a.created_at).getTime());return s}),Q=s=>ie.value.get(s)||[],q=s=>{if(!s)return"Gagal mencetak";const e=String(s).toLowerCase();return e.includes("timeout")?"Koneksi ke printer timeout":e.includes("refused")?"Koneksi ditolak oleh printer":e.includes("no route to host")||e.includes("unreachable")?"Printer tidak terjangkau di jaringan":e.includes("connection")?"Koneksi ke printer bermasalah":s},re=s=>{const e=L(s);return e?q(e.error_message):""},W=s=>{if(!s)return"-";const e=new Date(s);return Number.isNaN(e.getTime())?s:new Intl.DateTimeFormat("id-ID",{dateStyle:"medium",timeStyle:"short"}).format(e)},Z=s=>({kitchen:"Kitchen",bar:"Bar",cashier:"Kasir",checker:"Checker",struk:"Struk"})[s]||s,ee=s=>{const e=[],a=s?.printer_name||s?.printer_id;a&&e.push(a);const p=s?.printer_type?Z(s.printer_type):"";p&&p!==a&&e.push(p);const V=s?.printer_ip?s?.printer_port?`${s.printer_ip}:${s.printer_port}`:s.printer_ip:"";return V&&e.push(V),e.length?e.join(" • "):"-"},te=s=>{if(s?.content_summary)return s.content_summary;const e=[];return s?.content_type&&e.push(s.content_type),s?.receipt_number&&e.push(s.receipt_number),s?.table_number&&s.table_number!=="-"&&e.push(`Meja ${s.table_number}`),s?.order_id&&e.push(`Order ${s.order_id}`),e.length?e.join(" • "):"-"},de=s=>s?.is_active?L(s.id)?"Bermasalah":"Aktif (Konfigurasi)":"Nonaktif",ue=s=>s?.is_active?L(s.id)?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",pe=()=>{i.value.printer_type==="kitchen"&&(i.value.print_speed="normal",i.value.print_density=55),i.value.printer_type==="bar"&&(i.value.print_speed="fast",i.value.print_density=45),i.value.printer_type==="cashier"&&(i.value.print_speed="normal",i.value.print_density=60)},ce=s=>{const e=(a,p)=>a==null?p:typeof a=="object"&&"Int64"in a?a.Int64||p:typeof a=="object"&&"String"in a?a.String||p:a||p;i.value={id:s.id,name:s.name,ip_address:s.ip_address,port:s.port,printer_type:s.printer_type,paper_size:s.paper_size||"80mm",is_active_bool:s.is_active===1,connection_timeout:e(s.connection_timeout,3),write_timeout:e(s.write_timeout,5),retry_attempts:e(s.retry_attempts,2),print_density:e(s.print_density,50),print_speed:e(s.print_speed,"normal"),cut_mode:e(s.cut_mode,"partial"),enable_beep:e(s.enable_beep,1),auto_cut:e(s.auto_cut,1),charset:e(s.charset,"latin")},$.value=!0},ve=()=>{i.value={id:null,name:"",ip_address:"",port:9100,printer_type:"",paper_size:"80mm",is_active_bool:!0,connection_timeout:3,write_timeout:5,retry_attempts:2,print_density:50,print_speed:"normal",cut_mode:"partial",enable_beep:1,auto_cut:1,charset:"latin"},A.value=""},D=()=>{H.value=!1,$.value=!1,ve()},se=async()=>{try{g.value=!0,A.value="";const s={name:i.value.name,ip_address:i.value.ip_address,port:i.value.port||9100,printer_type:i.value.printer_type,paper_size:i.value.paper_size||"80mm",is_active:i.value.is_active_bool?1:0,connection_timeout:i.value.connection_timeout||0,write_timeout:i.value.write_timeout||0,retry_attempts:i.value.retry_attempts||0,print_density:i.value.print_density||0,print_speed:i.value.print_speed||"",cut_mode:i.value.cut_mode||"",enable_beep:i.value.enable_beep||0,auto_cut:i.value.auto_cut||0,charset:i.value.charset||""};$.value?(await _.put(`/printers/${i.value.id}`,s),u("success","Printer berhasil diupdate")):(await _.post("/printers",s),u("success","Printer berhasil ditambahkan")),D(),await M()}catch(s){console.error("Failed to save printer:",s),console.error("Error response:",s.response?.data),A.value=s.response?.data?.message||s.response?.data?.error||"Gagal menyimpan printer"}finally{g.value=!1}},ae=async s=>{try{const e=s.is_active===1?0:1;await _.patch(`/printers/${s.id}/toggle`,{is_active:e}),u("success",`Printer ${e===1?"diaktifkan":"dinonaktifkan"}`),await M()}catch(e){console.error("Failed to toggle printer:",e),u("error","Gagal mengubah status printer")}},le=async s=>{try{k.value=s.id,await _.post(`/printers/${s.id}/test`),u("success",`Test print berhasil dikirim ke ${s.name}`)}catch(e){console.error("Failed to test print:",e);const a=e.response?.data?.message||e.response?.data?.error||"Gagal mengirim test print";u("error",a)}finally{k.value=null}},ne=async s=>{if(s?.id)try{y.value=s.id,await _.post(`/print/queue/${s.id}/retry`),u("success","Cetak ulang dikirim ke antrian"),await l()}catch(e){console.error("Failed to retry print queue:",e),u("error","Gagal cetak ulang")}finally{y.value=null}},me=s=>{z.value=s,P.value=!0},xe=async()=>{if(z.value)try{g.value=!0,await _.delete(`/printers/${z.value.id}`),u("success","Printer berhasil dihapus"),P.value=!1,await M()}catch(s){console.error("Failed to delete printer:",s),u("error","Gagal menghapus printer")}finally{g.value=!1,z.value=null}};return ye(()=>{X.showPrinters&&(M(),U()),X.showFailedLogs&&l()}),(s,e)=>(n(),o("div",Se,[G.showPrinters?(n(),o("div",Te,[t("div",He,[e[13]||(e[13]=K('<div class="flex items-center gap-3"><div class="flex h-12 w-12 items-center justify-center rounded-xl bg-purple-100"><svg class="h-6 w-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path></svg></div><div><h2 class="text-lg font-semibold text-slate-900">Printer LAN</h2><p class="text-sm text-slate-500">Kelola printer untuk kitchen, bar, dan cashier</p></div></div>',1)),t("button",{onClick:e[0]||(e[0]=a=>H.value=!0),class:"btn-primary flex items-center gap-2"},[...e[12]||(e[12]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),m(" Tambah Printer ",-1)])])]),N.value?(n(),o("div",Ae,[...e[14]||(e[14]=[t("div",{class:"h-6 w-6 animate-spin rounded-full border-2 border-slate-300 border-t-purple-600"},null,-1),t("p",null,"Memuat data printer...",-1)])])):O.value.length===0?(n(),o("div",Ve,[e[16]||(e[16]=t("svg",{class:"mx-auto h-16 w-16 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1)),e[17]||(e[17]=t("h3",{class:"mt-4 text-base font-semibold text-slate-900"},"Belum Ada Printer",-1)),e[18]||(e[18]=t("p",{class:"mt-2 text-sm text-slate-500"},"Tambahkan printer LAN untuk sistem cetak otomatis ke kitchen, bar, atau cashier",-1)),t("button",{onClick:e[1]||(e[1]=a=>H.value=!0),class:"btn-primary mt-4 flex items-center gap-2 mx-auto"},[...e[15]||(e[15]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),m(" Tambah Printer Pertama ",-1)])])])):(n(),o("div",Le,[(n(!0),o(J,null,fe(O.value,a=>(n(),o("div",{key:a.id,class:"group rounded-2xl border-2 border-slate-200 bg-white p-4 shadow-sm transition hover:border-purple-200 hover:shadow-md"},[t("div",Ne,[t("span",{class:f(["flex items-center gap-1.5 rounded-full px-3 py-1 text-xs font-semibold",ue(a)])},[e[19]||(e[19]=t("svg",{class:"h-3 w-3",fill:"currentColor",viewBox:"0 0 8 8"},[t("circle",{cx:"4",cy:"4",r:"3"})],-1)),m(" "+r(de(a)),1)],2),t("span",{class:f(["rounded-full px-3 py-1 text-xs font-semibold",a.printer_type==="kitchen"?"bg-emerald-100 text-emerald-700":a.printer_type==="bar"?"bg-indigo-100 text-indigo-700":"bg-amber-100 text-amber-700"])},r(Z(a.printer_type)),3)]),t("h3",Ue,r(a.name),1),t("div",Ie,[t("div",Ke,[e[20]||(e[20]=t("svg",{class:"h-4 w-4 flex-shrink-0 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})],-1)),e[21]||(e[21]=t("span",{class:"text-slate-500"},"IP:",-1)),t("span",Ge,r(a.ip_address),1)]),t("div",Ee,[e[22]||(e[22]=t("svg",{class:"h-4 w-4 flex-shrink-0 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),e[23]||(e[23]=t("span",{class:"text-slate-500"},"Port:",-1)),t("span",De,r(a.port),1)]),t("div",Fe,[e[24]||(e[24]=t("svg",{class:"h-4 w-4 flex-shrink-0 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e[25]||(e[25]=t("span",{class:"text-slate-500"},"Kertas:",-1)),t("span",Oe,r(a.paper_size||"80mm"),1)])]),L(a.id)?(n(),o("div",Re,[e[26]||(e[26]=t("div",{class:"font-semibold"},"Printer bermasalah",-1)),t("div",Qe,"Terakhir gagal: "+r(re(a.id)),1),t("div",qe,"Waktu: "+r(W(L(a.id).created_at)),1),e[27]||(e[27]=t("div",{class:"mt-2 text-amber-700"},"Saran: cek listrik, koneksi LAN/WiFi, IP/port, lalu coba Test Print.",-1))])):b("",!0),Q(a.id).length?(n(),o("div",We,[t("div",Ye,[e[28]||(e[28]=t("div",{class:"font-semibold text-slate-800"},"Log cetak gagal",-1)),t("div",Je,"Total: "+r(Q(a.id).length),1)]),t("div",Xe,[(n(!0),o(J,null,fe(Q(a.id).slice(0,3),p=>(n(),o("div",{key:p.id,class:"flex items-start justify-between gap-2 rounded-lg border border-slate-200 bg-white px-2 py-1.5"},[t("div",null,[t("div",Ze,r(q(p.error_message)),1),t("div",et,"Tujuan: "+r(ee(p)),1),t("div",tt,"Konten: "+r(te(p)),1),t("div",st,"Percobaan: "+r(p.retry_count)+" • "+r(W(p.created_at)),1)]),t("button",{onClick:V=>ne(p),class:"btn-secondary px-2 py-1 text-[11px]",disabled:y.value===p.id},r(y.value===p.id?"Mengulang...":"Cetak Ulang"),9,at)]))),128))])])):b("",!0),t("div",lt,[t("button",{onClick:p=>ce(a),class:"btn-secondary flex-1 flex items-center justify-center gap-1.5 px-3",title:"Edit"},[...e[29]||(e[29]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,nt),t("button",{onClick:p=>ae(a),class:"btn-secondary px-3",title:a.is_active?"Nonaktifkan":"Aktifkan"},[(n(),o("svg",it,[a.is_active?(n(),o("path",rt)):(n(),o("path",dt)),a.is_active?b("",!0):(n(),o("path",ut))]))],8,ot),t("button",{onClick:p=>le(a),class:"btn-secondary px-3",disabled:!a.is_active||k.value===a.id,title:"Test Print"},[(n(),o("svg",{class:f(["h-4 w-4",k.value===a.id?"animate-pulse":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[30]||(e[30]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"},null,-1)])],2))],8,pt),t("button",{onClick:p=>me(a),class:"btn-secondary px-3 hover:bg-red-50 hover:text-red-600",title:"Hapus"},[...e[31]||(e[31]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ct)])]))),128))]))])):b("",!0),G.showFailedLogs?(n(),o("div",vt,[t("div",mt,[e[32]||(e[32]=t("div",null,[t("h3",{class:"text-base sm:text-lg font-semibold text-slate-900"},"Log Cetak Gagal"),t("p",{class:"text-xs sm:text-sm text-slate-500"},"Riwayat antrian cetak dengan status gagal")],-1)),t("div",xt,[t("div",ft," Total: "+r(T.value),1),t("button",{onClick:l,class:"btn-secondary px-3 py-1 text-xs",disabled:S.value},r(S.value?"Memuat...":"Muat Ulang"),9,bt)])]),S.value?(n(),o("div",gt,[...e[33]||(e[33]=[t("div",{class:"h-5 w-5 animate-spin rounded-full border-2 border-slate-300 border-t-purple-600"},null,-1),t("span",null,"Memuat log cetak...",-1)])])):w.value?(n(),o("div",_t,r(w.value),1)):T.value===0?(n(),o("div",ht," Belum ada log cetak gagal ")):(n(),o("div",kt,[(n(!0),o(J,null,fe(I.value,a=>(n(),o("div",{key:a.id,class:"flex flex-col gap-2 rounded-2xl border border-slate-200 bg-white p-4 sm:flex-row sm:items-center sm:justify-between"},[t("div",yt,[t("div",wt,r(a.printer_name||a.printer_id),1),t("div",Ct,r(q(a.error_message)),1),t("div",jt,"Tujuan: "+r(ee(a)),1),t("div",Mt,"Konten: "+r(te(a)),1),t("div",$t,"Percobaan: "+r(a.retry_count)+" • "+r(W(a.created_at)),1)]),t("button",{onClick:p=>ne(a),class:"btn-secondary px-3 py-1.5 text-xs",disabled:y.value===a.id},r(y.value===a.id?"Mengulang...":"Cetak Ulang"),9,Pt)]))),128)),x.value>1?(n(),Ce(ze,{key:0,class:"mt-4","current-page":C.value,"total-pages":x.value,"total-items":T.value,"item-name":"log",onPageChange:R},null,8,["current-page","total-pages","total-items"])):b("",!0)]))])):b("",!0),G.showPrinters&&(H.value||$.value)?(n(),o("div",{key:2,class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-slate-900/60 sm:px-4",onClick:D},[t("div",{class:"w-full max-w-6xl rounded-t-3xl sm:rounded-3xl bg-white shadow-soft max-h-[90vh] sm:max-h-[85vh] overflow-hidden flex flex-col",onClick:e[8]||(e[8]=be(()=>{},["stop"]))},[t("div",zt,[t("div",Bt,[e[34]||(e[34]=t("div",{class:"flex h-8 w-8 sm:h-10 sm:w-10 items-center justify-center rounded-xl bg-purple-100"},[t("svg",{class:"h-5 w-5 sm:h-6 sm:w-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})])],-1)),t("h2",St,r($.value?"Edit Printer":"Tambah Printer Baru"),1)]),t("button",{onClick:D,class:"flex h-8 w-8 sm:h-9 sm:w-9 items-center justify-center rounded-lg bg-slate-100 text-slate-600 transition hover:bg-slate-200"},[...e[35]||(e[35]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Tt,[t("form",{onSubmit:be(se,["prevent"]),class:"space-y-4"},[t("div",null,[e[36]||(e[36]=t("label",{class:"text-sm font-semibold text-slate-700"},"Nama Printer *",-1)),h(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>i.value.name=a),type:"text",class:"input mt-2",placeholder:"Printer Kitchen 1",required:""},null,512),[[j,i.value.name]])]),t("div",Ht,[t("div",null,[e[37]||(e[37]=t("label",{class:"text-sm font-semibold text-slate-700"},"IP Address / Hostname *",-1)),h(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>i.value.ip_address=a),type:"text",class:"input mt-2",placeholder:"192.168.1.100 atau printer.local",required:""},null,512),[[j,i.value.ip_address]])]),t("div",null,[e[38]||(e[38]=t("label",{class:"text-sm font-semibold text-slate-700"},"Port",-1)),h(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>i.value.port=a),type:"number",class:"input mt-2",placeholder:"9100",min:"1",max:"65535"},null,512),[[j,i.value.port,void 0,{number:!0}]])])]),t("div",null,[e[40]||(e[40]=t("label",{class:"text-sm font-semibold text-slate-700"},"Tipe Printer *",-1)),h(t("select",{"onUpdate:modelValue":e[5]||(e[5]=a=>i.value.printer_type=a),onChange:pe,class:"input mt-2",required:""},[...e[39]||(e[39]=[K('<option value="">Pilih tipe printer</option><option value="kitchen">Kitchen</option><option value="bar">Bar</option><option value="cashier">Cashier</option><option value="checker">Checker</option><option value="struk">Struk</option>',6)])],544),[[_e,i.value.printer_type]])]),t("div",null,[e[42]||(e[42]=t("label",{class:"text-sm font-semibold text-slate-700"},"Ukuran Kertas *",-1)),h(t("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>i.value.paper_size=a),class:"input mt-2",required:""},[...e[41]||(e[41]=[t("option",{value:""},"Pilih ukuran kertas",-1),t("option",{value:"58mm"},"58mm",-1),t("option",{value:"80mm"},"80mm",-1)])],512),[[_e,i.value.paper_size]])]),t("label",At,[h(t("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=a=>i.value.is_active_bool=a),class:"h-4 w-4 accent-emerald-600"},null,512),[[he,i.value.is_active_bool]]),e[43]||(e[43]=m(" Aktifkan printer ",-1))]),A.value?(n(),o("div",Vt,r(A.value),1)):b("",!0),t("div",Lt,[t("button",{type:"button",onClick:D,class:"btn-secondary"},"Batal"),t("button",{type:"submit",class:"btn-primary",disabled:g.value},r(g.value?"Menyimpan...":"Simpan"),9,Nt)]),e[44]||(e[44]=t("div",{class:"rounded-2xl border border-slate-200 bg-slate-50 p-4 text-xs text-slate-600"},[t("strong",{class:"text-slate-800"},"Pengaturan Outlet"),t("p",{class:"mt-1"},[m("Nama outlet, alamat, kontak, sosial media, dan ucapan diatur di "),t("strong",null,"General Settings → Outlet Configuration")])],-1))],32),t("div",Ut,[e[62]||(e[62]=t("h3",{class:"text-sm font-semibold text-slate-700"},"Preview Hasil Cetak",-1)),t("div",It,[t("div",{class:"relative bg-white shadow-lg overflow-hidden",style:je({width:i.value.paper_size==="58mm"?"218px":"302px",maxHeight:"600px",overflowY:"auto"})},[e[59]||(e[59]=t("div",{class:"absolute inset-0 opacity-5 pointer-events-none",style:{"background-image":"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.03) 2px, rgba(0,0,0,0.03) 4px)"}},null,-1)),t("div",{class:f(["relative p-3 font-mono text-slate-900",i.value.paper_size==="58mm"?"text-[9px] leading-tight":"text-[11px] leading-relaxed"])},[t("div",{class:f(["text-center font-bold",i.value.paper_size==="58mm"?"text-[10px]":"text-xs"])},r(d.value.outlet_name.toUpperCase()),3),t("div",{class:f(["text-center text-slate-600",i.value.paper_size==="58mm"?"text-[8px]":"text-[10px]"])},r(d.value.outlet_address),3),t("div",{class:f(["text-center text-slate-600",i.value.paper_size==="58mm"?"text-[8px]":"text-[10px]"])},r(d.value.outlet_phone),3),e[53]||(e[53]=t("div",{class:"my-2 border-t border-dashed border-slate-400"},null,-1)),t("div",{class:f(i.value.paper_size==="58mm"?"space-y-0.5":"space-y-1")},[...e[45]||(e[45]=[t("div",null,"No. Struk : #TRX-001234",-1),t("div",null,"Tanggal : 28/01/2026 14:30",-1),t("div",null,"Meja : #5",-1),t("div",null,"Customer : Andi Wijaya",-1)])],2),e[54]||(e[54]=t("div",{class:"my-2 border-t border-dashed border-slate-400"},null,-1)),t("div",{class:f(["grid gap-1 font-semibold uppercase text-slate-600",i.value.paper_size==="58mm"?"grid-cols-[1fr,24px,38px,42px] text-[8px]":"grid-cols-[1fr,28px,50px,60px] text-[9px]"])},[...e[46]||(e[46]=[t("span",null,"ITEM",-1),t("span",{class:"text-center"},"QTY",-1),t("span",{class:"text-right"},"HARGA",-1),t("span",{class:"text-right"},"TOTAL",-1)])],2),e[55]||(e[55]=t("div",{class:"my-1 border-t border-dashed border-slate-400"},null,-1)),t("div",{class:f(["gap-1",i.value.paper_size==="58mm"?"space-y-1":"space-y-1.5"])},[t("div",{class:f(["grid gap-1",i.value.paper_size==="58mm"?"grid-cols-[1fr,24px,38px,42px]":"grid-cols-[1fr,28px,50px,60px]"])},[...e[47]||(e[47]=[t("span",null,"Nasi Goreng Spesial",-1),t("span",{class:"text-center"},"2",-1),t("span",{class:"text-right"},"17.500",-1),t("span",{class:"text-right"},"35.000",-1)])],2),t("div",{class:f(["grid gap-1",i.value.paper_size==="58mm"?"grid-cols-[1fr,24px,38px,42px]":"grid-cols-[1fr,28px,50px,60px]"])},[...e[48]||(e[48]=[t("span",null,"Es Teh Manis",-1),t("span",{class:"text-center"},"2",-1),t("span",{class:"text-right"},"4.000",-1),t("span",{class:"text-right"},"8.000",-1)])],2),t("div",{class:f(["grid gap-1",i.value.paper_size==="58mm"?"grid-cols-[1fr,24px,38px,42px]":"grid-cols-[1fr,28px,50px,60px]"])},[...e[49]||(e[49]=[t("span",null,"Ayam Goreng Kremes",-1),t("span",{class:"text-center"},"1",-1),t("span",{class:"text-right"},"25.000",-1),t("span",{class:"text-right"},"25.000",-1)])],2)],2),e[56]||(e[56]=t("div",{class:"my-2 border-t border-dashed border-slate-400"},null,-1)),t("div",{class:f(i.value.paper_size==="58mm"?"space-y-0.5":"space-y-1")},[e[51]||(e[51]=t("div",{class:"flex justify-between"},[t("span",null,"Subtotal"),t("span",null,"Rp 68.000")],-1)),e[52]||(e[52]=t("div",{class:"flex justify-between"},[t("span",null,"Pajak (10%)"),t("span",null,"Rp 6.800")],-1)),t("div",{class:f(["flex justify-between font-bold",i.value.paper_size==="58mm"?"text-[10px]":"text-xs"])},[...e[50]||(e[50]=[t("span",null,"Total",-1),t("span",null,"Rp 74.800",-1)])],2)],2),e[57]||(e[57]=t("div",{class:"my-2 border-t border-dashed border-slate-400"},null,-1)),d.value.receipt_footer?(n(),o("div",Kt,r(d.value.receipt_footer),1)):b("",!0),d.value.social_media?(n(),o("div",Gt,r(d.value.social_media),1)):b("",!0),e[58]||(e[58]=t("div",{class:"h-8"},null,-1))],2),e[60]||(e[60]=t("div",{class:"absolute bottom-0 left-0 right-0 h-3 bg-gradient-to-b from-white to-slate-200 opacity-50"},null,-1))],4)]),t("div",{class:f(["rounded-xl border-2 p-4 text-xs",i.value.paper_size==="58mm"?"border-indigo-200 bg-indigo-50 text-indigo-800":"border-amber-200 bg-amber-50 text-amber-800"])},[t("div",Et,[e[61]||(e[61]=t("svg",{class:"h-4 w-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),t("strong",null,r(i.value.paper_size==="58mm"?"Printer Portable":"Printer Standard"),1)]),t("p",Dt,r(i.value.paper_size==="58mm"?"Ukuran standard kasir thermal. Text lebih besar dan mudah dibaca.":"Cocok untuk printer portable/mobile. Text lebih kecil dan padat."),1),t("p",Ft," Ukuran saat ini: "+r(i.value.paper_size==="58mm"?'58mm (2")':'80mm (3")'),1)],2)])])])])):b("",!0),G.showPrinters&&P.value?(n(),o("div",{key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 px-4",onClick:e[11]||(e[11]=a=>P.value=!1)},[t("div",{class:"w-full max-w-md rounded-3xl bg-white p-6 shadow-soft",onClick:e[10]||(e[10]=be(()=>{},["stop"]))},[e[65]||(e[65]=t("h2",{class:"text-lg font-semibold text-slate-900"},"Hapus Printer?",-1)),t("p",Ot,[e[63]||(e[63]=m("Yakin ingin menghapus printer ",-1)),t("strong",null,r(z.value?.name),1),e[64]||(e[64]=m("?",-1))]),e[66]||(e[66]=t("p",{class:"mt-1 text-xs text-slate-400"},"Aksi ini tidak dapat dibatalkan.",-1)),t("div",Rt,[t("button",{onClick:e[9]||(e[9]=a=>P.value=!1),class:"btn-secondary"},"Batal"),t("button",{onClick:xe,class:"btn-primary",disabled:g.value},r(g.value?"Menghapus...":"Hapus"),9,Qt)])])])):b("",!0)]))}},qt={class:"page-shell"},Wt={class:"page-container space-y-4 sm:space-y-6 pb-24 sm:pb-6"},Yt={class:"card"},Jt={class:"flex items-center justify-between"},Xt={class:"flex items-center gap-3"},Zt={class:"flex h-11 w-11 items-center justify-center rounded-xl bg-gradient-to-br from-emerald-500 to-emerald-600 text-lg font-bold text-white shadow-lg"},es={class:"hidden sm:block"},ts={class:"text-sm font-semibold text-slate-900"},ss={class:"text-xs text-slate-500 capitalize"},as={key:0,class:"flex items-center gap-3 rounded-xl border border-emerald-200 bg-emerald-50 p-4 text-emerald-700"},ls={key:1,class:"flex items-center gap-3 rounded-xl border border-red-200 bg-red-50 p-4 text-red-600"},ns={key:2,class:"card flex items-center justify-center gap-3 py-12 text-slate-500"},os={key:3,class:"grid gap-6 lg:grid-cols-[260px,1fr]"},is={class:"card h-fit"},rs={class:"mt-3 space-y-2"},ds={class:"space-y-6"},us={key:0,class:"card space-y-4"},ps={class:"space-y-4"},cs=["disabled"],vs=["disabled"],ms={class:"grid gap-4 sm:grid-cols-2"},xs=["disabled"],fs=["disabled"],bs=["disabled"],gs=["disabled"],_s={key:0,class:"rounded-xl bg-slate-50 p-3"},hs={class:"flex items-center gap-2 text-xs text-slate-500"},ks={class:"flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-2 pt-2"},ys=["disabled"],ws={key:0,class:"h-4 w-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Cs={key:1,class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},js={key:1,class:"space-y-6"},Ms={class:"card space-y-4"},$s={class:"flex items-center justify-between p-4"},Ps={class:"flex items-center gap-3"},zs={class:"relative inline-flex cursor-pointer items-center"},Bs=["disabled"],Ss={key:0,class:"flex items-start gap-3 rounded-xl border border-amber-200 bg-amber-50 p-4"},Ts={key:1,class:"space-y-3 rounded-xl border border-slate-200 bg-white p-4"},Hs={class:"flex items-center justify-between"},As={key:0,class:"flex items-center justify-between"},Vs={class:"text-sm font-medium text-slate-900"},Ls={key:1,class:"flex items-center justify-between"},Ns={class:"text-sm font-medium text-slate-900"},Us={class:"space-y-4"},Is=["disabled"],Ks={class:"relative"},Gs=["type","placeholder","disabled"],Es={class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ds={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},Fs={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},Os={key:2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},Rs={class:"flex items-center gap-2 sm:gap-3"},Qs=["disabled"],qs={class:"flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-2 pt-2"},Ws=["disabled"],Ys={key:0,class:"h-4 w-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Js={key:1,class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Xs={key:0,class:"card"},Zs={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},ea=["disabled"],ta={key:2,class:"space-y-6"},sa={class:"card space-y-4"},aa={class:"flex items-start justify-between"},la={key:0,class:"space-y-4 rounded-xl border border-slate-200 bg-slate-50 p-4"},na={class:"grid gap-4 sm:grid-cols-2"},oa={class:"grid gap-4 sm:grid-cols-2"},ia=["placeholder"],ra={class:"mt-1 text-xs text-slate-500"},da={class:"flex items-center gap-3 pt-6"},ua={class:"flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-2"},pa=["disabled"],ca={key:1,class:"flex items-center gap-3 text-slate-500"},va={key:2},ma={key:0,class:"rounded-xl border border-dashed border-slate-200 p-6 text-center text-sm text-slate-500"},xa={key:1,class:"overflow-x-auto"},fa={class:"font-semibold text-slate-800"},ba={class:"text-slate-600"},ga={class:"text-slate-700"},_a={class:"flex justify-center"},ha={class:"relative inline-flex cursor-pointer items-center"},ka=["checked","disabled","onChange"],ya={class:"flex items-center justify-end gap-2"},wa=["onClick"],Ca=["onClick"],ja={key:3},Ma={key:4},Ha={__name:"SettingsViewNew",setup(G){const oe=$e(),O=Pe(),N=F(()=>O.user),g=c("outlet"),H=c(!1),$=c(!1),P=c(!1),z=c(!1),A=c(!1),k=c(!1),y=c(!1),B=c(!1),S=c(!1),w=c(!1),C=c(!1),v=c(""),d=c(""),i=c({}),X=[{key:"name",label:"Nama"},{key:"charge_type",label:"Tipe"},{key:"value",label:"Nilai",align:"text-right"},{key:"status",label:"Status",align:"text-center"},{key:"actions",label:"Aksi",align:"text-right"}],u=c({sync_enabled:!1,sync_interval_minutes:5,cloud_configured:!1,worker_status:null,last_sync_at:null}),M=c(null),U=c(null),l=c({id:null,outlet_id:"",outlet_name:"",outlet_code:"",outlet_address:"",outlet_phone:"",receipt_footer:"",social_media:"",target_spend_per_pax:0,cloud_api_url:"",cloud_api_key:"",cloud_api_key_masked:"",is_active:!0,sync_enabled:!1,sync_interval_minutes:5,last_sync_at:null,created_at:null,updated_at:null}),T=c([]),x=c({id:null,name:"",charge_type:"percentage",value:0,is_active:!0}),I=async()=>{try{H.value=!0,d.value="";const s=await _.get("/config/outlet");if(s.data.success&&s.data.data){const e=s.data.data;l.value={id:e.id,outlet_id:e.outlet_id||"",outlet_name:e.outlet_name||"",outlet_code:e.outlet_code||"",outlet_address:e.outlet_address||"",outlet_phone:e.outlet_phone||"",receipt_footer:e.receipt_footer??"",social_media:e.social_media||"",target_spend_per_pax:e.target_spend_per_pax||0,cloud_api_url:e.cloud_api_url||"",cloud_api_key:"",cloud_api_key_masked:e.cloud_api_key_masked||"",is_active:e.is_active,sync_enabled:e.sync_enabled,sync_interval_minutes:e.sync_interval_minutes||5,last_sync_at:e.last_sync_at,created_at:e.created_at,updated_at:e.updated_at}}await L()}catch(s){s.response?.status===404?(d.value="Konfigurasi belum dibuat. Silakan isi form dan simpan.",k.value=!0):d.value="Gagal memuat konfigurasi: "+(s.response?.data?.error||s.message)}finally{H.value=!1}},R=()=>{x.value={id:null,name:"",charge_type:"percentage",value:0,is_active:!0}},E=async()=>{try{B.value=!0;const s=await _.get("/config/additional-charges");s.data.success&&(T.value=s.data.data||[])}catch(s){d.value="Gagal memuat biaya tambahan: "+(s.response?.data?.error||s.message)}finally{B.value=!1}},L=async()=>{try{const s=await _.get("/config/sync");s.data.success&&s.data.data&&(u.value=s.data.data)}catch{}},ie=()=>{R(),w.value=!0,d.value="",v.value=""},Q=s=>{x.value={id:s.id,name:s.name,charge_type:s.charge_type,value:s.value,is_active:s.is_active},w.value=!0,d.value="",v.value=""},q=()=>{R(),w.value=!1,d.value="",v.value=""},re=async()=>{try{if(S.value=!0,d.value="",v.value="",!x.value.name){d.value="Nama biaya tambahan wajib diisi";return}if(x.value.value<0){d.value="Nilai biaya tambahan tidak boleh negatif";return}if(x.value.charge_type==="percentage"&&x.value.value>100){d.value="Nilai persentase harus antara 0 dan 100";return}const s={name:x.value.name,charge_type:x.value.charge_type,value:x.value.value,is_active:x.value.is_active};let e;x.value.id?e=await _.put(`/config/additional-charges/${x.value.id}`,s):e=await _.post("/config/additional-charges",s),e.data.success&&(v.value=x.value.id?"Biaya tambahan berhasil diperbarui":"Biaya tambahan berhasil ditambahkan",R(),w.value=!1,await E(),setTimeout(()=>{v.value=""},3e3))}catch(s){d.value="Gagal menyimpan biaya tambahan: "+(s.response?.data?.error||s.message)}finally{S.value=!1}},W=async s=>{if(window.confirm(`Hapus biaya tambahan ${s.name}?`))try{d.value="",v.value="",(await _.delete(`/config/additional-charges/${s.id}`)).data.success&&(v.value="Biaya tambahan berhasil dihapus",await E(),setTimeout(()=>{v.value=""},3e3))}catch(a){d.value="Gagal menghapus biaya tambahan: "+(a.response?.data?.error||a.message)}},Z=async(s,e)=>{if(i.value[s.id])return;const a=s.is_active;s.is_active=e,i.value={...i.value,[s.id]:!0};try{d.value="",v.value="";const p={name:s.name,charge_type:s.charge_type,value:s.value,is_active:s.is_active};if((await _.put(`/config/additional-charges/${s.id}`,p)).data.success){v.value="Status biaya tambahan berhasil diperbarui",await E(),setTimeout(()=>{v.value=""},3e3);return}s.is_active=a}catch(p){s.is_active=a,d.value="Gagal memperbarui status biaya tambahan: "+(p.response?.data?.error||p.message)}finally{const{[s.id]:p,...V}=i.value;i.value=V}},ee=async()=>{if(!u.value.cloud_configured){d.value="Konfigurasi cloud belum lengkap. Isi URL API dan API Key terlebih dahulu.",u.value.sync_enabled=!1;return}try{A.value=!0,d.value="",v.value="",(await _.post("/config/sync/toggle",{enabled:u.value.sync_enabled})).data.success&&(v.value=u.value.sync_enabled?"✅ Sync berhasil diaktifkan":"⏸️ Sync berhasil dinonaktifkan",await L(),await I(),setTimeout(()=>{v.value=""},3e3))}catch(s){d.value="Gagal mengubah status sync: "+(s.response?.data?.message||s.message),u.value.sync_enabled=!u.value.sync_enabled}finally{A.value=!1}},te=()=>{M.value={outlet_name:l.value.outlet_name,outlet_address:l.value.outlet_address,outlet_phone:l.value.outlet_phone,receipt_footer:l.value.receipt_footer,social_media:l.value.social_media,target_spend_per_pax:l.value.target_spend_per_pax},k.value=!0,d.value="",v.value=""},de=()=>{l.value.outlet_name=M.value.outlet_name,l.value.outlet_address=M.value.outlet_address,l.value.outlet_phone=M.value.outlet_phone,l.value.receipt_footer=M.value.receipt_footer,l.value.social_media=M.value.social_media,l.value.target_spend_per_pax=M.value.target_spend_per_pax,k.value=!1,d.value="",v.value=""},ue=()=>{U.value={sync_enabled:l.value.sync_enabled,cloud_api_url:l.value.cloud_api_url,cloud_api_key:l.value.cloud_api_key,sync_interval_minutes:l.value.sync_interval_minutes},y.value=!0,C.value=!1,d.value="",v.value=""},pe=()=>{l.value.sync_enabled=U.value.sync_enabled,l.value.cloud_api_url=U.value.cloud_api_url,l.value.cloud_api_key=U.value.cloud_api_key,l.value.sync_interval_minutes=U.value.sync_interval_minutes,y.value=!1,C.value=!1,d.value="",v.value=""},ce=async()=>{try{if($.value=!0,d.value="",v.value="",!l.value.outlet_name){d.value="Nama Outlet wajib diisi";return}const s={outlet_id:l.value.outlet_id,outlet_name:l.value.outlet_name,outlet_code:l.value.outlet_code,outlet_address:l.value.outlet_address,outlet_phone:l.value.outlet_phone,receipt_footer:l.value.receipt_footer,social_media:l.value.social_media,target_spend_per_pax:l.value.target_spend_per_pax,cloud_api_url:l.value.cloud_api_url,sync_enabled:l.value.sync_enabled,sync_interval_minutes:l.value.sync_interval_minutes};l.value.cloud_api_key&&l.value.cloud_api_key.trim()!==""&&(s.cloud_api_key=l.value.cloud_api_key);let e;l.value.id?e=await _.put("/config/outlet",s):e=await _.post("/config/outlet",s),e.data.success&&(v.value="Informasi outlet berhasil disimpan",k.value=!1,await I(),setTimeout(()=>{v.value=""},3e3))}catch(s){d.value="Gagal menyimpan informasi outlet: "+(s.response?.data?.error||s.message)}finally{$.value=!1}},ve=async()=>{try{if(P.value=!0,d.value="",v.value="",l.value.sync_enabled&&!l.value.cloud_api_url){d.value="URL API Cloud wajib diisi jika sinkronisasi diaktifkan";return}const s={outlet_id:l.value.outlet_id,outlet_name:l.value.outlet_name,outlet_code:l.value.outlet_code,outlet_address:l.value.outlet_address,outlet_phone:l.value.outlet_phone,receipt_footer:l.value.receipt_footer,social_media:l.value.social_media,cloud_api_url:l.value.cloud_api_url,sync_enabled:l.value.sync_enabled,sync_interval_minutes:l.value.sync_interval_minutes};l.value.cloud_api_key&&l.value.cloud_api_key.trim()!==""&&(s.cloud_api_key=l.value.cloud_api_key);let e;l.value.id?e=await _.put("/config/outlet",s):e=await _.post("/config/outlet",s),e.data.success&&(v.value="Konfigurasi cloud berhasil disimpan",y.value=!1,await I(),setTimeout(()=>{v.value=""},3e3))}catch(s){d.value="Gagal menyimpan konfigurasi cloud: "+(s.response?.data?.error||s.message)}finally{P.value=!1}},D=async()=>{try{z.value=!0,d.value="",v.value="",(await _.post("/sync/trigger")).data.success&&(v.value="Sinkronisasi berhasil dimulai",setTimeout(()=>{I()},2e3),setTimeout(()=>{v.value=""},3e3))}catch(s){d.value="Gagal memulai sinkronisasi: "+(s.response?.data?.error||s.message)}finally{z.value=!1}},se=s=>{v.value=s,setTimeout(()=>{v.value=""},3e3)},ae=s=>{d.value=s,setTimeout(()=>{d.value=""},3e3)},le=s=>s?new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",ne=s=>{const e=Number(s||0);return new Intl.NumberFormat("id-ID").format(e)},me=s=>s.charge_type==="percentage"?`${s.value}%`:`Rp ${ne(s.value)}`,xe=()=>{oe.push("/")};return ye(()=>{I(),E()}),(s,e)=>(n(),o("div",qt,[t("div",Wt,[t("div",Yt,[t("div",Jt,[t("div",{class:"flex items-center gap-4"},[t("button",{onClick:xe,class:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-100 text-slate-600 transition hover:bg-slate-200"},[...e[20]||(e[20]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e[21]||(e[21]=t("div",null,[t("h1",{class:"text-xl sm:text-2xl font-bold text-slate-900"},"Pengaturan Outlet"),t("p",{class:"hidden sm:block text-sm text-slate-500"},"Kelola informasi, sinkronisasi, dan perangkat")],-1))]),t("div",Xt,[t("div",Zt,r(N.value?.full_name?.charAt(0)||"U"),1),t("div",es,[t("div",ts,r(N.value?.full_name),1),t("div",ss,r(N.value?.role),1)])])])]),v.value?(n(),o("div",as,[e[22]||(e[22]=t("svg",{class:"h-5 w-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),t("span",null,r(v.value),1)])):b("",!0),d.value?(n(),o("div",ls,[e[23]||(e[23]=t("svg",{class:"h-5 w-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),t("span",null,r(d.value),1)])):b("",!0),H.value?(n(),o("div",ns,[...e[24]||(e[24]=[t("div",{class:"h-6 w-6 animate-spin rounded-full border-2 border-slate-300 border-t-emerald-600"},null,-1),t("p",null,"Memuat konfigurasi...",-1)])])):(n(),o("div",os,[t("div",is,[e[30]||(e[30]=t("div",{class:"text-xs font-semibold text-slate-500"},"Menu Pengaturan",-1)),t("div",rs,[t("button",{onClick:e[0]||(e[0]=a=>g.value="outlet"),class:f(["flex w-full items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold transition",g.value==="outlet"?"bg-emerald-600 text-white shadow-sm":"text-slate-600 hover:bg-slate-50"])},[...e[25]||(e[25]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1),m(" Informasi Outlet ",-1)])],2),t("button",{onClick:e[1]||(e[1]=a=>g.value="cloud"),class:f(["flex w-full items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold transition",g.value==="cloud"?"bg-emerald-600 text-white shadow-sm":"text-slate-600 hover:bg-slate-50"])},[...e[26]||(e[26]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})],-1),m(" Sinkronisasi Cloud ",-1)])],2),t("button",{onClick:e[2]||(e[2]=a=>g.value="additional_charges"),class:f(["flex w-full items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold transition",g.value==="additional_charges"?"bg-emerald-600 text-white shadow-sm":"text-slate-600 hover:bg-slate-50"])},[...e[27]||(e[27]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7a2 2 0 012-2h14a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M8 12h2m4 0h2"})],-1),m(" Biaya Tambahan ",-1)])],2),t("button",{onClick:e[3]||(e[3]=a=>g.value="printer"),class:f(["flex w-full items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold transition",g.value==="printer"?"bg-emerald-600 text-white shadow-sm":"text-slate-600 hover:bg-slate-50"])},[...e[28]||(e[28]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1),m(" Printer ",-1)])],2),t("button",{onClick:e[4]||(e[4]=a=>g.value="print_logs"),class:f(["flex w-full items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold transition",g.value==="print_logs"?"bg-emerald-600 text-white shadow-sm":"text-slate-600 hover:bg-slate-50"])},[...e[29]||(e[29]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),m(" Log Cetak Gagal ",-1)])],2)])]),t("div",ds,[g.value==="outlet"?(n(),o("div",us,[e[43]||(e[43]=K('<div class="flex items-start justify-between"><div class="flex items-center gap-3"><div class="flex h-12 w-12 items-center justify-center rounded-xl bg-blue-100"><svg class="h-6 w-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg></div><div><h2 class="text-base sm:text-lg font-semibold text-slate-900">Informasi Outlet</h2><p class="hidden sm:block text-sm text-slate-500">Data untuk struk dan tampilan</p></div></div></div>',1)),t("div",ps,[t("div",null,[e[31]||(e[31]=t("label",{class:"mb-2 flex items-center gap-2 text-sm font-semibold text-slate-700"},[t("svg",{class:"h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})]),m(" Nama Outlet ")],-1)),h(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>l.value.outlet_name=a),type:"text",class:"input",placeholder:"Warung Makan Sederhana",disabled:!k.value},null,8,cs),[[j,l.value.outlet_name]])]),t("div",null,[e[32]||(e[32]=t("label",{class:"mb-2 flex items-center gap-2 text-sm font-semibold text-slate-700"},[t("svg",{class:"h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]),m(" Alamat ")],-1)),h(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=a=>l.value.outlet_address=a),rows:"2",class:"input",placeholder:"Jl. Raya No. 123, Kota",disabled:!k.value},null,8,vs),[[j,l.value.outlet_address]])]),t("div",ms,[t("div",null,[e[33]||(e[33]=t("label",{class:"mb-2 flex items-center gap-2 text-sm font-semibold text-slate-700"},[t("svg",{class:"h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})]),m(" No. Kontak ")],-1)),h(t("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>l.value.outlet_phone=a),type:"tel",class:"input",placeholder:"08123456789",disabled:!k.value},null,8,xs),[[j,l.value.outlet_phone]])]),t("div",null,[e[34]||(e[34]=t("label",{class:"mb-2 flex items-center gap-2 text-sm font-semibold text-slate-700"},[t("svg",{class:"h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})]),m(" Media Sosial ")],-1)),h(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>l.value.social_media=a),type:"text",class:"input",placeholder:"@namaoutlet",disabled:!k.value},null,8,fs),[[j,l.value.social_media]])])]),t("div",null,[e[35]||(e[35]=t("label",{class:"mb-2 flex items-center gap-2 text-sm font-semibold text-slate-700"},[t("svg",{class:"h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),m(" Salam Penutup Struk ")],-1)),h(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>l.value.receipt_footer=a),type:"text",class:"input",placeholder:"Terima kasih atas kunjungan Anda!",disabled:!k.value},null,8,bs),[[j,l.value.receipt_footer]]),e[36]||(e[36]=t("p",{class:"mt-1.5 text-xs text-slate-500"},"Akan ditampilkan di bagian bawah struk pembayaran",-1))]),t("div",null,[e[37]||(e[37]=t("label",{class:"mb-2 flex items-center gap-2 text-sm font-semibold text-slate-700"},[t("svg",{class:"h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 1.119-3 2.5 0 1.172.96 2.126 2.25 2.415L12 13l.75-.085C14.04 12.626 15 11.672 15 10.5 15 9.119 13.657 8 12 8zm0 8c-2.206 0-4-1.79-4-4 0-1.657 1.343-3 3-3h2c1.657 0 3 1.343 3 3 0 2.21-1.794 4-4 4z"})]),m(" Target Spend per Pax ")],-1)),h(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>l.value.target_spend_per_pax=a),type:"number",min:"0",class:"input",placeholder:"75000",disabled:!k.value},null,8,gs),[[j,l.value.target_spend_per_pax,void 0,{number:!0}]]),e[38]||(e[38]=t("p",{class:"mt-1.5 text-xs text-slate-500"},"Target rata-rata rupiah per orang untuk upselling",-1))])]),l.value.outlet_name?(n(),o("div",_s,[t("div",hs,[e[39]||(e[39]=t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",null,"Terakhir diperbarui: "+r(l.value.updated_at?le(l.value.updated_at):"-"),1)])])):b("",!0),t("div",ks,[k.value?(n(),o(J,{key:1},[t("button",{onClick:de,class:"btn-secondary"},"Batal"),t("button",{onClick:ce,class:"btn-primary flex items-center gap-2",disabled:$.value},[$.value?(n(),o("svg",ws,[...e[41]||(e[41]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(n(),o("svg",Cs,[...e[42]||(e[42]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])),m(" "+r($.value?"Menyimpan...":"Simpan Perubahan"),1)],8,ys)],64)):(n(),o("button",{key:0,onClick:te,class:"btn-secondary flex items-center justify-center gap-2"},[...e[40]||(e[40]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),m(" Edit Informasi ",-1)])]))])])):b("",!0),g.value==="cloud"?(n(),o("div",js,[t("div",Ms,[e[58]||(e[58]=K('<div class="flex items-start justify-between"><div class="flex items-center gap-3"><div class="flex h-12 w-12 items-center justify-center rounded-xl bg-indigo-100"><svg class="h-6 w-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"></path></svg></div><div><h2 class="text-base sm:text-lg font-semibold text-slate-900">Sinkronisasi Cloud</h2><p class="hidden sm:block text-sm text-slate-500">Hubungkan ke server pusat (opsional)</p></div></div></div>',1)),t("div",{class:f(["rounded-xl border-2",u.value.sync_enabled?"border-emerald-200 bg-emerald-50/50":"border-slate-200 bg-slate-50"])},[t("div",$s,[t("div",Ps,[t("div",{class:f(["flex h-10 w-10 items-center justify-center rounded-lg",u.value.sync_enabled?"bg-emerald-100":"bg-slate-200"])},[(n(),o("svg",{class:f(["h-5 w-5",u.value.sync_enabled?"text-emerald-600":"text-slate-500"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[44]||(e[44]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2))],2),t("div",null,[t("p",{class:f(["text-sm font-semibold",u.value.sync_enabled?"text-emerald-900":"text-slate-900"])},r(u.value.sync_enabled?"Sinkronisasi Aktif":"Sinkronisasi Nonaktif"),3),t("p",{class:f(["text-xs",u.value.sync_enabled?"text-emerald-700":"text-slate-500"])},r(u.value.sync_enabled?"Data otomatis disinkronkan":"Mode offline - data lokal saja"),3)])]),t("label",zs,[h(t("input",{type:"checkbox",class:"peer sr-only","onUpdate:modelValue":e[11]||(e[11]=a=>u.value.sync_enabled=a),onChange:ee,disabled:A.value||!u.value.cloud_configured},null,40,Bs),[[he,u.value.sync_enabled]]),e[45]||(e[45]=t("div",{class:"peer h-6 w-11 rounded-full bg-slate-300 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:bg-white after:transition-all after:content-[''] peer-checked:bg-emerald-600 peer-checked:after:translate-x-full peer-disabled:opacity-50"},null,-1))])])],2),u.value.cloud_configured?b("",!0):(n(),o("div",Ss,[...e[46]||(e[46]=[K('<svg class="h-5 w-5 flex-shrink-0 text-amber-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg><div class="text-sm text-amber-800"><p class="font-semibold">Konfigurasi Belum Lengkap</p><p class="mt-1">Isi URL API dan API Key untuk mengaktifkan sinkronisasi cloud</p></div>',2)])])),u.value.worker_status?(n(),o("div",Ts,[t("div",Hs,[e[47]||(e[47]=t("span",{class:"flex items-center gap-2 text-sm font-medium text-slate-600"},[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),m(" Status Worker ")],-1)),t("span",{class:f(["rounded-full px-3 py-1 text-xs font-semibold",u.value.worker_status.running?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"])},r(u.value.worker_status.running?"Running":"Stopped"),3)]),u.value.last_sync_at?(n(),o("div",As,[e[48]||(e[48]=t("span",{class:"flex items-center gap-2 text-sm text-slate-600"},[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),m(" Terakhir Sync ")],-1)),t("span",Vs,r(le(u.value.last_sync_at)),1)])):b("",!0),u.value.sync_interval_minutes?(n(),o("div",Ls,[e[49]||(e[49]=t("span",{class:"flex items-center gap-2 text-sm text-slate-600"},[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})]),m(" Interval ")],-1)),t("span",Ns,"Setiap "+r(u.value.sync_interval_minutes)+" menit",1)])):b("",!0)])):b("",!0),t("div",Us,[t("div",null,[e[50]||(e[50]=t("label",{class:"mb-2 flex items-center gap-2 text-sm font-semibold text-slate-700"},[t("svg",{class:"h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})]),m(" URL API Cloud ")],-1)),h(t("input",{"onUpdate:modelValue":e[12]||(e[12]=a=>l.value.cloud_api_url=a),type:"url",class:"input",placeholder:"https://api.yourcloud.com/v1",disabled:!y.value},null,8,Is),[[j,l.value.cloud_api_url]])]),t("div",null,[e[51]||(e[51]=t("label",{class:"mb-2 flex items-center gap-2 text-sm font-semibold text-slate-700"},[t("svg",{class:"h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})]),m(" API Key ")],-1)),t("div",Ks,[h(t("input",{"onUpdate:modelValue":e[13]||(e[13]=a=>l.value.cloud_api_key=a),type:C.value?"text":"password",class:"input pr-20",placeholder:y.value?"Masukkan API key baru":"••••••••••••",disabled:!y.value},null,8,Gs),[[Me,l.value.cloud_api_key]]),t("button",{type:"button",class:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-1 text-xs font-semibold text-slate-500 hover:text-slate-700",onClick:e[14]||(e[14]=a=>C.value=!C.value)},[(n(),o("svg",Es,[C.value?(n(),o("path",Ds)):(n(),o("path",Fs)),C.value?b("",!0):(n(),o("path",Os))]))])])]),t("div",null,[e[54]||(e[54]=t("label",{class:"mb-2 flex items-center gap-2 text-sm font-semibold text-slate-700"},[t("svg",{class:"h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),m(" Interval Sinkronisasi ")],-1)),t("div",Rs,[h(t("input",{"onUpdate:modelValue":e[15]||(e[15]=a=>l.value.sync_interval_minutes=a),type:"number",min:"1",max:"60",class:"input w-20 sm:w-24",disabled:!y.value},null,8,Qs),[[j,l.value.sync_interval_minutes,void 0,{number:!0}]]),e[52]||(e[52]=t("span",{class:"text-sm text-slate-500"},"menit",-1)),e[53]||(e[53]=t("span",{class:"hidden sm:inline text-xs text-slate-400"},"(1-60 menit)",-1))])])]),t("div",qs,[y.value?(n(),o(J,{key:1},[t("button",{onClick:pe,class:"btn-secondary"},"Batal"),t("button",{onClick:ve,class:"btn-primary flex items-center gap-2",disabled:P.value},[P.value?(n(),o("svg",Ys,[...e[56]||(e[56]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(n(),o("svg",Js,[...e[57]||(e[57]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])),m(" "+r(P.value?"Menyimpan...":"Simpan Perubahan"),1)],8,Ws)],64)):(n(),o("button",{key:0,onClick:ue,class:"btn-secondary flex items-center justify-center gap-2"},[...e[55]||(e[55]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),m(" Edit Konfigurasi ",-1)])]))])]),!H.value&&l.value.sync_enabled&&!y.value?(n(),o("div",Xs,[t("div",Zs,[e[60]||(e[60]=K('<div class="flex items-center gap-3"><div class="flex h-12 w-12 items-center justify-center rounded-xl bg-emerald-100"><svg class="h-6 w-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg></div><div><h3 class="text-base font-semibold text-slate-900">Sinkronisasi Manual</h3><p class="text-xs sm:text-sm text-slate-500">Paksakan upload data ke cloud sekarang</p></div></div>',1)),t("button",{onClick:D,class:"btn-primary flex items-center justify-center gap-2 w-full sm:w-auto",disabled:z.value},[(n(),o("svg",{class:f(["h-5 w-5",z.value?"animate-spin":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[59]||(e[59]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),m(" "+r(z.value?"Sedang Sync...":"Sync Sekarang"),1)],8,ea)])])):b("",!0)])):b("",!0),g.value==="additional_charges"?(n(),o("div",ta,[t("div",sa,[t("div",aa,[e[61]||(e[61]=K('<div class="flex items-center gap-3"><div class="flex h-12 w-12 items-center justify-center rounded-xl bg-amber-100"><svg class="h-6 w-6 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7a2 2 0 012-2h14a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M8 12h2m4 0h2"></path></svg></div><div><h2 class="text-base sm:text-lg font-semibold text-slate-900">Biaya Tambahan</h2><p class="hidden sm:block text-sm text-slate-500">Tambahkan pajak, service, atau biaya lainnya</p></div></div>',1)),w.value?b("",!0):(n(),o("button",{key:0,onClick:ie,class:"btn-primary"},"Tambah Biaya"))]),w.value?(n(),o("div",la,[t("div",na,[t("div",null,[e[62]||(e[62]=t("label",{class:"mb-2 block text-sm font-semibold text-slate-700"},"Nama",-1)),h(t("input",{"onUpdate:modelValue":e[16]||(e[16]=a=>x.value.name=a),type:"text",class:"input",placeholder:"Pajak, Service, dll"},null,512),[[j,x.value.name]])]),t("div",null,[e[64]||(e[64]=t("label",{class:"mb-2 block text-sm font-semibold text-slate-700"},"Tipe",-1)),h(t("select",{"onUpdate:modelValue":e[17]||(e[17]=a=>x.value.charge_type=a),class:"input"},[...e[63]||(e[63]=[t("option",{value:"percentage"},"Persentase",-1),t("option",{value:"fixed"},"Rupiah",-1)])],512),[[_e,x.value.charge_type]])])]),t("div",oa,[t("div",null,[e[65]||(e[65]=t("label",{class:"mb-2 block text-sm font-semibold text-slate-700"},"Nilai",-1)),h(t("input",{"onUpdate:modelValue":e[18]||(e[18]=a=>x.value.value=a),type:"number",min:"0",class:"input",placeholder:x.value.charge_type==="percentage"?"10":"20000"},null,8,ia),[[j,x.value.value,void 0,{number:!0}]]),t("p",ra,r(x.value.charge_type==="percentage"?"Masukkan 0-100":"Masukkan dalam rupiah"),1)]),t("div",da,[h(t("input",{id:"chargeActive","onUpdate:modelValue":e[19]||(e[19]=a=>x.value.is_active=a),type:"checkbox",class:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"},null,512),[[he,x.value.is_active]]),e[66]||(e[66]=t("label",{for:"chargeActive",class:"text-sm text-slate-700"},"Aktif",-1))])]),t("div",ua,[t("button",{onClick:q,class:"btn-secondary"},"Batal"),t("button",{onClick:re,class:"btn-primary",disabled:S.value},r(S.value?"Menyimpan...":"Simpan"),9,pa)])])):b("",!0),B.value?(n(),o("div",ca,[...e[67]||(e[67]=[t("div",{class:"h-5 w-5 animate-spin rounded-full border-2 border-slate-300 border-t-emerald-600"},null,-1),t("span",null,"Memuat biaya tambahan...",-1)])])):(n(),o("div",va,[T.value.length?(n(),o("div",xa,[ge(Be,{columns:X,data:T.value},{"cell-name":Y(({item:a})=>[t("span",fa,r(a.name),1)]),"cell-charge_type":Y(({item:a})=>[t("span",ba,r(a.charge_type==="percentage"?"Persentase":"Rupiah"),1)]),"cell-value":Y(({item:a})=>[t("span",ga,r(me(a)),1)]),"cell-status":Y(({item:a})=>[t("div",_a,[t("label",ha,[t("input",{type:"checkbox",class:"peer sr-only",checked:a.is_active,disabled:i.value[a.id],onChange:p=>Z(a,p.target.checked)},null,40,ka),e[68]||(e[68]=t("div",{class:"peer h-5 w-9 rounded-full bg-slate-300 after:absolute after:left-[2px] after:top-[2px] after:h-4 after:w-4 after:rounded-full after:bg-white after:transition-all after:content-[''] peer-checked:bg-emerald-600 peer-checked:after:translate-x-full peer-disabled:opacity-50"},null,-1))])])]),"cell-actions":Y(({item:a})=>[t("div",ya,[t("button",{onClick:p=>Q(a),class:"btn-secondary px-3"},"Edit",8,wa),t("button",{onClick:p=>W(a),class:"btn-secondary px-3 hover:bg-red-50 hover:text-red-600"},"Hapus",8,Ca)])]),_:1},8,["data"])])):(n(),o("div",ma," Belum ada biaya tambahan. Tambahkan pajak atau service untuk ditampilkan di tagihan. "))]))])])):b("",!0),g.value==="printer"?(n(),o("div",ja,[ge(ke,{"show-printers":!0,"show-failed-logs":!1,onSuccess:se,onError:ae})])):b("",!0),g.value==="print_logs"?(n(),o("div",Ma,[ge(ke,{"show-printers":!1,"show-failed-logs":!0,onSuccess:se,onError:ae})])):b("",!0)])]))])]))}};export{Ha as default};
