import{G as Re,a4 as De,J as l,M as e,aY as Ge,P as g,$ as r,X as C,au as S,Z as c,U as k,al as B,a7 as w,_ as b,r as u,f as se,B as a,aA as Fe}from"./vendor-vue-rrJoI5pD.js";import{s as Ue,a as y,b as Ne}from"./index-BW_WdKWW.js";import"./vendor-BgxNQcjb.js";import"./vendor-element-Bmt4lDx1.js";import"./vendor-socket-DmpRiKjA.js";const Ke={class:"min-h-screen bg-slate-50 pb-24 lg:pb-6"},Je={class:"mx-auto max-w-7xl px-3 sm:px-4 lg:px-8 py-4 sm:py-6 space-y-4 sm:space-y-6"},Ee={class:"overflow-hidden rounded-2xl bg-gradient-to-r from-emerald-600 to-emerald-500 p-4 sm:p-6 shadow-xl"},We={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Xe=["disabled"],Ye={class:"hidden sm:inline"},Ze={class:"grid gap-3 sm:gap-4 grid-cols-3"},et={class:"overflow-hidden rounded-2xl bg-white p-3 sm:p-4 shadow-lg"},tt={class:"flex flex-col sm:flex-row items-center gap-2 sm:gap-3"},st={class:"text-center sm:text-left"},ot={class:"text-xl sm:text-2xl font-bold text-slate-900"},lt={class:"overflow-hidden rounded-2xl bg-white p-3 sm:p-4 shadow-lg"},at={class:"flex flex-col sm:flex-row items-center gap-2 sm:gap-3"},rt={class:"text-center sm:text-left"},nt={class:"text-xl sm:text-2xl font-bold text-slate-900"},it={class:"overflow-hidden rounded-2xl bg-white p-3 sm:p-4 shadow-lg"},dt={class:"flex flex-col sm:flex-row items-center gap-2 sm:gap-3"},ut={class:"text-center sm:text-left"},ct={class:"text-xl sm:text-2xl font-bold text-slate-900"},mt={class:"overflow-hidden rounded-2xl bg-white p-3 sm:p-4 shadow-lg"},vt={class:"grid grid-cols-3 gap-2"},xt={class:"overflow-hidden rounded-2xl bg-white p-3 sm:p-4 shadow-lg"},pt={class:"relative"},bt={key:0,class:"overflow-hidden rounded-2xl bg-white p-12 shadow-lg"},ft={key:1,class:"overflow-hidden rounded-2xl bg-white p-12 shadow-lg"},ht={class:"flex flex-col items-center gap-4 text-center"},gt={class:"mt-1 text-sm text-slate-500"},wt={key:2,class:"grid gap-3 sm:gap-4 grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},kt=["onClick"],yt={class:"absolute top-3 right-3 flex flex-col items-end gap-1"},_t={key:0,class:"inline-flex items-center gap-1.5 rounded-full px-2.5 sm:px-3 py-1 text-xs font-bold shadow-md bg-amber-100 text-amber-700"},Mt={class:"mt-2"},jt={class:"mt-2 sm:mt-3 flex items-center gap-2 text-xs sm:text-sm text-slate-600"},Ct={class:"font-semibold"},Bt={key:0,class:"mt-3 space-y-1.5 text-xs"},Tt={class:"flex items-center gap-1.5 text-slate-700"},zt={class:"font-semibold truncate"},It={class:"flex items-center gap-1.5 text-slate-700"},Pt={class:"font-semibold"},qt={class:"flex items-center gap-1.5 text-emerald-700 bg-emerald-50 rounded-lg px-2 py-1 -mx-1"},St={class:"font-bold"},Ht={key:0,class:"mt-1 space-y-1"},Vt={class:"flex items-center justify-between text-xs text-slate-600"},$t={class:"font-bold"},Qt={key:0,class:"font-semibold"},At={key:1,class:"font-semibold"},Ot={key:2,class:"font-bold"},Lt={key:3,class:"font-bold"},Rt={key:1,class:"mt-2 flex items-center gap-1.5 text-xs text-red-600"},Dt={class:"mt-4"},Gt={key:0,class:"flex items-center justify-center gap-2 rounded-xl bg-emerald-600 px-3 py-2.5 sm:py-3 font-bold text-white shadow-md transition-all group-hover:bg-emerald-700"},Ft={key:1,class:"flex items-center justify-center gap-2 rounded-xl bg-red-600 px-3 py-2.5 sm:py-3 font-bold text-white shadow-md transition-all group-hover:bg-red-700"},Ut={class:"flex items-center justify-between border-b border-slate-100 px-4 sm:px-6 py-3 sm:py-4 sticky top-0 bg-white z-10"},Nt={class:"flex items-center gap-3"},Kt={class:"text-xs sm:text-sm text-slate-500"},Jt={class:"overflow-y-auto flex-1 p-4 sm:p-6"},Et={class:"rounded-2xl border-2 border-indigo-200 bg-indigo-50/30 p-3 sm:p-4 space-y-3"},Wt={class:"relative"},Xt={class:"absolute right-3 top-1/2 -translate-y-1/2"},Yt={key:0,class:"h-5 w-5 animate-spin text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Zt={key:1,class:"h-5 w-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},es={key:2,class:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ts={key:0,class:"mt-1.5 text-xs text-emerald-600 font-semibold flex items-center gap-1"},ss={key:1,class:"mt-1.5 text-xs text-amber-600 font-semibold flex items-center gap-1"},os=["disabled"],ls={class:"grid gap-4"},as={class:"space-y-3"},rs={class:"space-y-3"},ns={class:"relative"},is={class:"relative"},ds=["onUpdate:modelValue","onFocus","onBlur"],us={key:0,class:"p-4 text-center text-sm text-slate-500"},cs=["onMousedown"],ms={class:"flex items-center justify-between"},vs={class:"flex-1"},xs={class:"font-semibold text-slate-900"},ps={class:"text-xs text-slate-500 mt-0.5"},bs={class:"text-sm font-bold text-emerald-600 ml-3"},fs={key:0,class:"rounded-xl bg-white p-3 border border-emerald-200"},hs={class:"flex items-center justify-between"},gs={class:"text-sm font-bold text-slate-900"},ws={class:"text-xs text-slate-500 mt-0.5"},ks=["onClick"],ys={class:"flex items-center gap-3"},_s=["onClick"],Ms={class:"flex-1 text-center"},js={class:"text-4xl font-black text-slate-900"},Cs=["onClick"],Bs={key:1,class:"rounded-xl bg-white p-3 border border-emerald-200"},Ts={class:"text-2xl font-bold text-emerald-600"},zs=["onClick"],Is={class:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 pt-4"},Ps={class:"flex items-center justify-between rounded-xl border border-emerald-200 bg-white px-4 py-3 sm:flex-1"},qs={class:"text-lg font-bold text-emerald-600"},Ss=["disabled"],Hs={key:0,class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Vs={key:1,class:"h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent"},$s={class:"flex items-center justify-between border-b border-slate-100 px-4 sm:px-6 py-3 sm:py-4 sticky top-0 bg-white z-10"},Qs={class:"flex items-center gap-3"},As={class:"text-xs sm:text-sm text-slate-500"},Os={class:"overflow-y-auto flex-1 p-4 sm:p-6 min-h-0"},Ls={key:0,class:"flex items-center justify-center gap-3 py-12 text-slate-500"},Rs={key:1,class:"space-y-4"},Ds={class:"grid gap-3 rounded-2xl border-2 border-slate-200 p-4 sm:grid-cols-2"},Gs={class:"text-sm font-semibold text-slate-900"},Fs={class:"text-sm font-semibold text-slate-900"},Us={class:"text-sm font-semibold text-slate-900"},Ns={class:"text-lg font-bold text-emerald-600"},Ks={key:0,class:"text-sm text-slate-500"},Js={key:1,class:"text-sm font-semibold text-amber-700"},Es={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Ws={class:"flex flex-col sm:flex-row gap-2"},Xs=["disabled"],Ys={class:"space-y-3"},Zs={class:"space-y-2"},eo={class:"flex items-start justify-between"},to={class:"flex-1"},so={class:"font-semibold text-slate-900"},oo={class:"mt-1 flex items-center gap-2 text-xs sm:text-sm text-slate-500"},lo={class:"text-right"},ao={class:"font-bold text-slate-900"},ro={class:"mt-1 flex items-center justify-end gap-2"},no={class:"flex items-center justify-between border-b border-slate-100 px-4 sm:px-6 py-3 sm:py-4 sticky top-0 bg-white z-10"},io={class:"flex items-center gap-3"},uo={class:"text-xs sm:text-sm text-slate-500"},co={class:"overflow-y-auto flex-1 p-4 sm:p-6"},mo={class:"space-y-3"},vo={key:0,class:"rounded-2xl border-2 border-slate-200 p-6 text-center text-sm text-slate-500"},xo={key:1,class:"space-y-2"},po={class:"flex items-center gap-3"},bo=["value"],fo={class:"text-sm font-semibold text-slate-900"},ho={class:"text-xs text-slate-500"},go={class:"text-sm font-bold text-emerald-600"},wo={class:"border-t border-slate-100 p-4 sm:p-6"},ko={class:"flex flex-col sm:flex-row gap-2 sm:justify-end"},yo=["disabled"],_o={key:0,class:"h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent"},Mo={class:"flex items-center justify-between border-b border-slate-100 px-4 sm:px-6 py-3 sm:py-4 sticky top-0 bg-white z-10"},jo={class:"flex items-center gap-3"},Co={class:"text-xs sm:text-sm text-slate-500"},Bo={class:"overflow-y-auto flex-1 p-4 sm:p-6"},To={class:"rounded-2xl border-2 border-slate-200 bg-slate-50/60 p-3 sm:p-4"},zo={class:"text-sm font-bold text-slate-900"},Io={class:"space-y-3"},Po={class:"space-y-3"},qo={class:"relative"},So={class:"relative"},Ho=["onUpdate:modelValue","onFocus","onBlur"],Vo={key:0,class:"p-4 text-center text-sm text-slate-500"},$o=["onMousedown"],Qo={class:"flex items-center justify-between"},Ao={class:"flex-1"},Oo={class:"font-semibold text-slate-900"},Lo={class:"text-xs text-slate-500 mt-0.5"},Ro={class:"text-sm font-bold text-emerald-600 ml-3"},Do={key:0,class:"rounded-xl bg-white p-3 border border-emerald-200"},Go={class:"flex items-center justify-between"},Fo={class:"text-sm font-bold text-slate-900"},Uo={class:"text-xs text-slate-500 mt-0.5"},No=["onClick"],Ko={class:"flex items-center gap-3"},Jo=["onClick"],Eo={class:"flex-1 text-center"},Wo={class:"text-4xl font-black text-slate-900"},Xo=["onClick"],Yo={key:1,class:"rounded-xl bg-white p-3 border border-emerald-200"},Zo={class:"text-2xl font-bold text-emerald-600"},el=["onClick"],tl={class:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 pt-4"},sl=["disabled"],ol={key:0,class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ll={key:1,class:"h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent"},cl={__name:"WaiterView",setup(al){const{success:Q,error:f}=Ne(),T=u(!1),N=u([]),K=u([]),H=u([]),oe=u(0),le=u([]),J=u(!1),_=u(!1),E=u(null),z=u(""),h=u("all"),m=u(null),W=u(!1),I=u(!1),A=u(!1),X=u(!1),M=u(!1),j=u(!1),V=u(!1),Y=u(!1),v=u(null),P=u([]),O=u(0);let Z=null;const d=u({customer_name:"",customer_phone:"",pax:1,items:[{product_id:null,product_name:"",price:0,qty:1,searchQuery:"",showResults:!1}]}),p=u({items:[{product_id:null,product_name:"",qty:1,price:0,searchQuery:"",showResults:!1}]}),ae=se(()=>{let o=[];if(h.value==="all"?o=N.value:h.value==="available"?o=K.value:h.value==="occupied"?o=H.value:o=N.value,z.value.trim()){const t=z.value.toLowerCase().trim();o=o.filter(s=>s.name&&s.name.toLowerCase().includes(t)||s.table_number&&s.table_number.toString().includes(t))}return o}),L=se(()=>{const o=m.value?.id;return H.value.filter(t=>t.id!==o&&t.active_order&&t.active_order.payment_status!=="paid"&&!t.active_order.is_merged)}),ne=se(()=>d.value.items.reduce((o,t)=>o+(t.price||0)*(t.qty||0),0)),R=o=>{if(!o||o.length<1)return[];const t=o.toLowerCase();return le.value.filter(s=>s.name.toLowerCase().includes(t)||s.code&&s.code.toLowerCase().includes(t)).slice(0,10)},q=async(o=!0)=>{o&&(T.value=!0);try{await Promise.all([ce(),ie(),de()])}finally{o&&(T.value=!1)}},ie=async()=>{try{const o=await y.get("/products",{params:{page_size:1e3}});le.value=o.data.data||[]}catch{f("Gagal memuat data produk")}},de=async()=>{try{const o=await y.get("/config/outlet");o.data.success&&o.data.data&&(O.value=o.data.data.target_spend_per_pax||0)}catch{O.value=0}},ue=async()=>{if(E.value&&clearTimeout(E.value),!d.value.customer_phone||d.value.customer_phone.length<10){_.value=!1,d.value.customer_name="";return}E.value=setTimeout(async()=>{J.value=!0;try{const o=await y.get(`/customers/phone/${d.value.customer_phone}`);o.data.success&&o.data.data&&(d.value.customer_name=o.data.data.name,_.value=!0,Q("Pelanggan ditemukan: "+o.data.data.name))}catch(o){o.response?.status===404?_.value=!1:console.error("Customer search error:",o)}finally{J.value=!1}},500)},ce=async()=>{try{const s=((await y.get("/tables",{params:{page_size:100}})).data.data||[]).map(n=>n.active_order?{...n,status:"occupied"}:n.status==="reserved"?n:{...n,status:"available"});N.value=s,K.value=s.filter(n=>n.status==="available"),H.value=s.filter(n=>n.status==="occupied"),oe.value=H.value.length}catch{f("Gagal memuat data meja")}},me=o=>{m.value=o,o.status==="available"?W.value=!0:o.status==="occupied"&&F(o)},D=()=>{W.value=!1,m.value=null,_.value=!1,d.value={customer_name:"",customer_phone:"",pax:1,items:[{product_id:null,product_name:"",price:0,qty:1,searchQuery:"",showResults:!1}]}},ee=()=>{I.value=!1,m.value=null,v.value=null},ve=()=>{P.value=[],X.value=!0},G=()=>{X.value=!1},xe=()=>{I.value=!1,A.value=!0,p.value={items:[{product_id:null,product_name:"",qty:1,price:0,searchQuery:"",showResults:!1}]}},te=o=>{A.value=!1,v.value&&(I.value=!0)},pe=()=>{d.value.items.push({product_id:null,product_name:"",price:0,qty:1,searchQuery:"",showResults:!1})},be=()=>{p.value.items.push({product_id:null,product_name:"",qty:1,price:0,searchQuery:"",showResults:!1})},fe=o=>{d.value.items.splice(o,1)},he=o=>{p.value.items.splice(o,1)},ge=o=>{d.value.items[o].qty++},we=o=>{p.value.items[o].qty++},ke=o=>{d.value.items[o].qty>1&&d.value.items[o].qty--},ye=o=>{p.value.items[o].qty>1&&p.value.items[o].qty--},_e=(o,t)=>{const s=d.value.items,n=s.findIndex((i,$)=>$!==o&&i.product_id===t.id);if(n!==-1){const i=s[o]?.qty||1;s[n].qty+=i,s.splice(o,1);return}s[o].product_id=t.id,s[o].product_name=t.name,s[o].price=t.price,s[o].searchQuery=t.name,s[o].showResults=!1},Me=(o,t)=>{const s=p.value.items,n=s.findIndex((i,$)=>$!==o&&i.product_id===t.id);if(n!==-1){const i=s[o]?.qty||1;s[n].qty+=i,s.splice(o,1);return}s[o].product_id=t.id,s[o].product_name=t.name,s[o].price=t.price,s[o].searchQuery=t.name,s[o].showResults=!1},je=o=>{d.value.items[o].showResults=!0},Ce=o=>{p.value.items[o].showResults=!0},Be=o=>{setTimeout(()=>{d.value.items[o].showResults=!1},200)},Te=o=>{setTimeout(()=>{p.value.items[o].showResults=!1},200)},ze=async()=>{M.value=!0;try{if(d.value.items.some(s=>!s.product_id||s.qty<=0)){f("Pastikan semua menu sudah dipilih dan lengkap"),M.value=!1;return}if(!m.value||!m.value.table_number){f("Meja belum dipilih atau data meja tidak valid"),M.value=!1;return}const t={table_number:String(m.value.table_number),customer_name:d.value.customer_name||"",customer_phone:d.value.customer_phone||"",pax:d.value.pax,items:d.value.items.map(s=>({product_id:s.product_id,qty:s.qty}))};await y.post("/orders",t),Q("Order berhasil dibuat!"),D(),await q()}catch(o){console.error("Submit error:",o),console.error("Error response:",o.response?.data),f("Gagal membuat order: "+(o.response?.data?.message||o.message))}finally{M.value=!1}},Ie=async()=>{j.value=!0;try{if(p.value.items.some(s=>!s.product_id||s.qty<=0)){f("Pastikan semua menu sudah dipilih dan lengkap"),j.value=!1;return}if(!m.value||!m.value.id){f("Meja belum dipilih atau data meja tidak valid"),j.value=!1;return}const t={items:p.value.items.map(s=>({product_id:s.product_id,qty:s.qty}))};await y.post(`/orders/table/${m.value.id}/items`,t),Q("Item berhasil ditambahkan"),A.value=!1,await q(),await F(m.value)}catch(o){console.error("Add items error:",o),f("Gagal menambah item: "+(o.response?.data?.message||o.message))}finally{j.value=!1}},Pe=async()=>{if(!m.value||!v.value?.order?.id){f("Data meja atau order tidak valid");return}if(P.value.length===0){f("Pilih minimal 1 meja untuk digabung");return}V.value=!0;try{const o=L.value.filter(n=>P.value.includes(n.id)),s={source_order_ids:[v.value.order.id,...o.map(n=>n.active_order?.order_id).filter(Boolean)],target_table_number:String(m.value.table_number)};await y.post("/orders/merge",s),Q("Meja berhasil digabung"),G(),await q(),await F(m.value)}catch(o){f("Gagal menggabung meja: "+(o.response?.data?.message||o.message))}finally{V.value=!1}},F=async o=>{Y.value=!0,I.value=!0;try{const t=await y.get(`/orders/table/${o.id}`);v.value=t.data.data}catch{f("Gagal memuat detail order"),ee()}finally{Y.value=!1}},qe=o=>({available:"Tersedia",occupied:"Terisi",reserved:"Reservasi"})[o]||o,x=o=>o?new Intl.NumberFormat("id-ID").format(o):"0",re=o=>{const t=o?.pax||0;return t<=0?0:Math.round((o?.total_amount||0)/t)},U=o=>(O.value||0)-re(o),Se=o=>Math.max(0,U(o)),He=o=>U(o)>0?"text-red-600 bg-red-50":"text-emerald-700 bg-emerald-50",Ve=o=>({pending:"Pending",confirmed:"Dikonfirmasi",completed:"Selesai",cancelled:"Dibatalkan"})[o]||o,$e=o=>({pending:"Pending",preparing:"Diproses",ready:"Siap",served:"Disajikan"})[o]||o,Qe=o=>({pending:"bg-amber-100 text-amber-700",confirmed:"bg-blue-100 text-blue-700",completed:"bg-emerald-100 text-emerald-700",cancelled:"bg-red-100 text-red-700"})[o]||"bg-slate-100 text-slate-600",Ae=o=>({pending:"bg-amber-100 text-amber-700",preparing:"bg-blue-100 text-blue-700",ready:"bg-emerald-100 text-emerald-700",served:"bg-slate-100 text-slate-600"})[o]||"bg-slate-100 text-slate-600",Oe=o=>o==="kitchen"?"bg-orange-100 text-orange-700":"bg-purple-100 text-purple-700",Le=async o=>{o?.type&&(o.type==="order_created"||o.type==="order_items_updated"||o.type==="orders_merged"||o.type==="item_status_updated"||o.type==="payment_completed"||o.type==="table_status_updated")&&(await q(!1),I.value&&m.value&&await F(m.value))};return Re(()=>{q(),Z=Ue(Le)}),De(()=>{Z&&Z()}),(o,t)=>(a(),l(k,null,[e("div",Ke,[e("div",Je,[e("div",Ee,[e("div",We,[t[19]||(t[19]=Ge('<div class="flex items-center gap-3"><div class="flex h-12 w-12 sm:h-14 sm:w-14 items-center justify-center rounded-xl bg-white/20 backdrop-blur-sm"><svg class="h-6 w-6 sm:h-7 sm:w-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg></div><div><h1 class="text-xl sm:text-2xl font-bold text-white">Waiter Dashboard</h1><p class="text-xs sm:text-sm text-emerald-100">Kelola Meja &amp; Pesanan</p></div></div>',1)),e("button",{onClick:q,class:"flex items-center justify-center gap-2 rounded-xl bg-white px-4 py-2.5 font-semibold text-emerald-600 shadow-lg transition-all hover:scale-105 active:scale-95",disabled:T.value},[(a(),l("svg",{class:g(["h-5 w-5",T.value?"animate-spin":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[18]||(t[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),e("span",Ye,r(T.value?"Memuat...":"Refresh"),1)],8,Xe)])]),e("div",Ze,[e("div",et,[e("div",tt,[t[21]||(t[21]=e("div",{class:"flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-xl bg-emerald-100"},[e("svg",{class:"h-5 w-5 sm:h-6 sm:w-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",st,[e("div",ot,r(K.value.length),1),t[20]||(t[20]=e("div",{class:"text-xs text-slate-500"},"Tersedia",-1))])])]),e("div",lt,[e("div",at,[t[23]||(t[23]=e("div",{class:"flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-xl bg-red-100"},[e("svg",{class:"h-5 w-5 sm:h-6 sm:w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",rt,[e("div",nt,r(H.value.length),1),t[22]||(t[22]=e("div",{class:"text-xs text-slate-500"},"Terisi",-1))])])]),e("div",it,[e("div",dt,[t[25]||(t[25]=e("div",{class:"flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-xl bg-indigo-100"},[e("svg",{class:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",ut,[e("div",ct,r(oe.value),1),t[24]||(t[24]=e("div",{class:"text-xs text-slate-500"},"Order",-1))])])])]),e("div",mt,[e("div",vt,[e("button",{onClick:t[0]||(t[0]=s=>h.value="all"),class:g(["rounded-xl px-3 py-2.5 sm:py-3 text-sm sm:text-base font-bold transition-all",h.value==="all"?"bg-gradient-to-r from-emerald-600 to-emerald-500 text-white shadow-lg scale-105":"bg-slate-100 text-slate-600 hover:bg-slate-200"])}," Semua ",2),e("button",{onClick:t[1]||(t[1]=s=>h.value="available"),class:g(["rounded-xl px-3 py-2.5 sm:py-3 text-sm sm:text-base font-bold transition-all",h.value==="available"?"bg-gradient-to-r from-emerald-600 to-emerald-500 text-white shadow-lg scale-105":"bg-slate-100 text-slate-600 hover:bg-slate-200"])}," Tersedia ",2),e("button",{onClick:t[2]||(t[2]=s=>h.value="occupied"),class:g(["rounded-xl px-3 py-2.5 sm:py-3 text-sm sm:text-base font-bold transition-all",h.value==="occupied"?"bg-gradient-to-r from-emerald-600 to-emerald-500 text-white shadow-lg scale-105":"bg-slate-100 text-slate-600 hover:bg-slate-200"])}," Terisi ",2)])]),e("div",xt,[e("div",pt,[C(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>z.value=s),type:"text",placeholder:"Cari meja (nama atau nomor)...",class:"w-full h-11 pl-11 pr-10 rounded-xl border-2 border-slate-200 bg-slate-50 text-sm sm:text-base font-medium placeholder-slate-400 focus:outline-none focus:border-emerald-500 focus:bg-white focus:ring-4 focus:ring-emerald-100 transition-all"},null,512),[[S,z.value]]),t[27]||(t[27]=e("svg",{class:"absolute left-3.5 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),z.value?(a(),l("button",{key:0,onClick:t[4]||(t[4]=s=>z.value=""),class:"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-full hover:bg-slate-100 transition-colors"},[...t[26]||(t[26]=[e("svg",{class:"h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):c("",!0)])]),T.value?(a(),l("div",bt,[...t[28]||(t[28]=[e("div",{class:"flex flex-col items-center gap-4 text-slate-500"},[e("div",{class:"h-12 w-12 animate-spin rounded-full border-4 border-slate-200 border-t-emerald-600"}),e("p",{class:"font-semibold"},"Memuat data meja...")],-1)])])):ae.value.length===0?(a(),l("div",ft,[e("div",ht,[t[30]||(t[30]=e("div",{class:"flex h-20 w-20 items-center justify-center rounded-full bg-slate-100"},[e("svg",{class:"h-10 w-10 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})])],-1)),e("div",null,[t[29]||(t[29]=e("h3",{class:"text-lg font-bold text-slate-900"},"Tidak Ada Meja",-1)),e("p",gt," Tidak ada meja "+r(h.value==="available"?"tersedia":h.value==="occupied"?"terisi":""),1)])])])):(a(),l("div",wt,[(a(!0),l(k,null,B(ae.value,s=>(a(),l("button",{key:s.id,onClick:n=>me(s),class:g(["group relative overflow-hidden rounded-2xl border-3 p-4 sm:p-5 shadow-lg transition-all active:scale-95 text-left",s.status==="available"?"border-emerald-300 bg-gradient-to-br from-emerald-50 to-emerald-100 hover:shadow-xl hover:scale-105":s.status==="occupied"?"border-red-300 bg-gradient-to-br from-red-50 to-red-100 hover:shadow-xl hover:scale-105":"border-amber-300 bg-gradient-to-br from-amber-50 to-amber-100 hover:shadow-xl hover:scale-105"])},[e("div",yt,[e("span",{class:g(["inline-flex items-center gap-1.5 rounded-full px-2.5 sm:px-3 py-1 text-xs font-bold shadow-md",s.status==="available"?"bg-emerald-600 text-white":s.status==="occupied"?"bg-red-600 text-white":"bg-amber-600 text-white"])},[t[31]||(t[31]=e("span",{class:"inline-block h-1.5 w-1.5 rounded-full bg-white"},null,-1)),b(" "+r(qe(s.status)),1)],2),s.active_order?.is_merged?(a(),l("span",_t," Gabung ke "+r(s.active_order?.merged_from_table_number||"-"),1)):c("",!0)]),e("div",Mt,[e("div",{class:g(["text-3xl sm:text-4xl font-black",s.status==="available"?"text-emerald-700":s.status==="occupied"?"text-red-700":"text-amber-700"])},r(s.table_number),3),e("div",jt,[t[32]||(t[32]=e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),e("span",Ct,r(s.capacity)+" orang",1)]),s.active_order?(a(),l("div",Bt,[e("div",Tt,[t[33]||(t[33]=e("svg",{class:"h-3.5 w-3.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),e("span",zt,r(s.active_order.customer_name||"Tamu"),1)]),e("div",It,[t[34]||(t[34]=e("svg",{class:"h-3.5 w-3.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),e("span",Pt,r(s.active_order.pax)+" pax",1)]),e("div",qt,[e("span",St,"Rp "+r(x(s.active_order.total_amount)),1)]),O.value>0?(a(),l("div",Ht,[e("div",Vt,[t[35]||(t[35]=e("span",{class:"font-semibold"},"SPP",-1)),e("span",$t,"Rp "+r(x(re(s.active_order)))+"/pax",1)]),e("div",{class:g(["flex items-center justify-between rounded-lg px-2 py-1 -mx-1",He(s.active_order)])},[U(s.active_order)>0?(a(),l("span",Qt,"Kurang")):(a(),l("span",At,"Target")),U(s.active_order)>0?(a(),l("span",Ot,"Rp "+r(x(Se(s.active_order)))+"/pax",1)):(a(),l("span",Lt,"Tercapai"))],2)])):c("",!0)])):s.status==="occupied"?(a(),l("div",Rt,[...t[36]||(t[36]=[e("svg",{class:"h-3.5 w-3.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})],-1),e("span",{class:"font-semibold"},"Ada pesanan aktif",-1)])])):c("",!0)]),e("div",Dt,[s.status==="available"?(a(),l("div",Gt,[...t[37]||(t[37]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"text-sm sm:text-base"},"Buat Order",-1)])])):s.status==="occupied"?(a(),l("div",Ft,[...t[38]||(t[38]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),e("span",{class:"text-sm sm:text-base"},"Lihat Order",-1)])])):c("",!0)])],10,kt))),128))]))]),W.value?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-slate-900/60 sm:px-4",onClick:D},[e("div",{class:"w-full max-w-3xl rounded-t-3xl sm:rounded-3xl bg-white shadow-soft max-h-[90vh] overflow-hidden flex flex-col",onClick:t[9]||(t[9]=w(()=>{},["stop"]))},[e("div",Ut,[e("div",Nt,[t[40]||(t[40]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-xl bg-emerald-100"},[e("svg",{class:"h-6 w-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])],-1)),e("div",null,[t[39]||(t[39]=e("h2",{class:"text-base sm:text-lg font-bold text-slate-900"},"Buat Order Baru",-1)),e("p",Kt,"Meja "+r(m.value?.table_number),1)])]),e("button",{onClick:D,class:"flex h-9 w-9 items-center justify-center rounded-lg bg-slate-100 text-slate-600 transition hover:bg-slate-200"},[...t[41]||(t[41]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Jt,[e("form",{onSubmit:w(ze,["prevent"]),class:"space-y-4"},[e("div",Et,[t[49]||(t[49]=e("div",{class:"flex items-center gap-2 text-sm font-bold text-indigo-700"},[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),b(" Data Pelanggan ")],-1)),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-xs font-semibold text-slate-600 mb-1.5"},"Nomor HP",-1)),e("div",Wt,[C(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>d.value.customer_phone=s),onInput:ue,type:"tel",class:"input text-base font-semibold pr-10",placeholder:"08xxxxxxxxxx"},null,544),[[S,d.value.customer_phone]]),e("div",Xt,[J.value?(a(),l("svg",Yt,[...t[42]||(t[42]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):_.value?(a(),l("svg",Zt,[...t[43]||(t[43]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):(a(),l("svg",es,[...t[44]||(t[44]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 3l-6 6m0 0V4m0 5h5M5 3a2 2 0 00-2 2v1c0 8.284 6.716 15 15 15h1a2 2 0 002-2v-3.28a1 1 0 00-.684-.948l-4.493-1.498a1 1 0 00-1.21.502l-1.13 2.257a11.042 11.042 0 01-5.516-5.517l2.257-1.128a1 1 0 00.502-1.21L9.228 3.683A1 1 0 008.279 3H5z"},null,-1)])]))])]),_.value?(a(),l("p",ts,[...t[45]||(t[45]=[e("svg",{class:"h-3.5 w-3.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),b(" Pelanggan ditemukan ",-1)])])):d.value.customer_phone&&d.value.customer_phone.length>=8?(a(),l("p",ss,[...t[46]||(t[46]=[e("svg",{class:"h-3.5 w-3.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),b(" Pelanggan baru - isi nama di bawah ",-1)])])):c("",!0)]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-xs font-semibold text-slate-600 mb-1.5"},"Nama Pelanggan",-1)),C(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>d.value.customer_name=s),type:"text",class:"input text-base",placeholder:"Opsional",disabled:_.value},null,8,os),[[S,d.value.customer_name]])])]),e("div",ls,[e("div",null,[t[50]||(t[50]=e("label",{class:"text-sm font-semibold text-slate-700"},"Jumlah Tamu *",-1)),C(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>d.value.pax=s),type:"number",min:"1",required:"",class:"input mt-2",placeholder:"Berapa orang?"},null,512),[[S,d.value.pax,void 0,{number:!0}]])])]),e("div",as,[t[60]||(t[60]=e("label",{class:"text-sm font-semibold text-slate-700"},"Item Pesanan *",-1)),e("div",rs,[(a(!0),l(k,null,B(d.value.items,(s,n)=>(a(),l("div",{key:n,class:"rounded-2xl border-2 border-emerald-200 bg-emerald-50/30 p-3 sm:p-4 space-y-3"},[e("div",ns,[t[52]||(t[52]=e("label",{class:"block text-xs font-semibold text-slate-600 mb-1.5"},"Cari Menu",-1)),e("div",is,[C(e("input",{"onUpdate:modelValue":i=>s.searchQuery=i,onFocus:i=>je(n),onBlur:i=>Be(n),type:"text",placeholder:"Ketik nama atau kode menu...",class:"input text-base font-semibold pr-10"},null,40,ds),[[S,s.searchQuery]]),t[51]||(t[51]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2"},[e("svg",{class:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),s.showResults&&s.searchQuery.length>0?(a(),l("div",{key:0,onMousedown:t[8]||(t[8]=w(()=>{},["prevent"])),class:"absolute z-10 mt-1 w-full max-h-60 overflow-y-auto rounded-xl border-2 border-emerald-200 bg-white shadow-xl"},[R(s.searchQuery).length===0?(a(),l("div",us," Tidak ada menu ditemukan ")):c("",!0),(a(!0),l(k,null,B(R(s.searchQuery),i=>(a(),l("button",{key:i.id,type:"button",onMousedown:w($=>_e(n,i),["prevent"]),class:"w-full p-3 text-left transition hover:bg-emerald-50 border-b border-slate-100 last:border-b-0"},[e("div",ms,[e("div",vs,[e("div",xs,r(i.name),1),e("div",ps,r(i.code||"Tanpa Kode")+" • "+r(i.category_name),1)]),e("div",bs,r(x(i.price)),1)])],40,cs))),128))],32)):c("",!0)]),s.product_id?(a(),l("div",fs,[e("div",hs,[e("div",null,[e("div",gs,r(s.product_name),1),e("div",ws,r(x(s.price))+" / porsi",1)]),e("button",{type:"button",onClick:i=>{s.product_id=null,s.searchQuery="",s.price=0},class:"flex h-8 w-8 items-center justify-center rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200"},[...t[53]||(t[53]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ks)])])):c("",!0),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-xs font-semibold text-slate-600 mb-1.5"},"Jumlah",-1)),e("div",ys,[e("button",{type:"button",onClick:i=>ke(n),class:"flex h-14 w-14 items-center justify-center rounded-xl bg-red-100 text-red-600 transition-all hover:bg-red-200 active:scale-95"},[...t[54]||(t[54]=[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M20 12H4"})],-1)])],8,_s),e("div",Ms,[e("div",js,r(s.qty),1)]),e("button",{type:"button",onClick:i=>ge(n),class:"flex h-14 w-14 items-center justify-center rounded-xl bg-emerald-600 text-white transition-all hover:bg-emerald-700 active:scale-95"},[...t[55]||(t[55]=[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M12 4v16m8-8H4"})],-1)])],8,Cs)])]),s.price>0?(a(),l("div",Bs,[t[57]||(t[57]=e("div",{class:"text-xs text-slate-500 mb-1"},"Total Harga",-1)),e("div",Ts,r(x(s.price*s.qty)),1)])):c("",!0),d.value.items.length>1?(a(),l("button",{key:2,type:"button",onClick:i=>fe(n),class:"w-full flex items-center justify-center gap-2 rounded-xl bg-red-100 px-4 py-2.5 font-semibold text-red-600 transition hover:bg-red-200"},[...t[58]||(t[58]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),b(" Hapus Item ",-1)])],8,zs)):c("",!0)]))),128))]),e("button",{type:"button",onClick:pe,class:"btn-secondary w-full flex items-center justify-center gap-2"},[...t[59]||(t[59]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),b(" Tambah Menu Lain ",-1)])])]),e("div",Is,[e("div",Ps,[t[61]||(t[61]=e("span",{class:"text-sm font-semibold text-slate-600"},"Total Nominal",-1)),e("span",qs,r(x(ne.value)),1)]),e("button",{type:"button",onClick:D,class:"btn-secondary sm:whitespace-nowrap"},"Batal"),e("button",{type:"submit",class:"btn-primary flex items-center justify-center gap-2 sm:whitespace-nowrap",disabled:M.value},[M.value?(a(),l("div",Vs)):(a(),l("svg",Hs,[...t[62]||(t[62]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])),b(" "+r(M.value?"Memproses...":"Buat Order"),1)],8,Ss)])],32)])])])):c("",!0),I.value?(a(),l("div",{key:1,class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-slate-900/60 sm:px-4",onClick:ee},[e("div",{class:"w-full max-w-4xl rounded-t-3xl sm:rounded-3xl bg-white shadow-soft max-h-[90vh] overflow-hidden flex flex-col min-h-0",onClick:t[10]||(t[10]=w(()=>{},["stop"]))},[e("div",$s,[e("div",Qs,[t[64]||(t[64]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-xl bg-indigo-100"},[e("svg",{class:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",null,[t[63]||(t[63]=e("h2",{class:"text-base sm:text-lg font-bold text-slate-900"},"Detail Order",-1)),e("p",As,"Meja "+r(m.value?.table_number),1)])]),e("button",{onClick:ee,class:"flex h-9 w-9 items-center justify-center rounded-lg bg-slate-100 text-slate-600 transition hover:bg-slate-200"},[...t[65]||(t[65]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Os,[Y.value?(a(),l("div",Ls,[...t[66]||(t[66]=[e("div",{class:"h-8 w-8 animate-spin rounded-full border-3 border-slate-200 border-t-emerald-600"},null,-1),e("p",{class:"font-semibold"},"Memuat order...",-1)])])):v.value?(a(),l("div",Rs,[e("div",Ds,[t[67]||(t[67]=e("div",{class:"text-sm text-slate-500"},"Nomor Pesanan",-1)),e("div",Gs,r(v.value.order.id),1),t[68]||(t[68]=e("div",{class:"text-sm text-slate-500"},"Pelanggan",-1)),e("div",Fs,r(v.value.order.customer_name||"-"),1),t[69]||(t[69]=e("div",{class:"text-sm text-slate-500"},"Jumlah Tamu",-1)),e("div",Us,r(v.value.order.pax)+" orang",1),t[70]||(t[70]=e("div",{class:"text-sm text-slate-500"},"Total",-1)),e("div",Ns,r(x(v.value.order.total_amount)),1),t[71]||(t[71]=e("div",{class:"text-sm text-slate-500"},"Status",-1)),e("div",null,[e("span",{class:g(["rounded-full px-3 py-1 text-xs font-semibold",Qe(v.value.order.order_status)])},r(Ve(v.value.order.order_status)),3)]),v.value.order.is_merged?(a(),l("div",Ks,"Gabungan")):c("",!0),v.value.order.is_merged?(a(),l("div",Js," Digabung ke Meja "+r(v.value.order.merged_from_table_number||"-"),1)):c("",!0)]),e("div",Es,[t[74]||(t[74]=e("h3",{class:"text-sm font-bold text-slate-700"},"Item Pesanan",-1)),e("div",Ws,[e("button",{type:"button",onClick:ve,disabled:L.value.length===0||v.value.order.is_merged,class:"btn-secondary flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[...t[72]||(t[72]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h10M7 12h10M7 17h10"})],-1),b(" Gabung Meja ",-1)])],8,Xs),e("button",{type:"button",onClick:xe,class:"btn-primary flex items-center justify-center gap-2"},[...t[73]||(t[73]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),b(" Tambah Pesanan ",-1)])])])]),e("div",Ys,[e("div",Zs,[(a(!0),l(k,null,B(v.value.items,s=>(a(),l("div",{key:s.id,class:"rounded-2xl border border-slate-200 p-3 sm:p-4"},[e("div",eo,[e("div",to,[e("div",so,r(s.product_name),1),e("div",oo,[e("span",null,r(s.qty)+"x",1),e("span",null,r(x(s.price)),1)])]),e("div",lo,[e("div",ao,r(x(s.price*s.qty)),1),e("div",ro,[e("span",{class:g(["rounded-full px-2 py-0.5 text-xs font-semibold",Oe(s.destination)])},r(s.destination==="kitchen"?"Kitchen":"Bar"),3),e("span",{class:g(["rounded-full px-2 py-0.5 text-xs font-semibold",Ae(s.item_status)])},r($e(s.item_status)),3)])])])]))),128))])])])):c("",!0)])])])):c("",!0)]),X.value?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-slate-900/60 sm:px-4",onClick:G},[e("div",{class:"w-full max-w-2xl rounded-t-3xl sm:rounded-3xl bg-white shadow-soft max-h-[90vh] overflow-hidden flex flex-col",onClick:t[12]||(t[12]=w(()=>{},["stop"]))},[e("div",no,[e("div",io,[t[76]||(t[76]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-xl bg-amber-100"},[e("svg",{class:"h-6 w-6 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h10M7 12h10M7 17h10"})])],-1)),e("div",null,[t[75]||(t[75]=e("h2",{class:"text-base sm:text-lg font-bold text-slate-900"},"Gabung Meja",-1)),e("p",uo,"Target: Meja "+r(m.value?.table_number),1)])]),e("button",{onClick:G,class:"flex h-9 w-9 items-center justify-center rounded-lg bg-slate-100 text-slate-600 transition hover:bg-slate-200"},[...t[77]||(t[77]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",co,[e("div",mo,[t[78]||(t[78]=e("div",{class:"rounded-2xl border-2 border-slate-200 bg-slate-50/60 p-3 sm:p-4"},[e("div",{class:"text-xs font-semibold text-slate-500"},"Pilih meja untuk digabung"),e("div",{class:"text-sm font-bold text-slate-900"},"Minimal 1 meja terisi lain")],-1)),L.value.length===0?(a(),l("div",vo," Tidak ada meja terisi lain yang bisa digabung ")):(a(),l("div",xo,[(a(!0),l(k,null,B(L.value,s=>(a(),l("label",{key:s.id,class:"flex items-center justify-between rounded-2xl border border-slate-200 p-3 transition hover:bg-slate-50"},[e("div",po,[C(e("input",{type:"checkbox",class:"h-4 w-4 text-emerald-600",value:s.id,"onUpdate:modelValue":t[11]||(t[11]=n=>P.value=n)},null,8,bo),[[Fe,P.value]]),e("div",null,[e("div",fo,"Meja "+r(s.table_number),1),e("div",ho,"Order "+r(s.active_order?.order_id),1)])]),e("div",go,r(x(s.active_order?.total_amount||0)),1)]))),128))]))])]),e("div",wo,[e("div",ko,[e("button",{type:"button",onClick:G,class:"btn-secondary"},"Batal"),e("button",{type:"button",onClick:Pe,disabled:P.value.length===0||V.value,class:"btn-primary flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[V.value?(a(),l("div",_o)):c("",!0),b(" "+r(V.value?"Memproses...":"Gabungkan Meja"),1)],8,yo)])])])])):c("",!0),A.value?(a(),l("div",{key:1,class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-slate-900/60 sm:px-4",onClick:t[17]||(t[17]=s=>te())},[e("div",{class:"w-full max-w-3xl rounded-t-3xl sm:rounded-3xl bg-white shadow-soft max-h-[90vh] overflow-hidden flex flex-col",onClick:t[16]||(t[16]=w(()=>{},["stop"]))},[e("div",Mo,[e("div",jo,[t[80]||(t[80]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-xl bg-emerald-100"},[e("svg",{class:"h-6 w-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])],-1)),e("div",null,[t[79]||(t[79]=e("h2",{class:"text-base sm:text-lg font-bold text-slate-900"},"Tambah Pesanan",-1)),e("p",Co,"Meja "+r(m.value?.table_number),1)])]),e("button",{onClick:t[13]||(t[13]=s=>te()),class:"flex h-9 w-9 items-center justify-center rounded-lg bg-slate-100 text-slate-600 transition hover:bg-slate-200"},[...t[81]||(t[81]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Bo,[e("form",{onSubmit:w(Ie,["prevent"]),class:"space-y-4"},[e("div",To,[t[82]||(t[82]=e("div",{class:"text-xs font-semibold text-slate-500"},"Pelanggan",-1)),e("div",zo,r(v.value?.order?.customer_name||"Tamu"),1)]),e("div",Io,[t[92]||(t[92]=e("label",{class:"text-sm font-semibold text-slate-700"},"Item Pesanan *",-1)),e("div",Po,[(a(!0),l(k,null,B(p.value.items,(s,n)=>(a(),l("div",{key:n,class:"rounded-2xl border-2 border-emerald-200 bg-emerald-50/30 p-3 sm:p-4 space-y-3"},[e("div",qo,[t[84]||(t[84]=e("label",{class:"block text-xs font-semibold text-slate-600 mb-1.5"},"Cari Menu",-1)),e("div",So,[C(e("input",{"onUpdate:modelValue":i=>s.searchQuery=i,onFocus:i=>Ce(n),onBlur:i=>Te(n),type:"text",placeholder:"Ketik nama atau kode menu...",class:"input text-base font-semibold pr-10"},null,40,Ho),[[S,s.searchQuery]]),t[83]||(t[83]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2"},[e("svg",{class:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),s.showResults&&s.searchQuery.length>0?(a(),l("div",{key:0,onMousedown:t[14]||(t[14]=w(()=>{},["prevent"])),class:"absolute z-10 mt-1 w-full max-h-60 overflow-y-auto rounded-xl border-2 border-emerald-200 bg-white shadow-xl"},[R(s.searchQuery).length===0?(a(),l("div",Vo," Tidak ada menu ditemukan ")):c("",!0),(a(!0),l(k,null,B(R(s.searchQuery),i=>(a(),l("button",{key:i.id,type:"button",onMousedown:w($=>Me(n,i),["prevent"]),class:"w-full p-3 text-left transition hover:bg-emerald-50 border-b border-slate-100 last:border-b-0"},[e("div",Qo,[e("div",Ao,[e("div",Oo,r(i.name),1),e("div",Lo,r(i.code||"Tanpa Kode")+" • "+r(i.category_name),1)]),e("div",Ro,r(x(i.price)),1)])],40,$o))),128))],32)):c("",!0)]),s.product_id?(a(),l("div",Do,[e("div",Go,[e("div",null,[e("div",Fo,r(s.product_name),1),e("div",Uo,r(x(s.price))+" / porsi",1)]),e("button",{type:"button",onClick:i=>{s.product_id=null,s.searchQuery="",s.price=0},class:"flex h-8 w-8 items-center justify-center rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200"},[...t[85]||(t[85]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,No)])])):c("",!0),e("div",null,[t[88]||(t[88]=e("label",{class:"block text-xs font-semibold text-slate-600 mb-1.5"},"Jumlah",-1)),e("div",Ko,[e("button",{type:"button",onClick:i=>ye(n),class:"flex h-14 w-14 items-center justify-center rounded-xl bg-red-100 text-red-600 transition-all hover:bg-red-200 active:scale-95"},[...t[86]||(t[86]=[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M20 12H4"})],-1)])],8,Jo),e("div",Eo,[e("div",Wo,r(s.qty),1)]),e("button",{type:"button",onClick:i=>we(n),class:"flex h-14 w-14 items-center justify-center rounded-xl bg-emerald-600 text-white transition-all hover:bg-emerald-700 active:scale-95"},[...t[87]||(t[87]=[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M12 4v16m8-8H4"})],-1)])],8,Xo)])]),s.price>0?(a(),l("div",Yo,[t[89]||(t[89]=e("div",{class:"text-xs text-slate-500 mb-1"},"Total Harga",-1)),e("div",Zo,r(x(s.price*s.qty)),1)])):c("",!0),p.value.items.length>1?(a(),l("button",{key:2,type:"button",onClick:i=>he(n),class:"w-full flex items-center justify-center gap-2 rounded-xl bg-red-100 px-4 py-2.5 font-semibold text-red-600 transition hover:bg-red-200"},[...t[90]||(t[90]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),b(" Hapus Item ",-1)])],8,el)):c("",!0)]))),128))]),e("button",{type:"button",onClick:be,class:"btn-secondary w-full flex items-center justify-center gap-2"},[...t[91]||(t[91]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),b(" Tambah Menu Lain ",-1)])])]),e("div",tl,[e("button",{type:"button",onClick:t[15]||(t[15]=s=>te()),class:"btn-secondary"},"Batal"),e("button",{type:"submit",class:"btn-primary flex items-center justify-center gap-2",disabled:j.value},[j.value?(a(),l("div",ll)):(a(),l("svg",ol,[...t[93]||(t[93]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])),b(" "+r(j.value?"Memproses...":"Tambah Pesanan"),1)],8,sl)])],32)])])])):c("",!0)],64))}};export{cl as default};
